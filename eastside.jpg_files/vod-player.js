webpackJsonp(["widget/vod-player","widget/player"],{1518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=t.Player=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(2696)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2536));t.Player=r,t.Wrapper=i.default,t.default=i.default},1521:function(e,t,n){"use strict";function i(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n.n(r),a=n(1),s=n.n(a),l=n(1518),u=n.n(l),c=n(227),d=n.n(c),f=n(114),h=n.n(f),p=n(4),v=n.n(p),_=n(919),g=n(2961),y=n(2964);n.o(l,"Player")&&n.d(t,"Player",function(){return l.Player});var m,E,b,S=(b=E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onFullScreenEnter=function(){this.props.onFullScreenChanged(!0)},t.prototype.onFullScreenExit=function(){this.props.onFullScreenChanged(!1)},t.prototype.renderVideoPlayer=function(){var e=this.props,t=e.mobileMode,n=e.watchOnSite,i=e.width,r=e.height,a=e.vidiUrls,s=e.isVideoPlayRequested,l=e.isVideoPauseRequested,c=e.playAtFullScreen,d=e.onError,f=e.posterUrl,h=e.preload,p=e.shouldControlsAlwaysShow,v=e.onWatchOnSiteClick,g=e.texts,m=e.onInit,E=e.onPlay,b=e.onPause,S=e.onEnded,T=e.onSeek,k=e.onUserSeek,w=e.onAnomalyDetected,O=e.children;return o.a.createElement(u.a,{preload:h,width:i,height:r,shouldTriggerPlay:s,shouldTriggerPause:l,onError:d,pauseVideoOnFullScreenExit:t,onInit:m,onUserSeek:k,onSeek:T,onPlay:E,onPause:b,onEnd:S,onFullScreenEnter:this.onFullScreenEnter,onFullScreenExit:this.onFullScreenExit,onPlaybackAnomaly:w,isInFullScreen:c,watchOnSite:n,posterUrl:f,src:a,shouldControlsAlwaysShow:p,onWatchOnSite:v,texts:g,modules:{cards:_.a}},o.a.createElement(y.a,null,O))},t.prototype.render=function(){var e=this.props.vidiUrls;return d()(e)?o.a.createElement(g.a,null):this.renderVideoPlayer()},t}(o.a.Component),E.propTypes={children:s.a.node,channelData:s.a.object,videoItem:s.a.object,vidiUrls:s.a.array,className:s.a.string,mobileMode:s.a.bool,playAtFullScreen:s.a.bool,preload:s.a.string,width:s.a.number,height:s.a.number,onInit:s.a.func,onUserSeek:s.a.func,onSeek:s.a.func,onPlay:s.a.func,onPause:s.a.func,onEnded:s.a.func,onFullScreenChanged:s.a.func,onAnomalyDetected:s.a.func,onError:s.a.func,shouldControlsAlwaysShow:s.a.bool,isVideoPlayRequested:s.a.bool,isVideoPauseRequested:s.a.bool,watchOnSite:s.a.shape({url:s.a.string,logo:s.a.string,showAlways:s.a.bool}),onWatchOnSiteClick:s.a.func,posterUrl:s.a.string,texts:s.a.object},E.defaultProps={width:640,height:360,mobileMode:!1,preload:"metadata",canShowTitle:!0,onPause:h.a,onPlay:h.a,onEnded:h.a,onVideoInfoShow:h.a,onBuyRentButtonClicked:h.a,onShareVideoShow:h.a,onFullScreenChanged:h.a,onWatchOnSiteClick:h.a,onError:h.a,onAnomalyDetected:h.a},m=b,i(m.prototype,"onFullScreenEnter",[v.a],Object.getOwnPropertyDescriptor(m.prototype,"onFullScreenEnter"),m.prototype),i(m.prototype,"onFullScreenExit",[v.a],Object.getOwnPropertyDescriptor(m.prototype,"onFullScreenExit"),m.prototype),m);t.default=S},1613:function(e,t,n){"use strict";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)a.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e,t){var n=s?s+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=new Array(o);r<o;r++)a[r]=i[r].fn;return a},o.prototype.emit=function(e,t,n,i,r,o){var a=s?s+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,r),!0;case 6:return c.fn.call(c.context,t,n,i,r,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,n){var i=new r(t,n||this),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.removeListener=function(e,t,n,r){var o=s?s+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new i:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[o]);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||r&&!a[l].once||n&&a[l].context!==n)&&u.push(a[l]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new i:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,e.exports=o},2415:function(e,t,n){var i=n(2422),r=n(2442),o=n(2443),a=n(2463),s=n(2541),l=function(e,t,n){var u,c,d,f,h=e&l.F,p=e&l.G,v=e&l.S,_=e&l.P,g=e&l.B,y=p?i:v?i[t]||(i[t]={}):(i[t]||{}).prototype,m=p?r:r[t]||(r[t]={}),E=m.prototype||(m.prototype={});p&&(n=t);for(u in n)d=((c=!h&&y&&void 0!==y[u])?y:n)[u],f=g&&c?s(d,i):_&&"function"==typeof d?s(Function.call,d):d,y&&a(y,u,d,e&l.U),m[u]!=d&&o(m,u,f),_&&E[u]!=d&&(E[u]=d)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},2416:function(e,t,n){(function(e){var i;!function(r){function o(e,t){var n,i;this.originalEvent=e,i=function(e,t){"preventDefault"===e?this[e]=function(){return this.defaultPrevented=!0,t[e]()}:"stopImmediatePropagation"===e?this[e]=function(){return this.immediatePropagationStopped=!0,t[e]()}:g(t[e])?this[e]=function(){return t[e]()}:this[e]=t[e]};for(n in e)(e[n]||"function"==typeof e[n])&&i.call(this,n,e);m.extend(this,t,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var a,s=r.$,l=r.jBone,u=/^<(\w+)\s*\/?>$/,c=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=[].slice,f=[].splice,h=Object.keys,p=r.document,v=function(e){return"string"==typeof e},_=function(e){return e instanceof Object},g=function(e){return"[object Function]"==={}.toString.call(e)},y=function(e){return Array.isArray(e)},m=function(e,t){return new a.init(e,t)};m.noConflict=function(){return r.$=s,r.jBone=l,m},(a=m.fn=m.prototype={init:function(e,t){var n,i,r,o;if(!e)return this;if(v(e)){if(i=u.exec(e))return this[0]=p.createElement(i[1]),this.length=1,_(t)&&this.attr(t),this;if((i=c.exec(e))&&i[1]){for(o=p.createDocumentFragment(),(r=p.createElement("div")).innerHTML=e;r.lastChild;)o.appendChild(r.firstChild);return n=d.call(o.childNodes),m.merge(this,n)}if(m.isElement(t))return m(t).find(e);try{return n=p.querySelectorAll(e),m.merge(this,n)}catch(e){return this}}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?e():e instanceof m?e:m.makeArray(e,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0}).constructor=m,a.init.prototype=a,m.setId=function(e){var t=e.jid;e===r?t="window":void 0===e.jid&&(e.jid=t=++m._cache.jid),m._cache.events[t]||(m._cache.events[t]={})},m.getData=function(e){var t=(e=e instanceof m?e[0]:e)===r?"window":e.jid;return{jid:t,events:m._cache.events[t]}},m.isElement=function(e){return e&&e instanceof m||e instanceof HTMLElement||v(e)},m._cache={events:{},jid:0},a.pushStack=function(e){return m.merge(this.constructor(),e)},m.merge=function(e,t){for(var n=t.length,i=e.length,r=0;r<n;)e[i++]=t[r++];return e.length=i,e},m.contains=function(e,t){return e.contains(t)},m.extend=function(e){var t;return f.call(arguments,1).forEach(function(n){if(t=e,n)for(var i in n)t[i]=n[i]}),e},m.makeArray=function(e,t){var n=t||[];return null!==e&&(!function(e){var t=e.length,n=typeof e;return!g(n)&&e!==r&&(!(1!==e.nodeType||!t)||y(n)||0===t||"number"==typeof t&&t>0&&t-1 in e)}(e)?n.push(e):m.merge(n,v(e)?[e]:e)),n},m.unique=function(e){if(null==e)return[];for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.indexOf(r)<0&&t.push(r)}return t},m.Event=function(e,t){var n,i;return e.type&&!t&&(t=e,e=e.type),n=e.split(".").splice(1).join("."),i=e.split(".")[0],(e=p.createEvent("Event")).initEvent(i,!0,!0),m.extend(e,{namespace:n,isDefaultPrevented:function(){return e.defaultPrevented}},t)},m.event={add:function(e,t,n,i,r){m.setId(e);var o,a,s,l=function(t){m.event.dispatch.call(e,t)},u=m.getData(e).events;for(a=(t=t.split(" ")).length;a--;)u[o=(s=t[a]).split(".")[0]]=u[o]||[],u[o].length?l=u[o][0].fn:e.addEventListener&&e.addEventListener(o,l,!1),u[o].push({namespace:s.split(".").splice(1).join("."),fn:l,selector:r,data:i,originfn:n})},remove:function(e,t,n,i){var r,o,a=function(e,t,i,r,o){var a;(n&&o.originfn===n||!n)&&(a=o.fn),e[t][i].fn===a&&(e[t].splice(i,1),e[t].length||r.removeEventListener(t,a))},s=m.getData(e).events;if(s)return!t&&s?h(s).forEach(function(t){for(o=s[t],r=o.length;r--;)a(s,t,r,e,o[r])}):void t.split(" ").forEach(function(t){var n,l=t.split(".")[0],u=t.split(".").splice(1).join(".");if(s[l])for(o=s[l],r=o.length;r--;)n=o[r],(!u||u&&n.namespace===u)&&(!i||i&&n.selector===i)&&a(s,l,r,e,n);else u&&h(s).forEach(function(t){for(o=s[t],r=o.length;r--;)(n=o[r]).namespace.split(".")[0]===u.split(".")[0]&&a(s,t,r,e,n)})})},trigger:function(e,t){(v(t)?t.split(" ").map(function(e){return m.Event(e)}):[t=t instanceof Event?t:m.Event(t)]).forEach(function(t){t.type&&e.dispatchEvent&&e.dispatchEvent(t)})},dispatch:function(e){for(var t,n,i,r,a,s=0,l=0,u=this,c=m.getData(u).events[e.type],d=c.length,f=[],h=[];s<d;s++)f.push(c[s]);for(s=0,d=f.length;s<d&&~c.indexOf(f[s])&&(!r||!r.isImmediatePropagationStopped());s++)if(n=null,a={},(i=f[s]).data&&(a.data=i.data),i.selector){if(~(h=m(u).find(i.selector)).indexOf(e.target)&&(n=e.target)||u!==e.target&&u.contains(e.target)){if(!n)for(t=h.length,l=0;l<t;l++)h[l]&&h[l].contains(e.target)&&(n=h[l]);if(!n)continue;a.currentTarget=n,r=new o(e,a),e.namespace&&e.namespace!==i.namespace||i.originfn.call(n,r)}}else r=new o(e,a),e.namespace&&e.namespace!==i.namespace||i.originfn.call(u,r)}},a.on=function(e,t,n,i){var r=this.length,o=0;if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!i)return this;for(;o<r;o++)m.event.add(this[o],e,i,n,t);return this},a.one=function(e){var t,n=arguments,i=0,r=this.length,o=d.call(n,1,n.length-1),a=d.call(n,-1)[0];for(t=function(t){var n=m(t);e.split(" ").forEach(function(e){var i=function(r){n.off(e,i),a.call(t,r)};n.on.apply(n,[e].concat(o,i))})};i<r;i++)t(this[i]);return this},a.trigger=function(e){var t=0,n=this.length;if(!e)return this;for(;t<n;t++)m.event.trigger(this[t],e);return this},a.off=function(e,t,n){var i=0,r=this.length;for(g(t)&&(n=t,t=void 0);i<r;i++)m.event.remove(this[i],e,n,t);return this},a.find=function(e){for(var t=[],n=0,i=this.length;n<i;n++)!function(n){g(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(e),function(e){t.push(e)})}(this[n]);return m(t)},a.get=function(e){return null!=e?e<0?this[e+this.length]:this[e]:d.call(this)},a.eq=function(e){return m(this[e])},a.parent=function(){for(var e,t=[],n=0,i=this.length;n<i;n++)!~t.indexOf(e=this[n].parentElement)&&e&&t.push(e);return m(t)},a.toArray=function(){return d.call(this)},a.is=function(){var e=arguments;return this.some(function(t){return t.tagName.toLowerCase()===e[0]})},a.has=function(){var e=arguments;return this.some(function(t){return t.querySelectorAll(e[0]).length})},a.add=function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},a.attr=function(e,t){var n,i=arguments,r=0,o=this.length;if(v(e)&&1===i.length)return this[0]&&this[0].getAttribute(e);for(2===i.length?n=function(n){n.setAttribute(e,t)}:_(e)&&(n=function(t){h(e).forEach(function(n){t.setAttribute(n,e[n])})});r<o;r++)n(this[r]);return this},a.removeAttr=function(e){for(var t=0,n=this.length;t<n;t++)this[t].removeAttribute(e);return this},a.val=function(e){var t=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;t<n;t++)this[t].value=e;return this},a.css=function(e,t){var n,i=arguments,o=0,a=this.length;if(v(e)&&1===i.length)return this[0]&&r.getComputedStyle(this[0])[e];for(2===i.length?n=function(n){n.style[e]=t}:_(e)&&(n=function(t){h(e).forEach(function(n){t.style[n]=e[n]})});o<a;o++)n(this[o]);return this},a.data=function(e,t){var n,i=arguments,r={},o=0,a=this.length,s=function(e,t,n){_(n)?(e.jdata=e.jdata||{},e.jdata[t]=n):e.dataset[t]=n},l=function(e){return"true"===e||"false"!==e&&e};if(0===i.length)return this[0].jdata&&(r=this[0].jdata),h(this[0].dataset).forEach(function(e){r[e]=l(this[0].dataset[e])},this),r;if(1===i.length&&v(e))return this[0]&&l(this[0].dataset[e]||this[0].jdata&&this[0].jdata[e]);for(1===i.length&&_(e)?n=function(t){h(e).forEach(function(n){s(t,n,e[n])})}:2===i.length&&(n=function(n){s(n,e,t)});o<a;o++)n(this[o]);return this},a.removeData=function(e){for(var t,n,i=0,r=this.length;i<r;i++)if(t=this[i].jdata,n=this[i].dataset,e)t&&t[e]&&delete t[e],delete n[e];else{for(e in t)delete t[e];for(e in n)delete n[e]}return this},a.addClass=function(e){for(var t=0,n=0,i=this.length,r=e?e.trim().split(/\s+/):[];t<i;t++)for(n=0,n=0;n<r.length;n++)this[t].classList.add(r[n]);return this},a.removeClass=function(e){for(var t=0,n=0,i=this.length,r=e?e.trim().split(/\s+/):[];t<i;t++)for(n=0,n=0;n<r.length;n++)this[t].classList.remove(r[n]);return this},a.toggleClass=function(e,t){var n=0,i=this.length,r="toggle";if(!0===t&&(r="add")||!1===t&&(r="remove"),e)for(;n<i;n++)this[n].classList[r](e);return this},a.hasClass=function(e){var t=0,n=this.length;if(e)for(;t<n;t++)if(this[t].classList.contains(e))return!0;return!1},a.html=function(e){var t,n=arguments;return 1===n.length&&void 0!==e?this.empty().append(e):0===n.length&&(t=this[0])?t.innerHTML:this},a.append=function(e){var t,n=0,i=this.length;for(v(e)&&c.exec(e)?e=m(e):_(e)||(e=document.createTextNode(e)),e=e instanceof m?e:m(e),t=function(t,n){e.forEach(function(e){n?t.appendChild(e.cloneNode(!0)):t.appendChild(e)})};n<i;n++)t(this[n],n);return this},a.appendTo=function(e){return m(e).append(this),this},a.empty=function(){for(var e,t=0,n=this.length;t<n;t++)for(e=this[t];e.lastChild;)e.removeChild(e.lastChild);return this},a.remove=function(){var e,t=0,n=this.length;for(this.off();t<n;t++)delete(e=this[t]).jdata,e.parentNode&&e.parentNode.removeChild(e);return this},"object"==typeof e&&e&&"object"==typeof e.exports?e.exports=m:(void 0!==(i=function(){return m}.call(t,n,t,e))&&(e.exports=i),r.jBone=r.$=m)}("undefined"!=typeof window?window:this)}).call(t,n(94)(e))},2417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"styleNames",get:function(){return this.constructor._styles||{}}}],[{key:"extendStyleNames",value:function(e){var t=this;this._styles||(this._styles={}),Object.keys(e).forEach(function(n){t._styles[n]?t._styles[n]=(0,r.default)(t._styles[n],e[n]):t._styles[n]=e[n]})}},{key:"resetStyles",value:function(){this._styles={}}}]),e}();t.default=o},2418:function(e,t,n){e.exports=!n(2436)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},2419:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},2420:function(e,t,n){var i=n(2444),r=n(2539),o=n(2451),a=Object.defineProperty;t.f=n(2418)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},2422:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},2423:function(e,t,n){var i=n(2544),r=n(2545);e.exports=function(e){return i(r(e))}},2424:function(e,t,n){var i=n(2415),r=n(2442),o=n(2436);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},2426:function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},2428:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},2429:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},2430:function(e,t,n){var i=n(2496)("wks"),r=n(2453),o=n(2422).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},2431:function(e,t,n){var i=n(2545);e.exports=function(e){return Object(i(e))}},2432:function(e,t,n){var i=n(2428),r=n(2426),o=n(2524),a=n(2438),s=function(e,t,n){var l,u,c,d=e&s.F,f=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,_=e&s.W,g=f?r:r[t]||(r[t]={}),y=g.prototype,m=f?i:h?i[t]:(i[t]||{}).prototype;f&&(n=t);for(l in n)(u=!d&&m&&void 0!==m[l])&&l in g||(c=u?m[l]:n[l],g[l]=f&&"function"!=typeof m[l]?n[l]:v&&u?o(c,i):_&&m[l]==c?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((g.virtual||(g.virtual={}))[l]=c,e&s.R&&y&&!y[l]&&a(y,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},2433:function(e,t,n){var i=n(2449),r=n(2525),o=n(2479),a=Object.defineProperty;t.f=n(2434)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},2434:function(e,t,n){e.exports=!n(2439)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},2435:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},2436:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},2437:function(e,t,n){var i=n(2454),r=n(2452),o=n(2423),a=n(2451),s=n(2429),l=n(2539),u=Object.getOwnPropertyDescriptor;t.f=n(2418)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},2438:function(e,t,n){var i=n(2433),r=n(2459);e.exports=n(2434)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},2439:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},2440:function(e,t,n){var i=n(2528),r=n(2480);e.exports=function(e){return i(r(e))}},2441:function(e,t,n){var i=n(2483)("wks"),r=n(2461),o=n(2428).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},2442:function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},2443:function(e,t,n){var i=n(2420),r=n(2452);e.exports=n(2418)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},2444:function(e,t,n){var i=n(2419);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},2445:function(e,t,n){var i=n(2543),r=n(2500);e.exports=Object.keys||function(e){return i(e,r)}},2446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(t.KEYCODES={SPACE_BAR:32,ENTER:13,TAB:9,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,DEBUG_KEY:68},function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this._bindCallbacks(),this._bindEvents()}return i(e,[{key:"_bindCallbacks",value:function(){this._processKeyboardInput=this._processKeyboardInput.bind(this)}},{key:"_bindEvents",value:function(){this.config.node.addEventListener("keydown",this._processKeyboardInput,!1)}},{key:"_unbindEvents",value:function(){this.config.node.removeEventListener("keydown",this._processKeyboardInput,!1)}},{key:"_processKeyboardInput",value:function(e){this.config.callbacks[e.keyCode]&&this.config.callbacks[e.keyCode](e)}},{key:"destroy",value:function(){this._unbindEvents(),delete this.config}}]),e}());t.default=r},2449:function(e,t,n){var i=n(2450);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},2450:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},2451:function(e,t,n){var i=n(2419);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},2452:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2453:function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},2454:function(e,t){t.f={}.propertyIsEnumerable},2459:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2460:function(e,t,n){var i=n(2527),r=n(2484);e.exports=Object.keys||function(e){return i(e,r)}},2461:function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},2462:function(e,t){t.f={}.propertyIsEnumerable},2463:function(e,t,n){var i=n(2422),r=n(2443),o=n(2429),a=n(2453)("src"),s=Function.toString,l=(""+s).split("toString");n(2442).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||r(n,a,e[t]?""+e[t]:l.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},2464:function(e,t,n){var i=n(2453)("meta"),r=n(2419),o=n(2429),a=n(2420).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(2436)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!o(e,i)&&c(e),e}}},2465:function(e,t){e.exports=!1},2466:function(e,t){t.f=Object.getOwnPropertySymbols},2467:function(e,t,n){var i=n(2444),r=n(2547),o=n(2500),a=n(2499)("IE_PROTO"),s=function(){},l=function(){var e,t=n(2540)("iframe"),i=o.length;for(t.style.display="none",n(2759).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},2468:function(e,t,n){var i=n(2429),r=n(2431),o=n(2499)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},2469:function(e,t,n){"use strict";e.exports=n(2465)||!n(2436)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(2422)[e]})},2479:function(e,t,n){var i=n(2450);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},2480:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},2481:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},2482:function(e,t,n){var i=n(2483)("keys"),r=n(2461);e.exports=function(e){return i[e]||(i[e]=r(e))}},2483:function(e,t,n){var i=n(2428),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},2484:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},2485:function(e,t){t.f=Object.getOwnPropertySymbols},2486:function(e,t,n){var i=n(2480);e.exports=function(e){return Object(i(e))}},2487:function(e,t){e.exports=!0},2488:function(e,t){e.exports={}},2489:function(e,t,n){var i=n(2449),r=n(2721),o=n(2484),a=n(2482)("IE_PROTO"),s=function(){},l=function(){var e,t=n(2526)("iframe"),i=o.length;for(t.style.display="none",n(2722).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},2490:function(e,t,n){var i=n(2433).f,r=n(2435),o=n(2441)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},2491:function(e,t,n){t.f=n(2441)},2492:function(e,t,n){var i=n(2428),r=n(2426),o=n(2487),a=n(2491),s=n(2433).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},2493:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=i(n(2747)),a=i(n(2494)),s=i(n(2537));n(2751),n(2792),t.default=r({createContainer:o.default,Lifetime:a.default},s.default)},2494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={SINGLETON:"SINGLETON",TRANSIENT:"TRANSIENT",SCOPED:"SCOPED"}},2495:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},2496:function(e,t,n){var i=n(2422),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},2497:function(e,t,n){var i=n(2420).f,r=n(2429),o=n(2430)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},2498:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},2499:function(e,t,n){var i=n(2496)("keys"),r=n(2453);e.exports=function(e){return i[e]||(i[e]=r(e))}},2500:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},2501:function(e,t,n){var i=n(2543),r=n(2500).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},2502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return window.navigator||{}};t.isIPhone=function(){return/iPhone/.test(i().userAgent)&&!window.MSStream},t.isIPod=function(){return/iPod/.test(i().userAgent)&&!window.MSStream},t.isIPad=function(){return/iPad/.test(i().userAgent)&&!window.MSStream},t.isAndroid=function(){return/(android)/i.test(i().userAgent)}},2503:function(e,t,n){"use strict";function i(e,t){var n=0;if(!e||!e.length)return null;for(;n<e.length-1&&!(e.start(n)<=t&&t<=e.end(n));)n+=1;return{start:e.start(n),end:e.end(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOverallBufferedPercent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e&&e.length&&n?(i(e,t).end/n*100).toFixed(1):0},t.getOverallPlayedPercent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?(e/t*100).toFixed(1):0},t.geOverallBufferLength=function(e){var t=0;if(!e||!e.length)return t;for(var n=0;n<e.length;n+=1)t+=e.end(n)-e.start(n);return t},t.getNearestBufferSegmentInfo=i},2504:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AMOUNT_TO_CHANGE_VOLUME=t.AMOUNT_TO_SKIP_SECONDS=void 0;var o,a,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=i(n(59)),c=n(194),d=n(2446),f=i(d),h=t.AMOUNT_TO_SKIP_SECONDS=5,p=t.AMOUNT_TO_CHANGE_VOLUME=10,v={disabled:!1},_=(a=o=function(){function e(t){var n=t.config,i=t.eventEmitter,r=t.rootContainer,o=t.engine,a=t.debugPanel;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=i,this._engine=o,this._debugPanel=a,this._rootNode=r.node,this.config=s({},v,(0,u.default)(n,"ui.keyboardInterceptor")),this.initInterceptor()}return l(e,[{key:"initInterceptor",value:function(){var e=this;if(!this.config.disabled){var t;this._keyboardInterceptor=new f.default({node:this._rootNode,callbacks:(t={},r(t,d.KEYCODES.DEBUG_KEY,function(t){t.ctrlKey&&t.shiftKey&&e._debugPanel.show()}),r(t,d.KEYCODES.TAB,function(){e._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED)}),r(t,d.KEYCODES.SPACE_BAR,function(t){t.preventDefault(),e._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),e._eventEmitter.emit(c.UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED),e._engine.togglePlayback()}),r(t,d.KEYCODES.LEFT_ARROW,function(t){t.preventDefault(),e._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),e._eventEmitter.emit(c.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED),e._engine.goBackward(h)}),r(t,d.KEYCODES.RIGHT_ARROW,function(t){t.preventDefault(),e._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),e._eventEmitter.emit(c.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED),e._engine.goForward(h)}),r(t,d.KEYCODES.UP_ARROW,function(t){t.preventDefault(),e._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),e._eventEmitter.emit(c.UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED),e._engine.increaseVolume(p)}),r(t,d.KEYCODES.DOWN_ARROW,function(t){t.preventDefault(),e._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),e._eventEmitter.emit(c.UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED),e._engine.decreaseVolume(p)}),t)})}}},{key:"destroyInterceptor",value:function(){this._keyboardInterceptor&&this._keyboardInterceptor.destroy()}},{key:"destroy",value:function(){this.destroyInterceptor(),delete this.config,delete this._rootNode,delete this._eventEmitter,delete this._engine,delete this._debugPanel}}]),e}(),o.dependencies=["engine","eventEmitter","rootContainer","config","debugPanel"],a);t.default=_},2524:function(e,t,n){var i=n(2701);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},2525:function(e,t,n){e.exports=!n(2434)&&!n(2439)(function(){return 7!=Object.defineProperty(n(2526)("div"),"a",{get:function(){return 7}}).a})},2526:function(e,t,n){var i=n(2450),r=n(2428).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},2527:function(e,t,n){var i=n(2435),r=n(2440),o=n(2703)(!1),a=n(2482)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},2528:function(e,t,n){var i=n(2529);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},2529:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},2530:function(e,t,n){var i=n(2435),r=n(2486),o=n(2482)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},2531:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(2716)),o=i(n(2727)),a="function"==typeof o.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};t.default="function"==typeof o.default&&"symbol"===a(r.default)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":a(e)}},2532:function(e,t,n){"use strict";var i=n(2487),r=n(2432),o=n(2533),a=n(2438),s=n(2435),l=n(2488),u=n(2720),c=n(2490),d=n(2530),f=n(2441)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,_,g,y){u(n,t,v);var m,E,b,S=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",k="values"==_,w=!1,O=e.prototype,A=O[f]||O["@@iterator"]||_&&O[_],I=A||S(_),R=_?k?S("entries"):I:void 0,D="Array"==t?O.entries||A:A;if(D&&(b=d(D.call(new e)))!==Object.prototype&&b.next&&(c(b,T,!0),i||s(b,f)||a(b,f,p)),k&&A&&"values"!==A.name&&(w=!0,I=function(){return A.call(this)}),i&&!y||!h&&!w&&O[f]||a(O,f,I),l[t]=I,l[T]=p,_)if(m={values:k?I:S("values"),keys:g?I:S("keys"),entries:R},y)for(E in m)E in O||o(O,E,m[E]);else r(r.P+r.F*(h||w),t,m);return m}},2533:function(e,t,n){e.exports=n(2438)},2534:function(e,t,n){var i=n(2527),r=n(2484).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},2535:function(e,t,n){var i=n(2462),r=n(2459),o=n(2440),a=n(2479),s=n(2435),l=n(2525),u=Object.getOwnPropertyDescriptor;t.f=n(2434)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},2536:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerModule=t.create=t.playerAPIDecorator=t.MEDIA_STREAM_DELIVERY_TYPE=t.MEDIA_STREAM_TYPES=t.ENGINE_STATES=t.TEXT_LABELS=t.VIDEO_EVENTS=t.UI_EVENTS=t.DefaultModules=t.DefaultControls=t.DefaultUIComponents=void 0;var r=n(2746),o=i(r),a=i(n(914)),s=n(194),l=i(n(2873)),u=i(n(2559)),c=i(n(2560)),d=i(n(2558)),f=i(n(2561)),h=i(n(2555)),p=i(n(2557)),v=i(n(2556)),_=i(n(2554)),g={Screen:d.default,Overlay:u.default,ControlBlock:f.default,Loader:c.default},y={AnomalyBloodhound:h.default,RootContainer:p.default,FullScreenManager:v.default,PlayerFacade:_.default};t.DefaultUIComponents=g,t.DefaultControls=l.default,t.DefaultModules=y,t.UI_EVENTS=s.UI_EVENTS,t.VIDEO_EVENTS=s.VIDEO_EVENTS,t.TEXT_LABELS=s.TEXT_LABELS,t.ENGINE_STATES=s.STATES,t.MEDIA_STREAM_TYPES=s.MEDIA_STREAM_TYPES,t.MEDIA_STREAM_DELIVERY_TYPE=s.MEDIA_STREAM_DELIVERY_TYPE,t.playerAPIDecorator=a.default,t.create=o.default,t.registerModule=r.registerModule,t.default={DefaultUIComponents:g,DefaultControls:l.default,DefaultModules:y,UI_EVENTS:s.UI_EVENTS,VIDEO_EVENTS:s.VIDEO_EVENTS,ENGINE_STATES:s.STATES,TEXT_LABELS:s.TEXT_LABELS,MEDIA_STREAM_TYPES:s.MEDIA_STREAM_TYPES,MEDIA_STREAM_DELIVERY_TYPE:s.MEDIA_STREAM_DELIVERY_TYPE,playerAPIDecorator:a.default,create:o.default,registerModule:r.registerModule}},2537:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){t||(t=e);var n=t[c]||[];return function(t){if(n.length>0){var i=n.reduce(function(e,n){return e[n]=t.resolve(n),e},{});return e(i,t)}return e(t)}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.asClass=t.asFunction=t.asValue=t.makeFluidInterface=t.PROPERTY_FOR_DEPENDENCIES=void 0;var a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},s=i(n(2494)),l=i(n(31)),u=i(n(2748)),c=t.PROPERTY_FOR_DEPENDENCIES="dependencies",d=function(e,t){return Object.assign({},e,t)},f=t.makeFluidInterface=function(e){var t=function(t){return e.lifetime=t,e};return{setLifetime:t,transient:function(){return t(s.default.TRANSIENT)},scoped:function(){return t(s.default.SCOPED)},singleton:function(){return t(s.default.SINGLETON)}}},h=t.asValue=function(e){return{resolve:function(){return e},lifetime:s.default.TRANSIENT}},p=t.asFunction=function(e,t){if(!(0,l.default)(e))throw new u.default("asFunction","function",void 0===e?"undefined":a(e));var n={lifetime:s.default.TRANSIENT};t=d(n,t);var i=r(e),o={resolve:i,lifetime:t.lifetime};return o.resolve=i.bind(o),Object.assign(o,f(o)),o},v=t.asClass=function(e,t){if(!(0,l.default)(e))throw new u.default("asClass","class",void 0===e?"undefined":a(e));var n={lifetime:s.default.TRANSIENT};t=d(n,t);var i=r(function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return new(Function.prototype.bind.apply(e,[null].concat(n)))},e),o={resolve:i,lifetime:t.lifetime};return o.resolve=i.bind(o),Object.assign(o,f(o)),o};t.default={asValue:h,asFunction:p,asClass:v}},2538:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(n,"message",{enumerable:!1,value:e}),Object.defineProperty(n,"name",{enumerable:!1,value:n.constructor.name}),Error.captureStackTrace(n,n.constructor),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.default=r},2539:function(e,t,n){e.exports=!n(2418)&&!n(2436)(function(){return 7!=Object.defineProperty(n(2540)("div"),"a",{get:function(){return 7}}).a})},2540:function(e,t,n){var i=n(2419),r=n(2422).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},2541:function(e,t,n){var i=n(2495);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},2542:function(e,t,n){t.f=n(2430)},2543:function(e,t,n){var i=n(2429),r=n(2423),o=n(2755)(!1),a=n(2499)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},2544:function(e,t,n){var i=n(2498);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},2545:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},2546:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},2547:function(e,t,n){var i=n(2420),r=n(2444),o=n(2445);e.exports=n(2418)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},2548:function(e,t,n){var i=n(2423),r=n(2501).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},2549:function(e,t,n){var i=n(2498),r=n(2430)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},2550:function(e,t,n){var i=n(2501),r=n(2466),o=n(2444),a=n(2422).Reflect;e.exports=a&&a.ownKeys||function(e){var t=i.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},2551:function(e,t,n){var i=n(2445),r=n(2423),o=n(2454).f;e.exports=function(e){return function(t){for(var n,a=r(t),s=i(a),l=s.length,u=0,c=[];l>u;)o.call(a,n=s[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},2552:function(e,t,n){var i=n(2420),r=n(2437),o=n(2550),a=n(2423);e.exports=function(e,t){for(var n,s=o(a(t)),l=s.length,u=0;l>u;)i.f(e,n=s[u++],r.f(t,n));return e}},2553:function(e,t){e.exports={}},2554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2798)),o=n(914),a=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.registerValue({config:(0,r.default)(t)}),this._config=n.resolve("config"),this._resolveDefaultModules(n,i),this._resolveAdditionalModules(n,o)}return i(e,[{key:"_resolveDefaultModules",value:function(e,t){var n=this;this._defaultModules=Object.keys(t).reduce(function(t,i){var r=e.resolve(i);return n._addPlayerAPIFromModule(r,i),t[i]=r,t},{})}},{key:"_resolveAdditionalModules",value:function(e,t){var n=this;this._additionalModules=Object.keys(t).reduce(function(t,i){var r=e.resolve(i);return n._addPlayerAPIFromModule(r,i),t[i]=r,t},{})}},{key:"_getWrappedCallToModuleFunction",value:function(e,t,n){var i=this;return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];if(i._destroyed)throw new Error("Player instance is destroyed");return n.apply(e,r)}}},{key:"_getPlayerAPIMethodDescriptor",value:function(e,t,n){var i={enumerable:!0,configurable:!0},r=n.get,o=n.set,a=n.value;return r&&(i.get=this._getWrappedCallToModuleFunction(e,t,r)),o&&(i.set=this._getWrappedCallToModuleFunction(e,t,o)),a&&(i.value=this._getWrappedCallToModuleFunction(e,t,a)),i}},{key:"_addPlayerAPIFromModule",value:function(e,t){var n=this;e[o.PLAYER_API_PROPERTY]&&Object.keys(e[o.PLAYER_API_PROPERTY]).forEach(function(i){if(n[i])throw new Error("API method "+i+" is already defined in Player facade");Object.defineProperty(n,i,n._getPlayerAPIMethodDescriptor(e,t,e[o.PLAYER_API_PROPERTY][i]))})}},{key:"_clearPlayerAPIForModule",value:function(e){var t=this;e[o.PLAYER_API_PROPERTY]&&Object.keys(e[o.PLAYER_API_PROPERTY]).forEach(function(e){delete t[e]})}},{key:"destroy",value:function(){var e=this;Object.keys(this._defaultModules).forEach(function(t){var n=e._defaultModules[t];e._clearPlayerAPIForModule(n),n.destroy()}),Object.keys(this._additionalModules).forEach(function(t){var n=e._additionalModules[t];e._clearPlayerAPIForModule(n),n.destroy&&n.destroy()}),delete this._defaultModules,delete this._additionalModules,delete this._config,this._destroyed=!0}}]),e}();t.default=a},2555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DELAYED_REPORT_TYPES=t.REPORT_REASONS=void 0;var i,r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(n(59)),l=n(194),u=t.REPORT_REASONS={LONG_INITIAL_VIDEO_PARTS_LOADING:"long-initial-video-parts-loading",LONG_METADATA_LOADING:"long-metadata-loading",LONG_SEEK_PROCESSING:"long-seek-processing",BUFFER_EMPTY_FOR_CURRENT_SEGMENT:"buffer-empty-for-current-segment",LONG_PLAY_REQUESTED_PROCESSING:"long-play-requested-processing"},c=t.DELAYED_REPORT_TYPES={INITIAL_VIDEO_PARTS_LOADING:{id:"_initialVideoPartsLoading",timeoutTime:5e3},METADATA_LOADING:{id:"_metadataLoading",timeoutTime:5e3},RUNTIME_LOADING:{id:"_runtimeLoading",timeoutTime:5e3}},d=(r=i=function(){function e(t){var n=t.engine,i=t.eventEmitter,r=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=o({},(0,s.default)(r,"anomalyBloodhound")),this._engine=n,this._eventEmitter=i,this._timeoutContainer=Object.create(null),this._bindEvents()}return a(e,[{key:"_bindEvents",value:function(){this._eventEmitter.on(l.VIDEO_EVENTS.STATE_CHANGED,this._processStateChange,this)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(l.VIDEO_EVENTS.STATE_CHANGED,this._processStateChange,this)}},{key:"_processStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevState;switch(e.nextState){case l.STATES.LOAD_STARTED:(this._engine.isAutoPlayAvailable||this._engine.isPreloadAvailable)&&this.startDelayedReport(c.METADATA_LOADING,u.LONG_METADATA_LOADING);break;case l.STATES.METADATA_LOADED:this.isDelayedReportExist(c.METADATA_LOADING)&&(this.stopDelayedReport(c.METADATA_LOADING),"metadata"!==this._engine.getPreload()&&this.startDelayedReport(c.INITIAL_VIDEO_PARTS_LOADING,u.LONG_INITIAL_VIDEO_PARTS_LOADING));break;case l.STATES.READY_TO_PLAY:this.isDelayedReportExist(c.INITIAL_VIDEO_PARTS_LOADING)&&this.stopDelayedReport(c.INITIAL_VIDEO_PARTS_LOADING),this.isDelayedReportExist(c.RUNTIME_LOADING)&&this.stopDelayedReport(c.RUNTIME_LOADING);break;case l.STATES.SEEK_IN_PROGRESS:t===l.STATES.PAUSED&&this.startDelayedReport(c.RUNTIME_LOADING,u.LONG_SEEK_PROCESSING);break;case l.STATES.WAITING:switch(t){case l.STATES.PLAYING:this.reportDebugInfo({reason:u.BUFFER_EMPTY_FOR_CURRENT_SEGMENT});break;case l.STATES.PLAY_REQUESTED:this.isDelayedReportExist(c.RUNTIME_LOADING)||this.startDelayedReport(c.RUNTIME_LOADING,u.LONG_PLAY_REQUESTED_PROCESSING)}break;case l.STATES.PLAYING:this.isDelayedReportExist(c.RUNTIME_LOADING)&&this.stopDelayedReport(c.RUNTIME_LOADING)}}},{key:"isDelayedReportExist",value:function(e){return Boolean(this._timeoutContainer[e.id])}},{key:"startDelayedReport",value:function(e,t){var n=this;this.isDelayedReportExist(e)&&this.stopDelayedReport(e);var i=Date.now();this._timeoutContainer[e.id]=setTimeout(function(){var r=Date.now();n._timeoutContainer[e.id]=null,n.reportDebugInfo({reason:t,startTS:i,endTS:r})},e.timeoutTime)}},{key:"stopDelayedReport",value:function(e){clearTimeout(this._timeoutContainer[e.id]),this._timeoutContainer[e.id]=null}},{key:"stopAllDelayedReports",value:function(){var e=this;Object.keys(this._timeoutContainer).forEach(function(t){clearTimeout(e._timeoutContainer[t]),e._timeoutContainer[t]=null})}},{key:"reportDebugInfo",value:function(e){var t=e.reason,n=e.startTS,i=e.endTS;"function"==typeof this._config.callback&&this._config.callback(o({reason:t,startTS:n,endTS:i},this._engine.getDebugInfo()))}},{key:"destroy",value:function(){this.stopAllDelayedReports(),this._unbindEvents(),delete this._eventEmitter,delete this._engine,delete this._timeoutContainer,delete this._config}}]),e}(),i.dependencies=["eventEmitter","engine","config"],r);t.default=d},2556:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s,l,u,c,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(2502),p=i(n(914)),v=i(n(2810)),_=i(n(2811)),g=n(194),y={exitOnEnd:!0,exitOnPause:!1,enterOnPlay:!1,pauseOnExit:!1,disabled:!1},m=(o=(0,p.default)(),a=(0,p.default)(),s=(0,p.default)(),c=u=function(){function e(t){var n=t.eventEmitter,i=t.engine,r=t.rootContainer,o=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._engine=i,this._config=d({},y,o.fullScreenManager),this._onChange=this._onChange.bind(this),(0,h.isIPhone)()||(0,h.isIPod)()||(0,h.isIPad)()?this._helper=new _.default(this._engine.getNode(),this._onChange):this._helper=new v.default(r.node,this._onChange),this._bindEvents()}return f(e,[{key:"_onChange",value:function(){!this._helper.isInFullScreen&&this._config.pauseOnExit&&this._engine.pause(),this._eventEmitter.emit(g.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this._helper.isInFullScreen)}},{key:"_bindEvents",value:function(){this._eventEmitter.on(g.VIDEO_EVENTS.STATE_CHANGED,this._processNextStateFromEngine,this),this._eventEmitter.on(g.VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED,this._enterOnPlayRequested,this)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(g.VIDEO_EVENTS.STATE_CHANGED,this._processNextStateFromEngine,this),this._eventEmitter.off(g.VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED,this._enterOnPlayRequested,this)}},{key:"_exitOnEnd",value:function(){this._config.exitOnEnd&&this.isInFullScreen&&this.exitFullScreen()}},{key:"_enterOnPlayRequested",value:function(){this._config.enterOnPlay&&!this.isInFullScreen&&this.enterFullScreen()}},{key:"_exitOnPauseRequested",value:function(){this._config.exitOnPause&&this.isInFullScreen&&this.exitFullScreen()}},{key:"_processNextStateFromEngine",value:function(e){switch(e.nextState){case g.STATES.ENDED:this._exitOnEnd();break;case g.STATES.PAUSED:this._exitOnPauseRequested()}}},{key:"enterFullScreen",value:function(){this.isEnabled&&this._helper.request()}},{key:"exitFullScreen",value:function(){this.isEnabled&&this._helper.exit()}},{key:"destroy",value:function(){this._unbindEvents(),this._helper.destroy(),delete this._eventEmitter,delete this._engine}},{key:"isInFullScreen",get:function(){return!!this.isEnabled&&this._helper.isInFullScreen}},{key:"isEnabled",get:function(){return this._helper.isEnabled&&!this._config.disabled}}]),e}(),u.dependencies=["eventEmitter","engine","rootContainer","config"],l=c,r(l.prototype,"enterFullScreen",[o],Object.getOwnPropertyDescriptor(l.prototype,"enterFullScreen"),l.prototype),r(l.prototype,"exitFullScreen",[a],Object.getOwnPropertyDescriptor(l.prototype,"exitFullScreen"),l.prototype),r(l.prototype,"isInFullScreen",[s],Object.getOwnPropertyDescriptor(l.prototype,"isInFullScreen"),l.prototype),l);t.default=m},2557:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0;var o,a,s,l,u,c,d,f,h,p,v,_,g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=n(738),E=i(n(2816)),b=i(n(2818)),S=i(n(914)),T=n(194),k=i(n(2819)),w=t.DEFAULT_CONFIG={fillAllSpace:!1,overlay:!1,loadingCover:!1,customUI:{}},O=(o=(0,S.default)(),a=(0,S.default)(),s=(0,S.default)(),l=(0,S.default)(),u=(0,S.default)(),c=(0,S.default)(),d=(0,S.default)(),f=(0,S.default)(),h=(0,S.default)(),_=v=function(){function e(t){var n=t.eventEmitter,i=t.config,r=t.engine;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._engine=r,this.config=g({},w,i.ui),this.isHidden=!1,this._initUI(),this._initCustomUI(),this._bindEvents()}return y(e,[{key:"_bindEvents",value:function(){this._eventEmitter.on(T.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.view.setFullScreenStatus,this.view)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(T.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.view.setFullScreenStatus,this.view)}},{key:"_initUI",value:function(){var e=this.config,t={width:e.width,height:e.height,fillAllSpace:e.fillAllSpace};this.view=new k.default(t)}},{key:"_initCustomUI",value:function(){var e=this;this.customComponents={};Object.keys(this.config.customUI).forEach(function(t){var n=new e.config.customUI[t]({engine:e._engine,eventEmitter:e._eventEmitter,ui:e});e.customComponents[t]=n,e.appendComponentNode(n.getNode())})}},{key:"appendComponentNode",value:function(e){this.view.appendComponentNode(e)}},{key:"_enableFocusInterceptors",value:function(){this._disengageFocusWithin||(this._disengageFocusWithin=(0,b.default)()),this._disengageFocusSource||(E.default.engage(),this._disengageFocusSource=E.default.disengage)}},{key:"_disableFocusInterceptors",value:function(){this._disengageFocusSource&&(this._disengageFocusSource(),delete this._disengageFocusSource),this._disengageFocusWithin&&(this._disengageFocusWithin(),delete this._disengageFocusWithin)}},{key:"attachToElement",value:function(e){this._enableFocusInterceptors(),e.appendChild(this.node),m.ElementQueries.init()}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"setWidth",value:function(e){this.view.setWidth(e),this._eventEmitter.emit(T.UI_EVENTS.PLAYER_WIDTH_CHANGE_TRIGGERED,e)}},{key:"setHeight",value:function(e){this.view.setHeight(e),this._eventEmitter.emit(T.UI_EVENTS.PLAYER_HEIGHT_CHANGE_TRIGGERED,e)}},{key:"getWidth",value:function(){return this.view.getWidth()}},{key:"getHeight",value:function(){return this.view.getHeight()}},{key:"setFillAllSpace",value:function(e){this.view.setFillAllSpaceFlag(e)}},{key:"destroy",value:function(){this._unbindEvents(),this._disableFocusInterceptors(),this.view.destroy(),delete this.view,delete this._engine,delete this._eventEmitter,delete this.config}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),v.dependencies=["eventEmitter","config","engine"],p=_,r(p.prototype,"node",[o],Object.getOwnPropertyDescriptor(p.prototype,"node"),p.prototype),r(p.prototype,"attachToElement",[a],Object.getOwnPropertyDescriptor(p.prototype,"attachToElement"),p.prototype),r(p.prototype,"hide",[s],Object.getOwnPropertyDescriptor(p.prototype,"hide"),p.prototype),r(p.prototype,"show",[l],Object.getOwnPropertyDescriptor(p.prototype,"show"),p.prototype),r(p.prototype,"setWidth",[u],Object.getOwnPropertyDescriptor(p.prototype,"setWidth"),p.prototype),r(p.prototype,"setHeight",[c],Object.getOwnPropertyDescriptor(p.prototype,"setHeight"),p.prototype),r(p.prototype,"getWidth",[d],Object.getOwnPropertyDescriptor(p.prototype,"getWidth"),p.prototype),r(p.prototype,"getHeight",[f],Object.getOwnPropertyDescriptor(p.prototype,"getHeight"),p.prototype),r(p.prototype,"setFillAllSpace",[h],Object.getOwnPropertyDescriptor(p.prototype,"setFillAllSpace"),p.prototype),p);t.default=O},2558:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(n(59)),u=n(194),c=i(n(2826)),d={indicateScreenClick:!0,nativeControls:!1},f=(o=r=function(){function e(t){var n=t.config,i=t.eventEmitter,r=t.engine,o=t.fullScreenManager,s=t.manipulationIndicator,u=t.rootContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=i,this._engine=r,this._fullScreenManager=o,this._manipulationIndicator=s,this._isInFullScreen=!1,this.isHidden=!1,this._delayedToggleVideoPlaybackTimeout=null,this.config=a({},d,(0,l.default)(n,"ui.screen")),this._bindCallbacks(),this._initUI(),this._bindEvents(),this.config.indicateScreenClick&&this.view.appendComponentNode(this._manipulationIndicator.node),u.appendComponentNode(this.node)}return s(e,[{key:"_bindCallbacks",value:function(){this._processNodeClick=this._processNodeClick.bind(this),this._processNodeDblClick=this._processNodeDblClick.bind(this),this._toggleVideoPlayback=this._toggleVideoPlayback.bind(this)}},{key:"_initUI",value:function(){var e={nativeControls:this.config.nativeControls,callbacks:{},playbackViewNode:this._engine.getNode()};this.config.disableClickProcessing||(e.callbacks.onWrapperMouseClick=this._processNodeClick,e.callbacks.onWrapperMouseDblClick=this._processNodeDblClick),this.view=new c.default(e)}},{key:"_bindEvents",value:function(){this._eventEmitter.on(u.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this._setFullScreenStatus,this),this._eventEmitter.on(u.UI_EVENTS.PLAY_OVERLAY_TRIGGERED,this.view.focusOnNode,this.view)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(u.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this._setFullScreenStatus,this),this._eventEmitter.off(u.UI_EVENTS.PLAY_OVERLAY_TRIGGERED,this.view.focusOnNode,this.view)}},{key:"showTopShadow",value:function(){this.view.showTopShadow()}},{key:"hideTopShadow",value:function(){this.view.hideTopShadow()}},{key:"showBottomShadow",value:function(){this.view.showBottomShadow()}},{key:"hideBottomShadow",value:function(){this.view.hideBottomShadow()}},{key:"_setFullScreenStatus",value:function(e){this._isInFullScreen=e}},{key:"_processNodeClick",value:function(){this._showPlaybackChangeIndicator(),!this._fullScreenManager.isEnabled||this._fullScreenManager._config.enterOnPlay?this._toggleVideoPlayback():this._setDelayedPlaybackToggle()}},{key:"_processNodeDblClick",value:function(){!this._fullScreenManager.isEnabled&&this._fullScreenManager._config.enterOnPlay||(this._isDelayedPlaybackToggleExist&&(this._clearDelayedPlaybackToggle(),this._hideDelayedPlaybackChangeIndicator()),this._toggleFullScreen())}},{key:"_showPlaybackChangeIndicator",value:function(){if(this.config.indicateScreenClick){var e=this._engine.getCurrentState();e===u.STATES.PLAY_REQUESTED||e===u.STATES.PLAYING?(this._eventEmitter.emit(u.UI_EVENTS.PAUSE_WITH_SCREEN_CLICK_TRIGGERED),this._manipulationIndicator.showPause()):(this._eventEmitter.emit(u.UI_EVENTS.PLAY_WITH_SCREEN_CLICK_TRIGGERED),this._manipulationIndicator.showPlay())}}},{key:"_hideDelayedPlaybackChangeIndicator",value:function(){this.config.indicateScreenClick&&this._eventEmitter.emit(u.UI_EVENTS.HIDE_MANIPULATION_INDICATOR_TRIGGERED)}},{key:"_setDelayedPlaybackToggle",value:function(){this._clearDelayedPlaybackToggle(),this._delayedToggleVideoPlaybackTimeout=setTimeout(this._toggleVideoPlayback,300)}},{key:"_clearDelayedPlaybackToggle",value:function(){clearTimeout(this._delayedToggleVideoPlaybackTimeout),this._delayedToggleVideoPlaybackTimeout=null}},{key:"_toggleVideoPlayback",value:function(){this._clearDelayedPlaybackToggle();var e=this._engine.getCurrentState();e===u.STATES.PLAY_REQUESTED||e===u.STATES.PLAYING?this._engine.pause():this._engine.play()}},{key:"_toggleFullScreen",value:function(){this._isInFullScreen?this._exitFullScreen():this._enterFullScreen()}},{key:"hide",value:function(){this.isHidden||(this.view.hide(),this.isHidden=!0)}},{key:"show",value:function(){this.isHidden&&(this.view.show(),this.isHidden=!1)}},{key:"_enterFullScreen",value:function(){this._fullScreenManager.enterFullScreen()}},{key:"_exitFullScreen",value:function(){this._fullScreenManager.exitFullScreen()}},{key:"destroy",value:function(){this._unbindEvents(),this._clearDelayedPlaybackToggle(),this.view.destroy(),delete this.view,delete this._manipulationIndicator,delete this._eventEmitter,delete this._engine,delete this._fullScreenManager}},{key:"node",get:function(){return this.view.getNode()}},{key:"_isDelayedPlaybackToggleExist",get:function(){return Boolean(this._delayedToggleVideoPlaybackTimeout)}}]),e}(),r.View=c.default,r.dependencies=["engine","eventEmitter","config","fullScreenManager","manipulationIndicator","rootContainer"],o);t.default=f},2559:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(n(59)),u=n(194),c=i(n(2829)),d={poster:!1},f=(o=r=function(){function e(t){var n=t.config,i=t.eventEmitter,r=t.engine,o=t.rootContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=i,this._engine=r,this.isHidden=!1,this.isContentHidden=!1,this.config=a({},d,(0,l.default)(n,"ui.overlay")),this._bindEvents(),this._initUI(this.config.poster),!1!==(0,l.default)(n,"ui.overlay")&&o.appendComponentNode(this.node)}return s(e,[{key:"_initUI",value:function(e){var t=this.config.view,n={callbacks:{onPlayClick:this._playVideo},src:e};this.view=t?new t(n):new this.constructor.View(n)}},{key:"_bindEvents",value:function(){this._playVideo=this._playVideo.bind(this),this._eventEmitter.on(u.VIDEO_EVENTS.STATE_CHANGED,this._updatePlayingStatus,this)}},{key:"_updatePlayingStatus",value:function(e){var t=e.nextState;t===u.STATES.PLAY_REQUESTED?this._hideContent():t===u.STATES.ENDED&&this._showContent()}},{key:"_playVideo",value:function(){this._engine.play(),this._hideContent(),this._eventEmitter.emit(u.UI_EVENTS.PLAY_OVERLAY_TRIGGERED)}},{key:"_hideContent",value:function(){this.isContentHidden=!0,this.view.hide()}},{key:"_showContent",value:function(){this.isContentHidden=!1,this.view.show()}},{key:"setBackgroundSrc",value:function(e){this.view.setBackgroundSrc(e)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(u.VIDEO_EVENTS.STATE_CHANGED,this._updatePlayingStatus,this)}},{key:"destroy",value:function(){this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),r.View=c.default,r.dependencies=["engine","eventEmitter","config","rootContainer"],o);t.default=f},2560:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DELAYED_SHOW_TIMEOUT=void 0;var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(n(59)),u=n(194),c=i(n(2833)),d=t.DELAYED_SHOW_TIMEOUT=100,f=(o=r=function(){function e(t){var n=t.config,i=t.eventEmitter,r=t.engine,o=t.rootContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=i,this.isHidden=!1,this._engine=r,this.config=a({},(0,l.default)(n,"ui.loader")),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._initUI(),this._bindEvents(),this.hide(),!1!==(0,l.default)(n,"ui.loader")&&o.appendComponentNode(this.node)}return s(e,[{key:"_bindEvents",value:function(){this._eventEmitter.on(u.VIDEO_EVENTS.STATE_CHANGED,this._checkForWaitingState,this),this._eventEmitter.on(u.VIDEO_EVENTS.UPLOAD_SUSPEND,this.hide,this)}},{key:"_checkForWaitingState",value:function(e){switch(e.nextState){case u.STATES.SEEK_IN_PROGRESS:case u.STATES.WAITING:this.startDelayedShow();break;case u.STATES.LOAD_STARTED:this._engine.isPreloadAvailable&&this.show();break;case u.STATES.READY_TO_PLAY:case u.STATES.PLAYING:case u.STATES.PAUSED:this.stopDelayedShow(),this.hide()}}},{key:"_initUI",value:function(){var e=this.config.view;this.view=e?new e:new this.constructor.View}},{key:"hide",value:function(){this.isHidden||(this._eventEmitter.emit(u.UI_EVENTS.LOADER_HIDE_TRIGGERED),this.view.hide(),this.isHidden=!0)}},{key:"show",value:function(){this.isHidden&&(this._eventEmitter.emit(u.UI_EVENTS.LOADER_SHOW_TRIGGERED),this.view.show(),this.isHidden=!1)}},{key:"startDelayedShow",value:function(){this.isDelayedShowScheduled&&this.stopDelayedShow(),this._delayedShowTimeout=setTimeout(this.show,d)}},{key:"stopDelayedShow",value:function(){clearTimeout(this._delayedShowTimeout),this._delayedShowTimeout=null}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(u.VIDEO_EVENTS.STATE_CHANGED,this._checkForWaitingState,this),this._eventEmitter.off(u.VIDEO_EVENTS.UPLOAD_SUSPEND,this.hide,this)}},{key:"destroy",value:function(){this._unbindEvents(),this.stopDelayedShow(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine}},{key:"node",get:function(){return this.view.getNode()}},{key:"isDelayedShowScheduled",get:function(){return Boolean(this._delayedShowTimeout)}}]),e}(),r.View=c.default,r.dependencies=["engine","eventEmitter","config","rootContainer"],o);t.default=f},2561:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s,l,u,c,d,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=i(n(59)),v=n(194),_=i(n(914)),g=i(n(2840)),y=i(n(2562)),m=i(n(2563)),E=i(n(2564)),b=i(n(2565)),S=i(n(2566)),T=i(n(2865)),k=i(n(2493)).default.asClass,w={list:[m.default,E.default,y.default,b.default,S.default],shouldAlwaysShow:!1,view:null},O=(o=(0,_.default)(),a=(0,_.default)(),s=(0,_.default)(),l=(0,_.default)(),d=c=function(){function e(t,n){var i=t.engine,r=t.eventEmitter,o=t.config,a=t.rootContainer,s=t.screen;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=r,this._engine=i,this._screen=s,this.config=f({},w,(0,p.default)(o,"ui.controls")),this._scope=n,this.isHidden=!1,this._isContentShowingEnabled=!0,this._shouldShowContent=!0,this._delayedToggleVideoPlaybackTimeout=null,this._hideControlsTimeout=null,this._isControlsFocused=!1,this._controls=[],this._bindViewCallbacks(),this._initUI(),this._initControls(),this._initWatchOnSite(),this._bindEvents(),!1!==(0,p.default)(o,"ui.controls")&&a.appendComponentNode(this.node)}return h(e,[{key:"_initUI",value:function(){var e=this.config.view,t={callbacks:{onControlsBlockMouseMove:this._setFocusState,onControlsBlockMouseOut:this._removeFocusState}};this.view=e?new e(t):new this.constructor.View(t)}},{key:"_initControls",value:function(){var e=this;this.config.list.forEach(function(t){var n=t.name;e._scope.register(n,k(t));var i=e._scope.resolve(n);e._controls.push(i),e.view.appendControlNode(i.node||i.getNode())})}},{key:"_initWatchOnSite",value:function(){var e=this.config.watchOnSite;this._scope.register("watchOnSite",k(T.default)),this._watchOnSite=this._scope.resolve("watchOnSite"),e&&(this.view.appendComponentNode(this._watchOnSite.node),this.setWatchOnSiteAlwaysShowFlag(e.showAlways))}},{key:"_bindViewCallbacks",value:function(){this._startHideControlsTimeout=this._startHideControlsTimeout.bind(this),this._setFocusState=this._setFocusState.bind(this),this._removeFocusState=this._removeFocusState.bind(this),this._tryShowContent=this._tryShowContent.bind(this),this._tryHideContent=this._tryHideContent.bind(this)}},{key:"_bindEvents",value:function(){this._eventEmitter.on(v.UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED,this._startHideControlsTimeout),this._eventEmitter.on(v.UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED,this._tryHideContent),this._eventEmitter.on(v.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED,this._startHideControlsTimeout),this._eventEmitter.on(v.UI_EVENTS.LOADER_HIDE_TRIGGERED,this._startHideControlsTimeout),this._eventEmitter.on(v.VIDEO_EVENTS.STATE_CHANGED,this._updatePlayingStatus,this)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(v.UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED,this._startHideControlsTimeout),this._eventEmitter.off(v.UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED,this._tryHideContent),this._eventEmitter.off(v.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED,this._startHideControlsTimeout),this._eventEmitter.off(v.UI_EVENTS.LOADER_HIDE_TRIGGERED,this._startHideControlsTimeout),this._eventEmitter.off(v.VIDEO_EVENTS.STATE_CHANGED,this._updatePlayingStatus,this)}},{key:"_startHideControlsTimeout",value:function(){this._stopHideControlsTimeout(),this._tryShowContent(),this._isControlsFocused||(this._hideControlsTimeout=setTimeout(this._tryHideContent,2e3))}},{key:"_stopHideControlsTimeout",value:function(){this._hideControlsTimeout&&clearTimeout(this._hideControlsTimeout)}},{key:"_setFocusState",value:function(){this._isControlsFocused=!0}},{key:"_removeFocusState",value:function(){this._isControlsFocused=!1}},{key:"_tryShowContent",value:function(){this._isContentShowingEnabled&&this._showContent()}},{key:"_showContent",value:function(){this._isContentShowingEnabled&&(this._eventEmitter.emit(v.UI_EVENTS.CONTROL_BLOCK_SHOW_TRIGGERED),this._screen.showBottomShadow(),this._eventEmitter.emit(v.UI_EVENTS.SHOW_BOTTOM_SHADOW_TRIGGERED),this.view.showControlsBlock(),this._controlContentHidden=!1,this._watchOnSite.show())}},{key:"_tryHideContent",value:function(){this._shouldShowContent||this.config.shouldAlwaysShow||this._hideContent()}},{key:"_hideContent",value:function(){this._eventEmitter.emit(v.UI_EVENTS.CONTROL_BLOCK_HIDE_TRIGGERED),this._screen.hideBottomShadow(),this.view.hideControlsBlock(),this._controlContentHidden=!0,this.shouldWatchOnSiteAlwaysShow||this._watchOnSite.hide()}},{key:"_updatePlayingStatus",value:function(e){switch(e.nextState){case v.STATES.PLAY_REQUESTED:this._shouldShowContent=!1,this._startHideControlsTimeout();break;case v.STATES.ENDED:case v.STATES.PAUSED:case v.STATES.SRC_SET:this._shouldShowContent=!0,this._tryShowContent()}}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"disableShowingContent",value:function(){this._isContentShowingEnabled=!1,this._hideContent()}},{key:"enableShowingContent",value:function(){this._isContentShowingEnabled=!0,this._shouldShowContent&&this._showContent()}},{key:"setWatchOnSiteLogo",value:function(e){this._watchOnSite.setLogo(e)}},{key:"setWatchOnSiteAlwaysShowFlag",value:function(e){this.shouldWatchOnSiteAlwaysShow=e,this.shouldWatchOnSiteAlwaysShow?this._watchOnSite.show():this._controlContentHidden&&this._watchOnSite.hide()}},{key:"removeWatchOnSite",value:function(){this._watchOnSite.node.parentNode.removeChild(this._watchOnSite.node)}},{key:"setShouldAlwaysShow",value:function(e){this.config.shouldAlwaysShow=e,this.config.shouldAlwaysShow?this._tryShowContent():this._startHideControlsTimeout()}},{key:"destroy",value:function(){this._stopHideControlsTimeout(),this._unbindEvents(),this.view.destroy(),delete this.view,this._controls.forEach(function(e){return e.destroy()}),delete this._controls,this._watchOnSite.destroy(),delete this._watchOnSite,delete this._eventEmitter,delete this._engine,delete this._screen,delete this.config,this.isHidden=null,this._isContentShowingEnabled=null,this._shouldShowContent=null,this._hideControlsTimeout=null,this._isControlsFocused=null,this._delayedToggleVideoPlaybackTimeout=null}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),c.View=g.default,c.dependencies=["engine","eventEmitter","config","rootContainer","screen"],u=d,r(u.prototype,"setWatchOnSiteLogo",[o],Object.getOwnPropertyDescriptor(u.prototype,"setWatchOnSiteLogo"),u.prototype),r(u.prototype,"setWatchOnSiteAlwaysShowFlag",[a],Object.getOwnPropertyDescriptor(u.prototype,"setWatchOnSiteAlwaysShowFlag"),u.prototype),r(u.prototype,"removeWatchOnSite",[s],Object.getOwnPropertyDescriptor(u.prototype,"removeWatchOnSite"),u.prototype),r(u.prototype,"setShouldAlwaysShow",[l],Object.getOwnPropertyDescriptor(u.prototype,"setShouldAlwaysShow"),u.prototype),u);t.default=O},2562:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(n(2843)),u=n(2503),c=n(194),d=n(2504),f=n(2446),h=i(f),p=(a=o=function(){function e(t){var n=t.engine,i=t.eventEmitter,r=t.textMap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._engine=n,this._eventEmitter=i,this._textMap=r,this._isUserInteracting=!1,this._currentProgress=0,this._bindCallbacks(),this._initUI(),this._bindEvents(),this.view.setState({played:0,buffered:0}),this._initInterceptor()}return s(e,[{key:"_bindEvents",value:function(){this._eventEmitter.on(c.VIDEO_EVENTS.STATE_CHANGED,this._toggleIntervalUpdates,this),this._eventEmitter.on(c.VIDEO_EVENTS.CHUNK_LOADED,this._updateBufferIndicator,this),this._eventEmitter.on(c.VIDEO_EVENTS.DURATION_UPDATED,this._updateAllIndicators,this)}},{key:"_initUI",value:function(){var e={callbacks:{onChangePlayedProgress:this._changePlayedProgress,onUserInteractionStart:this._onUserInteractionStarts,onUserInteractionEnd:this._onUserInteractionEnds},texts:this._textMap};this.view=new this.constructor.View(e)}},{key:"_initInterceptor",value:function(){var e,t=this;this._interceptor=new h.default({node:this.view.$input[0],callbacks:(e={},r(e,f.KEYCODES.UP_ARROW,function(e){e.stopPropagation(),e.preventDefault(),t._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),t._eventEmitter.emit(c.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED),t._engine.goForward(d.AMOUNT_TO_SKIP_SECONDS)}),r(e,f.KEYCODES.DOWN_ARROW,function(e){e.stopPropagation(),e.preventDefault(),t._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),t._eventEmitter.emit(c.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED),t._engine.goBackward(d.AMOUNT_TO_SKIP_SECONDS)}),r(e,f.KEYCODES.RIGHT_ARROW,function(e){e.stopPropagation(),e.preventDefault(),t._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),t._eventEmitter.emit(c.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED),t._engine.goForward(d.AMOUNT_TO_SKIP_SECONDS)}),r(e,f.KEYCODES.LEFT_ARROW,function(e){e.stopPropagation(),e.preventDefault(),t._eventEmitter.emit(c.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),t._eventEmitter.emit(c.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED),t._engine.goBackward(d.AMOUNT_TO_SKIP_SECONDS)}),e)})}},{key:"_destroyInterceptor",value:function(){this._interceptor.destroy()}},{key:"_bindCallbacks",value:function(){this._updateControlOnInterval=this._updateControlOnInterval.bind(this),this._changePlayedProgress=this._changePlayedProgress.bind(this),this._onUserInteractionStarts=this._onUserInteractionStarts.bind(this),this._onUserInteractionEnds=this._onUserInteractionEnds.bind(this),this._toggleIntervalUpdates=this._toggleIntervalUpdates.bind(this),this._playVideoOnProgressManipulationEnd=this._playVideoOnProgressManipulationEnd.bind(this)}},{key:"_changePlayedProgress",value:function(e){this._currentProgress!==e&&(this._currentProgress=e,this._changeCurrentTimeOfVideo(this._currentProgress/100))}},{key:"_startIntervalUpdates",value:function(){this._updateControlInterval&&this._stopIntervalUpdates(),this._updateControlInterval=setInterval(this._updateControlOnInterval,1e3/60)}},{key:"_stopIntervalUpdates",value:function(){clearInterval(this._updateControlInterval),this._updateControlInterval=null}},{key:"_onUserInteractionStarts",value:function(){this._isUserInteracting||(this._isUserInteracting=!0,this._pauseVideoOnProgressManipulationStart())}},{key:"_onUserInteractionEnds",value:function(){this._isUserInteracting&&(this._isUserInteracting=!1,this._updatePlayedIndicator(),this._playVideoOnProgressManipulationEnd())}},{key:"_updateControlOnInterval",value:function(){this._updatePlayedIndicator(),this._updateBufferIndicator()}},{key:"_toggleIntervalUpdates",value:function(e){switch(e.nextState){case c.STATES.SRC_SET:this.reset();break;case c.STATES.PLAYING:this._startIntervalUpdates();break;case c.STATES.SEEK_IN_PROGRESS:this._updatePlayedIndicator(),this._updateBufferIndicator();break;default:this._stopIntervalUpdates()}}},{key:"_changeCurrentTimeOfVideo",value:function(e){var t=this._engine.getDurationTime();this._engine.setCurrentTime(t*e),this._eventEmitter.emit(c.UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,e)}},{key:"_pauseVideoOnProgressManipulationStart",value:function(){var e=this._engine.getCurrentState();e!==c.STATES.PLAYING&&e!==c.STATES.PLAY_REQUESTED||(this._shouldPlayAfterManipulationEnd=!0,this._engine.pause()),this._eventEmitter.emit(c.UI_EVENTS.PROGRESS_MANIPULATION_STARTED)}},{key:"_playVideoOnProgressManipulationEnd",value:function(){this._shouldPlayAfterManipulationEnd&&(this._engine.play(),this._shouldPlayAfterManipulationEnd=!1),this._eventEmitter.emit(c.UI_EVENTS.PROGRESS_MANIPULATION_ENDED)}},{key:"_updateBufferIndicator",value:function(){var e=this._engine.getCurrentTime(),t=this._engine.getBuffered(),n=this._engine.getDurationTime();this.updateBuffered((0,u.getOverallBufferedPercent)(t,e,n))}},{key:"_updatePlayedIndicator",value:function(){var e=this._engine.getCurrentTime(),t=this._engine.getDurationTime();this.updatePlayed((0,u.getOverallPlayedPercent)(e,t))}},{key:"_updateAllIndicators",value:function(){var e=this._engine.getCurrentTime(),t=this._engine.getBuffered(),n=this._engine.getDurationTime();this.updatePlayed((0,u.getOverallPlayedPercent)(e,n)),this.updateBuffered((0,u.getOverallBufferedPercent)(t,e,n))}},{key:"updatePlayed",value:function(e){this._isUserInteracting||(this._currentProgress=e,this.view.setState({played:this._currentProgress}))}},{key:"updateBuffered",value:function(e){this.view.setState({buffered:e})}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(c.VIDEO_EVENTS.DURATION_UPDATED,this._updateAllIndicators,this),this._eventEmitter.off(c.VIDEO_EVENTS.STATE_CHANGED,this._toggleIntervalUpdates,this),this._eventEmitter.off(c.VIDEO_EVENTS.CHUNK_LOADED,this._updateBufferIndicator,this)}},{key:"reset",value:function(){this.updatePlayed(0),this.updateBuffered(0)}},{key:"destroy",value:function(){this._destroyInterceptor(),this._stopIntervalUpdates(),this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine,this._isUserInteracting=null,this._currentProgress=null,this.isHidden=null}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),o.View=l.default,o.dependencies=["engine","eventEmitter","textMap"],a);t.default=p},2563:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(n(2846)),u=n(2446),c=i(u),d=n(194),f=(a=o=function(){function e(t){var n=t.engine,i=t.eventEmitter,r=t.textMap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._engine=n,this._eventEmitter=i,this._textMap=r,this._isPlaying=null,this._bindCallbacks(),this._initUI(),this._bindEvents(),this.setControlStatus(!1),this._initInterceptor()}return s(e,[{key:"_initInterceptor",value:function(){var e,t=this;this._interceptor=new c.default({node:this.view.$playbackControl[0],callbacks:(e={},r(e,u.KEYCODES.SPACE_BAR,function(e){e.stopPropagation(),t._eventEmitter.emit(d.UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED)}),r(e,u.KEYCODES.ENTER,function(e){e.stopPropagation(),t._eventEmitter.emit(d.UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED)}),e)})}},{key:"_destroyInterceptor",value:function(){this._interceptor.destroy()}},{key:"_bindCallbacks",value:function(){this._togglePlayback=this._togglePlayback.bind(this)}},{key:"_bindEvents",value:function(){this._eventEmitter.on(d.VIDEO_EVENTS.STATE_CHANGED,this._updatePlayingStatus,this)}},{key:"_togglePlayback",value:function(){this._isPlaying?this._pauseVideo():this._playVideo()}},{key:"_playVideo",value:function(){this._engine.play(),this._eventEmitter.emit(d.UI_EVENTS.PLAY_TRIGGERED)}},{key:"_pauseVideo",value:function(){this._engine.pause(),this._eventEmitter.emit(d.UI_EVENTS.PAUSE_TRIGGERED)}},{key:"_updatePlayingStatus",value:function(e){var t=e.nextState;t===d.STATES.SRC_SET?this.reset():t===d.STATES.PLAYING?this.setControlStatus(!0):t!==d.STATES.PAUSED&&t!==d.STATES.ENDED&&t!==d.STATES.SEEK_IN_PROGRESS||this.setControlStatus(!1)}},{key:"_initUI",value:function(){var e={callbacks:{onTogglePlaybackButtonClick:this._togglePlayback},texts:this._textMap};this.view=new this.constructor.View(e)}},{key:"setControlStatus",value:function(e){this._isPlaying=e,this.view.setState({isPlaying:this._isPlaying})}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(d.VIDEO_EVENTS.STATE_CHANGED,this._updatePlayingStatus,this)}},{key:"reset",value:function(){this.setControlStatus(!1)}},{key:"destroy",value:function(){this._destroyInterceptor(),this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine,delete this._textMap}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),o.View=l.default,o.dependencies=["engine","eventEmitter","textMap"],a);t.default=f},2564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2851)),s=n(194),l=(r=i=function(){function e(t){var n=t.eventEmitter,i=t.engine;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._engine=i,this._bindCallbacks(),this._initUI(),this._bindEvents(),this.setCurrentTime(0),this.setDurationTime(0)}return o(e,[{key:"_bindCallbacks",value:function(){this._updateCurrentTime=this._updateCurrentTime.bind(this),this._updateDurationTime=this._updateDurationTime.bind(this)}},{key:"_bindEvents",value:function(){this._eventEmitter.on(s.VIDEO_EVENTS.STATE_CHANGED,this._toggleIntervalUpdates,this),this._eventEmitter.on(s.VIDEO_EVENTS.SEEK_FINISHED,this._updateCurrentTime,this),this._eventEmitter.on(s.VIDEO_EVENTS.DURATION_UPDATED,this._updateDurationTime,this)}},{key:"_initUI",value:function(){this.view=new this.constructor.View}},{key:"_startIntervalUpdates",value:function(){this._updateControlInterval&&this._stopIntervalUpdates(),this._updateControlInterval=setInterval(this._updateCurrentTime,500)}},{key:"_stopIntervalUpdates",value:function(){clearInterval(this._updateControlInterval),this._updateControlInterval=null}},{key:"_toggleIntervalUpdates",value:function(e){switch(e.nextState){case s.STATES.SRC_SET:this.reset();break;case s.STATES.PLAYING:this._startIntervalUpdates();break;case s.STATES.SEEK_IN_PROGRESS:this._updateCurrentTime();break;default:this._stopIntervalUpdates()}}},{key:"_updateDurationTime",value:function(){this.setDurationTime(this._engine.getDurationTime())}},{key:"_updateCurrentTime",value:function(){this.setCurrentTime(this._engine.getCurrentTime())}},{key:"setDurationTime",value:function(e){this.view.setState({duration:e})}},{key:"setCurrentTime",value:function(e){this.view.setState({current:e})}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"reset",value:function(){this.setDurationTime(0),this.setCurrentTime(0)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(s.VIDEO_EVENTS.STATE_CHANGED,this._toggleIntervalUpdates,this),this._eventEmitter.off(s.VIDEO_EVENTS.SEEK_FINISHED,this._updateCurrentTime,this),this._eventEmitter.off(s.VIDEO_EVENTS.DURATION_UPDATED,this._updateDurationTime,this)}},{key:"destroy",value:function(){this._stopIntervalUpdates(),this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine,this.isHidden=null}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),i.View=a.default,i.dependencies=["engine","eventEmitter"],r);t.default=l},2565:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=i(n(2854)),u=n(2446),c=i(u),d=n(2504),f=n(194),h=(a=o=function(){function e(t){var n=t.engine,i=t.eventEmitter,r=t.textMap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._engine=n,this._eventEmitter=i,this._textMap=r,this._isMuted=this._engine.getMute(),this._volumeLevel=this._engine.getVolume(),this._bindCallbacks(),this._initUI(),this._bindEvents(),this.view.setState({volume:this._volumeLevel,isMuted:this._isMuted}),this._initInterceptor()}return s(e,[{key:"_initUI",value:function(){var e={callbacks:{onVolumeLevelChangeFromInput:this._getVolumeLevelFromInput,onVolumeLevelChangeFromWheel:this._getVolumeLevelFromWheel,onToggleMuteClick:this._toggleMuteStatus},texts:this._textMap};this.view=new this.constructor.View(e)}},{key:"_initInterceptor",value:function(){var e,t,n=this;this._buttonInterceptor=new c.default({node:this.view.$muteControl[0],callbacks:(e={},r(e,u.KEYCODES.SPACE_BAR,function(e){e.stopPropagation(),n._eventEmitter.emit(f.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),n._eventEmitter.emit(n._isMuted?f.UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED:f.UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED)}),r(e,u.KEYCODES.ENTER,function(e){e.stopPropagation(),n._eventEmitter.emit(f.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),n._eventEmitter.emit(n._isMuted?f.UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED:f.UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED)}),e)}),this._inputInterceptor=new c.default({node:this.view.$input[0],callbacks:(t={},r(t,u.KEYCODES.RIGHT_ARROW,function(e){e.stopPropagation(),e.preventDefault(),n._eventEmitter.emit(f.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),n._eventEmitter.emit(f.UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED),n._engine.increaseVolume(d.AMOUNT_TO_CHANGE_VOLUME)}),r(t,u.KEYCODES.LEFT_ARROW,function(e){e.stopPropagation(),e.preventDefault(),n._eventEmitter.emit(f.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),n._eventEmitter.emit(f.UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED),n._engine.decreaseVolume(d.AMOUNT_TO_CHANGE_VOLUME)}),t)})}},{key:"_destroyInterceptor",value:function(){this._buttonInterceptor.destroy(),this._inputInterceptor.destroy()}},{key:"_bindEvents",value:function(){this._eventEmitter.on(f.VIDEO_EVENTS.VOLUME_STATUS_CHANGED,this._updateVolumeStatus,this)}},{key:"_bindCallbacks",value:function(){this._getVolumeLevelFromInput=this._getVolumeLevelFromInput.bind(this),this._toggleMuteStatus=this._toggleMuteStatus.bind(this),this._getVolumeLevelFromWheel=this._getVolumeLevelFromWheel.bind(this)}},{key:"_changeVolumeLevel",value:function(e){this._engine.setVolume(e),this._eventEmitter.emit(f.UI_EVENTS.VOLUME_CHANGE_TRIGGERED,e)}},{key:"_toggleMuteStatus",value:function(){this._engine.setMute(!this._isMuted),this._eventEmitter.emit(f.UI_EVENTS.MUTE_STATUS_TRIGGERED,!this._isMuted)}},{key:"_getVolumeLevelFromWheel",value:function(e){var t=this._volumeLevel+e/10,n=Math.min(100,Math.max(0,t));this._changeVolumeStatus(n)}},{key:"_getVolumeLevelFromInput",value:function(e){this._changeVolumeStatus(e)}},{key:"_changeVolumeStatus",value:function(e){this._changeVolumeLevel(e),this._isMuted&&this._toggleMuteStatus()}},{key:"_updateVolumeStatus",value:function(){this.setVolumeLevel(this._engine.getVolume()),this.setMuteStatus(this._engine.getMute())}},{key:"setVolumeLevel",value:function(e){e!==this._volumeLevel&&(this._volumeLevel=e,this.view.setState({volume:this._volumeLevel,isMuted:!this._volumeLevel}))}},{key:"setMuteStatus",value:function(e){e!==this._isMuted&&(this._isMuted=e,this.view.setState({volume:this._isMuted?0:this._volumeLevel,isMuted:this._isMuted||!this._volumeLevel}))}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(f.VIDEO_EVENTS.VOLUME_STATUS_CHANGED,this._updateVolumeStatus,this)}},{key:"destroy",value:function(){this._destroyInterceptor(),this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine,delete this._textMap,this.isHidden=null,this._isMuted=null,this._volumeLevel=null}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),o.View=l.default,o.dependencies=["engine","eventEmitter","textMap"],a);t.default=h},2566:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(194),u=n(2446),c=i(u),d=i(n(2860)),f=(a=o=function(){function e(t){var n=t.eventEmitter,i=t.fullScreenManager,r=t.textMap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._fullScreenManager=i,this._textMap=r,this._isInFullScreen=null,this._bindCallbacks(),this._initUI(),this._bindEvents(),this.setControlStatus(!1),this._fullScreenManager.isEnabled||this.hide(),this._initInterceptor()}return s(e,[{key:"_bindCallbacks",value:function(){this._toggleFullScreen=this._toggleFullScreen.bind(this)}},{key:"_bindEvents",value:function(){this._eventEmitter.on(l.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.setControlStatus,this)}},{key:"_initUI",value:function(){var e={callbacks:{onToggleFullScreenButtonClick:this._toggleFullScreen},texts:this._textMap};this.view=new this.constructor.View(e)}},{key:"_initInterceptor",value:function(){var e,t=this;this._interceptor=new c.default({node:this.view.$toggleFullScreenControl[0],callbacks:(e={},r(e,u.KEYCODES.SPACE_BAR,function(e){e.stopPropagation(),t._eventEmitter.emit(l.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED)}),r(e,u.KEYCODES.ENTER,function(e){e.stopPropagation(),t._eventEmitter.emit(l.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED)}),e)})}},{key:"_destroyInterceptor",value:function(){this._interceptor.destroy()}},{key:"_toggleFullScreen",value:function(){this._isInFullScreen?this._exitFullScreen():this._enterFullScreen()}},{key:"_enterFullScreen",value:function(){this._fullScreenManager.enterFullScreen()}},{key:"_exitFullScreen",value:function(){this._fullScreenManager.exitFullScreen()}},{key:"setControlStatus",value:function(e){this._isInFullScreen=e,this.view.setState({isInFullScreen:this._isInFullScreen})}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(l.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.setControlStatus,this)}},{key:"destroy",value:function(){this._destroyInterceptor(),this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._fullScreenManager,delete this._textMap,delete this.isHidden}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),o.View=d.default,o.dependencies=["eventEmitter","fullScreenManager","textMap"],a);t.default=f},2567:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIgMTJoMTB2LTJoMnY0SDBWMGg0djJIMnYxMHptMTAtOC41MTVMNy40MTQgOC4wNzEgNiA2LjY1NyAxMC42NTcgMkg5LjAwNFYwSDE0djUuMDA1aC0ydi0xLjUyeiIvPgo8L3N2Zz4K"},2696:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=i(n(2697)),s=i(n(2706)),l=i(n(2710)),u=i(n(2711)),c=i(n(2715)),d=i(n(2737)),f=i(n(2745)),h=i(n(59)),p=i(n(147)),v=i(n(114)),_=i(n(409)),g=i(n(225)),y=i(n(0)),m=n(1),E=n(2536),b=(o=r=function(e){function t(e){(0,l.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));n.containerForCustomUI=document.createElement("div"),n.callProperPlaybackCallback=n.callProperPlaybackCallback.bind(n),n.setPlayerNodeRef=n.setPlayerNodeRef.bind(n),n.setChildrenContainerNodeRef=n.setChildrenContainerNodeRef.bind(n),n.processFullScreenCallbackChange=n.processFullScreenCallbackChange.bind(n),n.registerModules(e.modules);var i=e.player;return i?n.player=i:n.createPlayerInstance(e),n.attachCallbacks(e),e.shouldControlsAlwaysShow&&n.player.setControlsShouldAlwaysShow(!0),n.props.onInit(n.player),n}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.appendPlayerNode(),this.appendChildNodeToWrapper()}},{key:"componentWillReceiveProps",value:function(e){this.updatePlayerBasicProps(e),this.updatePlaybackStatus(e),this.updatePlayerUI(e)}},{key:"componentWillUnmount",value:function(){this.unAttachCallbacks();var e=this.player;this.player=null,setTimeout(function(){e.destroy()}),this.containerForCustomUI=null}},{key:"registerModules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(e,function(e,t){return(0,E.registerModule)(t,e)})}},{key:"getConfigForPlayerFromProps",value:function(e){var t=(0,_.default)(e,["width","height"]),n=e.onPlaybackAnomaly,i=!1;n&&(i={callback:n});var r=(0,h.default)(e,"controls",{});r&&e.watchOnSite&&(r=(0,a.default)({},r,{watchOnSite:e.watchOnSite}));var o=(0,h.default)(e,"overlay",!1);return(0,a.default)({},(0,_.default)(e,["src","preload","autoPlay","loop","muted","volume","playInline","loader","screen","loadingCover","exitFullScreenOnEnd","enterFullScreenOnPlay","exitFullScreenOnPause","disableFullScreen","pauseVideoOnFullScreenExit","texts"]),{size:t,controls:r,overlay:o,logger:i})}},{key:"triggerPlaybackOnPlayerCreation",value:function(e){e.shouldTriggerPlay&&e.shouldTriggerPause?console.warn("VideoPlayerWrapper: shouldTriggerPause and shouldTriggerPause both true"):(e.shouldTriggerPlay&&(this.player.play(),e.isInFullScreen&&this.player.enterFullScreen()),e.shouldTriggerPause&&this.player.pause())}},{key:"createPlayerInstance",value:function(e){var t=this.getConfigForPlayerFromProps(e);this.constructor._Player?this.player=new this.constructor._Player(t):this.player=(0,E.create)(t),this.triggerPlaybackOnPlayerCreation(e),this.player._defaultModules.rootContainer.appendComponentNode(this.containerForCustomUI)}},{key:"attachCallbacks",value:function(e){this.player.on(E.VIDEO_EVENTS.ERROR,e.onError),this.player.on(E.VIDEO_EVENTS.STATE_CHANGED,this.callProperPlaybackCallback),this.player.on(E.VIDEO_EVENTS.SEEK_IN_PROGRESS,e.onSeek),this.player.on(E.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,e.onUserSeek),this.player.on(E.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,e.onUserSeek),this.player.on(E.UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,e.onUserSeek),this.player.on(E.UI_EVENTS.WATCH_ON_SITE_TRIGGERED,e.onWatchOnSite),this.player.on(E.UI_EVENTS.MUTE_STATUS_TRIGGERED,e.onMuteStatusChange),this.player.on(E.UI_EVENTS.VOLUME_CHANGE_TRIGGERED,e.onVolumeLevelChange),this.player.on(E.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.processFullScreenCallbackChange)}},{key:"processFullScreenCallbackChange",value:function(e){e?this.props.onFullScreenEnter():this.props.onFullScreenExit()}},{key:"unAttachCallbacks",value:function(){var e=this.props;this.player.off(E.VIDEO_EVENTS.ERROR,e.onError),this.player.off(E.VIDEO_EVENTS.STATE_CHANGED,this.callProperPlaybackCallback),this.player.off(E.VIDEO_EVENTS.SEEK_IN_PROGRESS,e.onSeek),this.player.off(E.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,e.onUserSeek),this.player.off(E.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,e.onUserSeek),this.player.off(E.UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,e.onUserSeek),this.player.off(E.UI_EVENTS.WATCH_ON_SITE_TRIGGERED,e.onWatchOnSite),this.player.off(E.UI_EVENTS.MUTE_STATUS_TRIGGERED,e.onMuteStatusChange),this.player.off(E.UI_EVENTS.VOLUME_CHANGE_TRIGGERED,e.onVolumeLevelChange),this.player.off(E.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.processFullScreenCallbackChange)}},{key:"callProperPlaybackCallback",value:function(e){var t=e.nextState;t===E.ENGINE_STATES.PLAYING&&this.props.onPlay(),t===E.ENGINE_STATES.PAUSED&&this.props.onPause(),t===E.ENGINE_STATES.ENDED&&this.props.onEnd()}},{key:"updatePlaybackStatus",value:function(e){var t=e.shouldTriggerPlay,n=e.shouldTriggerPause,i=e.isInFullScreen;if(t&&n)return console.warn("VideoPlayerWrapper: shouldTriggerPause and shouldTriggerPause both true"),null;t&&!this.props.shouldTriggerPlay&&(this.player.play(),i&&!this.player.isInFullScreen&&this.player.enterFullScreen()),n&&!this.props.shouldTriggerPause&&this.player.pause()}},{key:"updatePlayerBasicProps",value:function(e){var t=e.src,n=e.autoPlay,i=e.muted,r=e.loop,o=e.volume,a=e.preload,s=e.playInline;(0,g.default)(this.props.src,t)||this.player.setSrc(t),this.props.autoPlay!==n&&this.player.setAutoPlay(n),this.props.muted!==i&&this.player.setMute(i),this.props.loop!==r&&this.player.setLoop(r),this.props.volume!==o&&this.player.setVolume(o),this.props.preload!==a&&this.player.setPreload(a),this.props.playInline!==s&&this.player.setPlayInline(s)}},{key:"updatePlayerUI",value:function(e){var t=e.width,n=e.height,i=e.isInFullScreen,r=e.loadingCover,o=e.watchOnSite,a=e.shouldControlsAlwaysShow;this.props.width!==t&&this.player.setWidth(t),this.props.height!==n&&this.player.setHeight(n),this.props.isInFullScreen!==i&&(i?this.player.enterFullScreen():this.player.exitFullScreen()),this.props.loadingCover!==r&&this.player.setLoadingCover(r),this.props.watchOnSite?o?(this.props.watchOnSite.logo!==o.logo&&this.player.setWatchOnSiteLogo(o.logo),this.props.watchOnSite.showAlways!==o.showAlways&&this.player.setWatchOnSiteAlwaysShowFlag(o.showAlways)):this.player.removeWatchOnSite():o&&(this.player.setWatchOnSiteLogo(o.logo),this.player.setWatchOnSiteAlwaysShowFlag(o.showAlways)),this.props.shouldControlsAlwaysShow!==a&&this.player.setControlsShouldAlwaysShow(a)}},{key:"setPlayerNodeRef",value:function(e){this.playerNode=e}},{key:"setChildrenContainerNodeRef",value:function(e){this.childrenContainerNode=e}},{key:"appendPlayerNode",value:function(){this.player.attachToElement(this.playerNode)}},{key:"appendChildNodeToWrapper",value:function(){this.containerForCustomUI.appendChild(this.childrenContainerNode)}},{key:"render",value:function(){return y.default.createElement("section",null,y.default.createElement("section",{ref:this.setPlayerNodeRef}),y.default.createElement("section",{ref:this.setChildrenContainerNodeRef},this.extendedChildren))}},{key:"extendedChildren",get:function(){var e=this,t=this.props.children;return y.default.Children.map(t,function(t){if(!t||(0,p.default)(t.type))return t;var n=void 0;return n=t.type.dependencies?(0,a.default)({},(0,_.default)(e.player._defaultModules,t.type.dependencies),(0,_.default)(e.player._additionalModules,t.type.dependencies)):(0,_.default)(e.player._defaultModules,["engine","eventEmitter"]),y.default.cloneElement(t,n)})}}]),t}(y.default.Component),r.propTypes={width:m.number,height:m.number,src:(0,m.oneOfType)([m.string,m.array]),autoPlay:m.bool,muted:m.bool,loop:m.bool,volume:m.number,preload:(0,m.oneOf)(["auto","metadata","none"]),playInline:m.bool,overlay:m.any,loader:m.any,screen:m.any,controls:m.any,loadingCover:m.string,watchOnSite:(0,m.oneOfType)([(0,m.shape)({logo:m.string,showAlways:m.bool}),m.bool]),text:m.object,shouldControlsAlwaysShow:m.bool,shouldTriggerPlay:m.bool,shouldTriggerPause:m.bool,isInFullScreen:m.bool,disableFullScreen:m.bool,exitFullScreenOnEnd:m.bool,enterFullScreenOnPlay:m.bool,exitFullScreenOnPause:m.bool,pauseVideoOnFullScreenExit:m.bool,onInit:m.func,onPlay:m.func,onPause:m.func,onEnd:m.func,onSeek:m.func,onUserSeek:m.func,onMuteStatusChange:m.func,onVolumeLevelChange:m.func,onFullScreenEnter:m.func,onFullScreenExit:m.func,onWatchOnSite:m.func,onPlaybackAnomaly:m.func,player:m.object},r.defaultProps={onInit:v.default,onPlay:v.default,onPause:v.default,onEnd:v.default,onSeek:v.default,onUserSeek:v.default,onPlaybackAnomaly:v.default,onMuteStatusChange:v.default,onFullScreenEnter:v.default,onFullScreenExit:v.default,onVolumeLevelChange:v.default,onWatchOnSite:v.default},o);t.default=b},2697:function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(2698));t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},2698:function(e,t,n){e.exports={default:n(2699),__esModule:!0}},2699:function(e,t,n){n(2700),e.exports=n(2426).Object.assign},2700:function(e,t,n){var i=n(2432);i(i.S+i.F,"Object",{assign:n(2702)})},2701:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},2702:function(e,t,n){"use strict";var i=n(2460),r=n(2485),o=n(2462),a=n(2486),s=n(2528),l=Object.assign;e.exports=!l||n(2439)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=r.f,d=o.f;l>u;)for(var f,h=s(arguments[u++]),p=c?i(h).concat(c(h)):i(h),v=p.length,_=0;v>_;)d.call(h,f=p[_++])&&(n[f]=h[f]);return n}:l},2703:function(e,t,n){var i=n(2440),r=n(2704),o=n(2705);e.exports=function(e){return function(t,n,a){var s,l=i(t),u=r(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},2704:function(e,t,n){var i=n(2481),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},2705:function(e,t,n){var i=n(2481),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},2706:function(e,t,n){e.exports={default:n(2707),__esModule:!0}},2707:function(e,t,n){n(2708),e.exports=n(2426).Object.getPrototypeOf},2708:function(e,t,n){var i=n(2486),r=n(2530);n(2709)("getPrototypeOf",function(){return function(e){return r(i(e))}})},2709:function(e,t,n){var i=n(2432),r=n(2426),o=n(2439);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},2710:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},2711:function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(2712));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},2712:function(e,t,n){e.exports={default:n(2713),__esModule:!0}},2713:function(e,t,n){n(2714);var i=n(2426).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},2714:function(e,t,n){var i=n(2432);i(i.S+i.F*!n(2434),"Object",{defineProperty:n(2433).f})},2715:function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(2531));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},2716:function(e,t,n){e.exports={default:n(2717),__esModule:!0}},2717:function(e,t,n){n(2718),n(2723),e.exports=n(2491).f("iterator")},2718:function(e,t,n){"use strict";var i=n(2719)(!0);n(2532)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},2719:function(e,t,n){var i=n(2481),r=n(2480);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},2720:function(e,t,n){"use strict";var i=n(2489),r=n(2459),o=n(2490),a={};n(2438)(a,n(2441)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},2721:function(e,t,n){var i=n(2433),r=n(2449),o=n(2460);e.exports=n(2434)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},2722:function(e,t,n){var i=n(2428).document;e.exports=i&&i.documentElement},2723:function(e,t,n){n(2724);for(var i=n(2428),r=n(2438),o=n(2488),a=n(2441)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],d=c&&c.prototype;d&&!d[a]&&r(d,a,u),o[u]=o.Array}},2724:function(e,t,n){"use strict";var i=n(2725),r=n(2726),o=n(2488),a=n(2440);e.exports=n(2532)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},2725:function(e,t){e.exports=function(){}},2726:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},2727:function(e,t,n){e.exports={default:n(2728),__esModule:!0}},2728:function(e,t,n){n(2729),n(2734),n(2735),n(2736),e.exports=n(2426).Symbol},2729:function(e,t,n){"use strict";var i=n(2428),r=n(2435),o=n(2434),a=n(2432),s=n(2533),l=n(2730).KEY,u=n(2439),c=n(2483),d=n(2490),f=n(2461),h=n(2441),p=n(2491),v=n(2492),_=n(2731),g=n(2732),y=n(2449),m=n(2440),E=n(2479),b=n(2459),S=n(2489),T=n(2733),k=n(2535),w=n(2433),O=n(2460),A=k.f,I=w.f,R=T.f,D=i.Symbol,P=i.JSON,C=P&&P.stringify,L=h("_hidden"),x=h("toPrimitive"),N={}.propertyIsEnumerable,M=c("symbol-registry"),F=c("symbols"),U=c("op-symbols"),j=Object.prototype,G="function"==typeof D,B=i.QObject,V=!B||!B.prototype||!B.prototype.findChild,H=o&&u(function(){return 7!=S(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=A(j,t);i&&delete j[t],I(e,t,n),i&&e!==j&&I(j,t,i)}:I,W=function(e){var t=F[e]=S(D.prototype);return t._k=e,t},Y=G&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},K=function(e,t,n){return e===j&&K(U,t,n),y(e),t=E(t,!0),y(n),r(F,t)?(n.enumerable?(r(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:b(0,!1)})):(r(e,L)||I(e,L,b(1,{})),e[L][t]=!0),H(e,t,n)):I(e,t,n)},$=function(e,t){y(e);for(var n,i=_(t=m(t)),r=0,o=i.length;o>r;)K(e,n=i[r++],t[n]);return e},z=function(e){var t=N.call(this,e=E(e,!0));return!(this===j&&r(F,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(F,e)||r(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=m(e),t=E(t,!0),e!==j||!r(F,t)||r(U,t)){var n=A(e,t);return!n||!r(F,t)||r(e,L)&&e[L][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=R(m(e)),i=[],o=0;n.length>o;)r(F,t=n[o++])||t==L||t==l||i.push(t);return i},q=function(e){for(var t,n=e===j,i=R(n?U:m(e)),o=[],a=0;i.length>a;)!r(F,t=i[a++])||n&&!r(j,t)||o.push(F[t]);return o};G||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(U,n),r(this,L)&&r(this[L],e)&&(this[L][e]=!1),H(this,e,b(1,n))};return o&&V&&H(j,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),k.f=Z,w.f=K,n(2534).f=T.f=X,n(2462).f=z,n(2485).f=q,o&&!n(2487)&&s(j,"propertyIsEnumerable",z,!0),p.f=function(e){return W(h(e))}),a(a.G+a.W+a.F*!G,{Symbol:D});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),J=0;Q.length>J;)h(Q[J++]);for(var ee=O(h.store),te=0;ee.length>te;)v(ee[te++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return r(M,e+="")?M[e]:M[e]=D(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in M)if(M[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!G,"Object",{create:function(e,t){return void 0===t?S(e):$(S(e),t)},defineProperty:K,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:q}),P&&a(a.S+a.F*(!G||u(function(){var e=D();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(t=i[1])&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,C.apply(P,i)}}}),D.prototype[x]||n(2438)(D.prototype,x,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},2730:function(e,t,n){var i=n(2461)("meta"),r=n(2450),o=n(2435),a=n(2433).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(2439)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!o(e,i)&&c(e),e}}},2731:function(e,t,n){var i=n(2460),r=n(2485),o=n(2462);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},2732:function(e,t,n){var i=n(2529);e.exports=Array.isArray||function(e){return"Array"==i(e)}},2733:function(e,t,n){var i=n(2440),r=n(2534).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},2734:function(e,t){},2735:function(e,t,n){n(2492)("asyncIterator")},2736:function(e,t,n){n(2492)("observable")},2737:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(2738)),o=i(n(2742)),a=i(n(2531));t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,a.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},2738:function(e,t,n){e.exports={default:n(2739),__esModule:!0}},2739:function(e,t,n){n(2740),e.exports=n(2426).Object.setPrototypeOf},2740:function(e,t,n){var i=n(2432);i(i.S,"Object",{setPrototypeOf:n(2741).set})},2741:function(e,t,n){var i=n(2450),r=n(2449),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(2524)(Function.call,n(2535).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},2742:function(e,t,n){e.exports={default:n(2743),__esModule:!0}},2743:function(e,t,n){n(2744);var i=n(2426).Object;e.exports=function(e,t){return i.create(e,t)}},2744:function(e,t,n){var i=n(2432);i(i.S,"Object",{create:n(2489)})},2745:function(e,t,n){e.exports=n(189)},2746:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.container=void 0,t.registerModule=function(e,t){s[e]=t},t.clearAdditionalModules=function(){s={}},t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.createScope(),n=Object.keys(s);return n.length&&n.forEach(function(e){return t.registerClass(e,s[e])}),new o.default(e,t,a.default,s)};var r=i(n(2493)),o=i(n(2554)),a=i(n(2799)),s={},l=t.container=r.default.createContainer();l.register(a.default)},2747:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=[],i={},d={options:e=Object.assign({},e),get registrations(){return Object.assign({},t&&t.registrations,i)}},f=t?[d].concat(t[c]):[d];d[c]=f,d.cache={},d.createScope=function(){return r(e,d)},d.register=function(e,t){var n=(0,s.default)(e,t);return Object.keys(n).forEach(function(e){i[e]=n[e]}),d};var h=function(e,t){return function(n,i,r){var o=(0,s.default)(n,i);return Object.keys(o).forEach(function(n){var i=o[n];r=Object.assign({},r),!t&&Array.isArray(i)&&(r=Object.assign({},r,i[1]),i=i[0]),d.register(n,e(i,r))}),d}};return d.registerFunction=h(o.asFunction),d.registerClass=h(o.asClass),d.registerValue=h(o.asValue,!0),d.resolve=function(e){var t=(0,u.default)(f);try{var i=d.registrations[e];if(n.indexOf(e)>-1)throw new a.default(e,n,"Cyclic dependencies detected.");if(!i)throw new a.default(e,n);n.push(e);var r=void 0,o=void 0;switch(i.lifetime){case l.default.TRANSIENT:o=i.resolve(d);break;case l.default.SINGLETON:void 0===(r=t.cache[e])?(o=i.resolve(d),t.cache[e]=o):o=r;break;case l.default.SCOPED:var s=!0,c=!1,h=void 0;try{for(var p,v=f[Symbol.iterator]();!(s=(p=v.next()).done);s=!0){if(void 0!==(r=p.value.cache[e])){o=r;break}}}catch(e){c=!0,h=e}finally{try{!s&&v.return&&v.return()}finally{if(c)throw h}}void 0===r&&(o=i.resolve(d),d.cache[e]=o);break;default:throw new a.default(e,n,'Unknown lifetime "'+i.lifetime+'"')}return n.pop(),o}catch(e){throw n=[],e}},d}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(2537),a=i(n(2749)),s=i(n(2750)),l=i(n(2494)),u=i(n(915)),c="__familyTree__"},2748:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2538)),o=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"The function "+e+" expected a "+n+", "+r+" given."))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=o},2749:function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2538)),o=function(e,t,n){(t=t.slice()).push(e);var i=t.join(" -> "),r="Could not resolve '"+e+"'.";return n&&(r+=" "+n+" \n\n Resolution path: "+i),r},a=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(e,n,r)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=a},2750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e;return(0,i.default)(n)||(n=Object.assign(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))),n};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(51))},2751:function(e,t,n){n(2752),n(2760),n(2761),n(2762),n(2763),n(2764),n(2765),n(2766),n(2767),n(2768),n(2769),n(2770),n(2771),n(2772),n(2773),n(2775),n(2777),n(2779),n(2780),n(2782),n(2783),n(2784),n(2785),n(2786),n(2787),n(2788),n(2789),n(2790),n(2791),e.exports=n(2442).Object},2752:function(e,t,n){"use strict";var i=n(2422),r=n(2429),o=n(2418),a=n(2415),s=n(2463),l=n(2464).KEY,u=n(2436),c=n(2496),d=n(2497),f=n(2453),h=n(2430),p=n(2542),v=n(2753),_=n(2754),g=n(2758),y=n(2444),m=n(2423),E=n(2451),b=n(2452),S=n(2467),T=n(2548),k=n(2437),w=n(2420),O=n(2445),A=k.f,I=w.f,R=T.f,D=i.Symbol,P=i.JSON,C=P&&P.stringify,L=h("_hidden"),x=h("toPrimitive"),N={}.propertyIsEnumerable,M=c("symbol-registry"),F=c("symbols"),U=c("op-symbols"),j=Object.prototype,G="function"==typeof D,B=i.QObject,V=!B||!B.prototype||!B.prototype.findChild,H=o&&u(function(){return 7!=S(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=A(j,t);i&&delete j[t],I(e,t,n),i&&e!==j&&I(j,t,i)}:I,W=function(e){var t=F[e]=S(D.prototype);return t._k=e,t},Y=G&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},K=function(e,t,n){return e===j&&K(U,t,n),y(e),t=E(t,!0),y(n),r(F,t)?(n.enumerable?(r(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:b(0,!1)})):(r(e,L)||I(e,L,b(1,{})),e[L][t]=!0),H(e,t,n)):I(e,t,n)},$=function(e,t){y(e);for(var n,i=_(t=m(t)),r=0,o=i.length;o>r;)K(e,n=i[r++],t[n]);return e},z=function(e){var t=N.call(this,e=E(e,!0));return!(this===j&&r(F,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(F,e)||r(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=m(e),t=E(t,!0),e!==j||!r(F,t)||r(U,t)){var n=A(e,t);return!n||!r(F,t)||r(e,L)&&e[L][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=R(m(e)),i=[],o=0;n.length>o;)r(F,t=n[o++])||t==L||t==l||i.push(t);return i},q=function(e){for(var t,n=e===j,i=R(n?U:m(e)),o=[],a=0;i.length>a;)!r(F,t=i[a++])||n&&!r(j,t)||o.push(F[t]);return o};G||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(U,n),r(this,L)&&r(this[L],e)&&(this[L][e]=!1),H(this,e,b(1,n))};return o&&V&&H(j,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),k.f=Z,w.f=K,n(2501).f=T.f=X,n(2454).f=z,n(2466).f=q,o&&!n(2465)&&s(j,"propertyIsEnumerable",z,!0),p.f=function(e){return W(h(e))}),a(a.G+a.W+a.F*!G,{Symbol:D});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),J=0;Q.length>J;)h(Q[J++]);for(var ee=O(h.store),te=0;ee.length>te;)v(ee[te++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return r(M,e+="")?M[e]:M[e]=D(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in M)if(M[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!G,"Object",{create:function(e,t){return void 0===t?S(e):$(S(e),t)},defineProperty:K,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:q}),P&&a(a.S+a.F*(!G||u(function(){var e=D();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(t=i[1])&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,C.apply(P,i)}}}),D.prototype[x]||n(2443)(D.prototype,x,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},2753:function(e,t,n){var i=n(2422),r=n(2442),o=n(2465),a=n(2542),s=n(2420).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},2754:function(e,t,n){var i=n(2445),r=n(2466),o=n(2454);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},2755:function(e,t,n){var i=n(2423),r=n(2756),o=n(2757);e.exports=function(e){return function(t,n,a){var s,l=i(t),u=r(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},2756:function(e,t,n){var i=n(2546),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},2757:function(e,t,n){var i=n(2546),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},2758:function(e,t,n){var i=n(2498);e.exports=Array.isArray||function(e){return"Array"==i(e)}},2759:function(e,t,n){var i=n(2422).document;e.exports=i&&i.documentElement},2760:function(e,t,n){var i=n(2415);i(i.S,"Object",{create:n(2467)})},2761:function(e,t,n){var i=n(2415);i(i.S+i.F*!n(2418),"Object",{defineProperty:n(2420).f})},2762:function(e,t,n){var i=n(2415);i(i.S+i.F*!n(2418),"Object",{defineProperties:n(2547)})},2763:function(e,t,n){var i=n(2423),r=n(2437).f;n(2424)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},2764:function(e,t,n){var i=n(2431),r=n(2468);n(2424)("getPrototypeOf",function(){return function(e){return r(i(e))}})},2765:function(e,t,n){var i=n(2431),r=n(2445);n(2424)("keys",function(){return function(e){return r(i(e))}})},2766:function(e,t,n){n(2424)("getOwnPropertyNames",function(){return n(2548).f})},2767:function(e,t,n){var i=n(2419),r=n(2464).onFreeze;n(2424)("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},2768:function(e,t,n){var i=n(2419),r=n(2464).onFreeze;n(2424)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},2769:function(e,t,n){var i=n(2419),r=n(2464).onFreeze;n(2424)("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},2770:function(e,t,n){var i=n(2419);n(2424)("isFrozen",function(e){return function(t){return!i(t)||!!e&&e(t)}})},2771:function(e,t,n){var i=n(2419);n(2424)("isSealed",function(e){return function(t){return!i(t)||!!e&&e(t)}})},2772:function(e,t,n){var i=n(2419);n(2424)("isExtensible",function(e){return function(t){return!!i(t)&&(!e||e(t))}})},2773:function(e,t,n){var i=n(2415);i(i.S+i.F,"Object",{assign:n(2774)})},2774:function(e,t,n){"use strict";var i=n(2445),r=n(2466),o=n(2454),a=n(2431),s=n(2544),l=Object.assign;e.exports=!l||n(2436)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=r.f,d=o.f;l>u;)for(var f,h=s(arguments[u++]),p=c?i(h).concat(c(h)):i(h),v=p.length,_=0;v>_;)d.call(h,f=p[_++])&&(n[f]=h[f]);return n}:l},2775:function(e,t,n){var i=n(2415);i(i.S,"Object",{is:n(2776)})},2776:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},2777:function(e,t,n){var i=n(2415);i(i.S,"Object",{setPrototypeOf:n(2778).set})},2778:function(e,t,n){var i=n(2419),r=n(2444),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(2541)(Function.call,n(2437).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},2779:function(e,t,n){"use strict";var i=n(2549),r={};r[n(2430)("toStringTag")]="z",r+""!="[object z]"&&n(2463)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},2780:function(e,t,n){var i=n(2415),r=n(2550),o=n(2423),a=n(2437),s=n(2781);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=o(e),l=a.f,u=r(i),c={},d=0;u.length>d;)void 0!==(n=l(i,t=u[d++]))&&s(c,t,n);return c}})},2781:function(e,t,n){"use strict";var i=n(2420),r=n(2452);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},2782:function(e,t,n){var i=n(2415),r=n(2551)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},2783:function(e,t,n){var i=n(2415),r=n(2551)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},2784:function(e,t,n){"use strict";var i=n(2415),r=n(2431),o=n(2495),a=n(2420);n(2418)&&i(i.P+n(2469),"Object",{__defineGetter__:function(e,t){a.f(r(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},2785:function(e,t,n){"use strict";var i=n(2415),r=n(2431),o=n(2495),a=n(2420);n(2418)&&i(i.P+n(2469),"Object",{__defineSetter__:function(e,t){a.f(r(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},2786:function(e,t,n){"use strict";var i=n(2415),r=n(2431),o=n(2451),a=n(2468),s=n(2437).f;n(2418)&&i(i.P+n(2469),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=o(e,!0);do{if(t=s(n,i))return t.get}while(n=a(n))}})},2787:function(e,t,n){"use strict";var i=n(2415),r=n(2431),o=n(2451),a=n(2468),s=n(2437).f;n(2418)&&i(i.P+n(2469),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=o(e,!0);do{if(t=s(n,i))return t.set}while(n=a(n))}})},2788:function(e,t,n){var i=n(2415);i(i.S+i.F,"Object",{isObject:n(2419)})},2789:function(e,t,n){var i=n(2415);i(i.S+i.F,"Object",{classof:n(2549)})},2790:function(e,t,n){var i=n(2415),r=n(2552);i(i.S+i.F,"Object",{define:r})},2791:function(e,t,n){var i=n(2415),r=n(2552),o=n(2467);i(i.S+i.F,"Object",{make:function(e,t){return r(o(e),t)}})},2792:function(e,t,n){n(2793),e.exports=n(2442).Array.values},2793:function(e,t,n){"use strict";var i=n(2794),r=n(2795),o=n(2553),a=n(2423);e.exports=n(2796)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},2794:function(e,t,n){var i=n(2430)("unscopables"),r=Array.prototype;void 0==r[i]&&n(2443)(r,i,{}),e.exports=function(e){r[i][e]=!0}},2795:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},2796:function(e,t,n){"use strict";var i=n(2465),r=n(2415),o=n(2463),a=n(2443),s=n(2429),l=n(2553),u=n(2797),c=n(2497),d=n(2468),f=n(2430)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,_,g,y){u(n,t,v);var m,E,b,S=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",k="values"==_,w=!1,O=e.prototype,A=O[f]||O["@@iterator"]||_&&O[_],I=A||S(_),R=_?k?S("entries"):I:void 0,D="Array"==t?O.entries||A:A;if(D&&(b=d(D.call(new e)))!==Object.prototype&&b.next&&(c(b,T,!0),i||s(b,f)||a(b,f,p)),k&&A&&"values"!==A.name&&(w=!0,I=function(){return A.call(this)}),i&&!y||!h&&!w&&O[f]||a(O,f,I),l[t]=I,l[T]=p,_)if(m={values:k?I:S("values"),keys:g?I:S("keys"),entries:R},y)for(E in m)E in O||o(O,E,m[E]);else r(r.P+r.F*(h||w),t,m);return m}},2797:function(e,t,n){"use strict";var i=n(2467),r=n(2452),o=n(2497),a={};n(2443)(a,n(2430)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},2798:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertUIConfigForAndroid=t.convertUIConfigForIOS=t.getFullScreenManagerConfig=t.getUIConfig=t.getEngineConfig=t.getAnomalyBloodhoundConfig=t.getTextMapConfig=t.getKeyboardInterceptorConfig=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(2502),o=function(e){return e&&e.__esModule?e:{default:e}}(n(409)),a=function(e){return(0,r.isIPhone)()||(0,r.isIPod)()||(0,r.isIPad)()||(0,r.isAndroid)()?{disabled:!0}:{disabled:e.disableControlWithKeyboard}},s=function(e){return e.texts||{}},l=function(e){return e.logger},u=function(e){return(0,o.default)(e,["preload","autoPlay","loop","muted","volume","src","playInline"])},c=function(e){return{disabled:Boolean(e.disableFullScreen),exitOnEnd:Boolean(e.exitFullScreenOnEnd),enterOnPlay:Boolean(e.enterFullScreenOnPlay),exitOnPause:Boolean(e.exitFullScreenOnPause),pauseOnExit:Boolean(e.pauseVideoOnFullScreenExit)}},d=function(e){return i({},e,{screen:i({},e.screen,{indicateScreenClick:!1,disableClickProcessing:!0,nativeControls:!0}),loader:!1,controls:!1})},f=function(e){return i({},e,{screen:i({},e.screen,{disableClickProcessing:!0})})},h=function(e){var t=i({},e.size,(0,o.default)(e,["overlay","screen","customUI","loader","controls","watchOnSite","fillAllSpace","loadingCover"]));return(0,r.isIPhone)()||(0,r.isIPod)()||(0,r.isIPad)()?d(t):(0,r.isAndroid)()?f(t):t};t.getKeyboardInterceptorConfig=a,t.getTextMapConfig=s,t.getAnomalyBloodhoundConfig=l,t.getEngineConfig=u,t.getUIConfig=h,t.getFullScreenManagerConfig=c,t.convertUIConfigForIOS=d,t.convertUIConfigForAndroid=f,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{keyboardInterceptor:a(e),textMap:s(e),ui:h(e),engine:u(e),anomalyBloodhound:l(e),fullScreenManager:c(e)}}},2799:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2493)),o=i(n(2800)),a=i(n(2555)),s=i(n(2556)),l=i(n(2812)),u=i(n(2813)),c=i(n(2504)),d=i(n(2815)),f=i(n(2557)),h=i(n(2822)),p=i(n(2558)),v=i(n(2559)),_=i(n(2560)),g=i(n(2836)),y=i(n(2561)),m=i(n(2869)),E=r.default.asClass;t.default={eventEmitter:E(l.default).scoped(),rootContainer:E(f.default).scoped(),textMap:E(u.default).scoped(),engine:E(o.default).scoped(),fullScreenManager:E(s.default).scoped(),keyboardInterceptor:E(c.default).scoped(),mouseInterceptor:E(d.default).scoped(),anomalyBloodhound:E(a.default).scoped(),debugPanel:E(h.default).scoped(),manipulationIndicator:E(m.default).scoped(),screen:E(p.default).scoped(),overlay:E(v.default).scoped(),loader:E(_.default).scoped(),loadingCover:E(g.default).scoped(),controls:E(y.default).scoped()}},2800:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STATES=void 0;var o,a,s,l,u,c,d,f,h,p,v,_,g,y,m,E,b,S,T,k,w,O,A,I,R,D,P,C,L,x,N,M,F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),j=i(n(914)),G=i(n(2801)),B=i(n(2802)),V=i(n(2803)),H=n(2502),W=n(194);t.STATES=W.STATES;var Y=(o=(0,j.default)(),a=(0,j.default)(),s=(0,j.default)(),l=(0,j.default)(),u=(0,j.default)(),c=(0,j.default)(),d=(0,j.default)(),f=(0,j.default)(),h=(0,j.default)(),p=(0,j.default)(),v=(0,j.default)(),_=(0,j.default)(),g=(0,j.default)(),y=(0,j.default)(),m=(0,j.default)(),E=(0,j.default)(),b=(0,j.default)(),S=(0,j.default)(),T=(0,j.default)(),k=(0,j.default)(),w=(0,j.default)(),O=(0,j.default)("goTo"),A=(0,j.default)(),I=(0,j.default)(),R=(0,j.default)(),D=(0,j.default)("getCurrentPlaybackState"),P=(0,j.default)(),C=(0,j.default)(),L=(0,j.default)(),M=N=function(){function e(t){var n=t.eventEmitter,i=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._currentSrc=null,this._createVideoTag(i.engine),this._stateEngine=new G.default(n,this._video),this._nativeEventsBroadcaster=new B.default(n,this._video),this._mediaStreamStrategy=new V.default(n,this._video),this._applyConfig(i.engine)}return U(e,[{key:"_createVideoTag",value:function(){this._video=document.createElement("video")}},{key:"_applyConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preload,n=e.autoPlay,i=e.loop,r=e.muted,o=e.volume,a=e.playInline,s=e.src;this.setPreload(t),this.setAutoPlay(n),this.setLoop(i),this.setMute(r),this.setVolume(o),this.setPlayInline(a),this.setSrc(s)}},{key:"getNode",value:function(){return this._video}},{key:"_getViewDimensions",value:function(){return{width:this._video.offsetWidth,height:this._video.offsetHeight}}},{key:"getAttachedStream",value:function(){return this._mediaStreamStrategy.attachedStream}},{key:"getDebugInfo",value:function(){var e=this._video,t=e.duration,n=e.currentTime,i=void 0;return this._mediaStreamStrategy.attachedStream&&(i=this._mediaStreamStrategy.attachedStream.getDebugInfo()),F({},i,{viewDimensions:this._getViewDimensions(),currentTime:n,duration:t,loadingStateTimestamps:this._stateEngine.getStateTimestamps()})}},{key:"setSrc",value:function(e){e!==this._currentSrc&&(this._stateEngine.clearTimestamps(),this._currentSrc=e,this._mediaStreamStrategy.connectMediaStream(this._currentSrc),this._stateEngine.setState(W.STATES.SRC_SET))}},{key:"getSrc",value:function(){return this._currentSrc}},{key:"goLive",value:function(){var e=this.getAttachedStream();this.setCurrentTime(e.livePosition),this.play()}},{key:"goForward",value:function(e){var t=this.getDurationTime();if(t){var n=this.getCurrentTime();this.setCurrentTime(Math.min(n+e,t))}}},{key:"goBackward",value:function(e){if(this.getDurationTime()){var t=this.getCurrentTime();this.setCurrentTime(Math.max(t-e,0))}}},{key:"decreaseVolume",value:function(e){this.setVolume(this.getVolume()-e)}},{key:"increaseVolume",value:function(e){this.setVolume(this.getVolume()+e)}},{key:"setAutoPlay",value:function(e){this._video.autoplay=Boolean(e)}},{key:"getAutoPlay",value:function(){return this._video.autoplay}},{key:"setLoop",value:function(e){this._video.loop=Boolean(e)}},{key:"getLoop",value:function(){return this._video.loop}},{key:"setMute",value:function(e){this._video.muted=Boolean(e)}},{key:"getMute",value:function(){return this._video.muted}},{key:"setVolume",value:function(e){var t=Number(e);this._video.volume=isNaN(t)?1:Math.max(0,Math.min(Number(e)/100,1))}},{key:"getVolume",value:function(){return 100*this._video.volume}},{key:"setPlaybackRate",value:function(e){this._video.playbackRate=e}},{key:"getPlaybackRate",value:function(){return this._video.playbackRate}},{key:"setPreload",value:function(e){this._video.preload=e||"auto"}},{key:"getPreload",value:function(){return this._video.preload}},{key:"getCurrentTime",value:function(){return this._video.currentTime}},{key:"setCurrentTime",value:function(e){this._video.currentTime=e}},{key:"getDurationTime",value:function(){return this._video.duration||0}},{key:"getBuffered",value:function(){return this._video.buffered}},{key:"setPlayInline",value:function(e){e&&this._video.setAttribute("playsInline",e)}},{key:"getPlayInline",value:function(){return this._video.getAttribute("playsInline")}},{key:"getCurrentState",value:function(){return this._stateEngine.getState()}},{key:"play",value:function(){var e=this;this._eventEmitter.emit(W.VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED),this._pauseRequested=!1,this._playPromise||(this._playPromise=this._video.play(),void 0!==this._playPromise&&this._playPromise.then(function(){e._playPromise=null,e._pauseRequested&&e.pause()}).catch(function(){e._playPromise=null}))}},{key:"pause",value:function(){this._playPromise?this._pauseRequested=!0:(this._video.pause(),this._pauseRequested=!1)}},{key:"togglePlayback",value:function(){var e=this.getCurrentState();e===W.STATES.PLAY_REQUESTED||e===W.STATES.PLAYING?this.pause():this.play()}},{key:"destroy",value:function(){this._stateEngine.destroy(),this._nativeEventsBroadcaster.destroy(),this._mediaStreamStrategy.destroy(),this._video.parentNode&&this._video.parentNode.removeChild(this._video),delete this._stateEngine,delete this._nativeEventsBroadcaster,delete this._mediaStreamStrategy,delete this._eventEmitter,delete this._video}},{key:"isMetadataLoaded",get:function(){return this._stateEngine.isMetadataLoaded}},{key:"isPreloadAvailable",get:function(){return!((0,H.isIPad)()||(0,H.isIPhone)()||(0,H.isIPod)()||(0,H.isAndroid)())&&"none"!==this.getPreload()}},{key:"isAutoPlayAvailable",get:function(){return!((0,H.isIPad)()||(0,H.isIPhone)()||(0,H.isIPod)()||(0,H.isAndroid)())&&this.getAutoPlay()}}]),e}(),N.dependencies=["eventEmitter","config"],x=M,r(x.prototype,"getDebugInfo",[o],Object.getOwnPropertyDescriptor(x.prototype,"getDebugInfo"),x.prototype),r(x.prototype,"setSrc",[a],Object.getOwnPropertyDescriptor(x.prototype,"setSrc"),x.prototype),r(x.prototype,"getSrc",[s],Object.getOwnPropertyDescriptor(x.prototype,"getSrc"),x.prototype),r(x.prototype,"goLive",[l],Object.getOwnPropertyDescriptor(x.prototype,"goLive"),x.prototype),r(x.prototype,"goForward",[u],Object.getOwnPropertyDescriptor(x.prototype,"goForward"),x.prototype),r(x.prototype,"goBackward",[c],Object.getOwnPropertyDescriptor(x.prototype,"goBackward"),x.prototype),r(x.prototype,"decreaseVolume",[d],Object.getOwnPropertyDescriptor(x.prototype,"decreaseVolume"),x.prototype),r(x.prototype,"increaseVolume",[f],Object.getOwnPropertyDescriptor(x.prototype,"increaseVolume"),x.prototype),r(x.prototype,"setAutoPlay",[h],Object.getOwnPropertyDescriptor(x.prototype,"setAutoPlay"),x.prototype),r(x.prototype,"getAutoPlay",[p],Object.getOwnPropertyDescriptor(x.prototype,"getAutoPlay"),x.prototype),r(x.prototype,"setLoop",[v],Object.getOwnPropertyDescriptor(x.prototype,"setLoop"),x.prototype),r(x.prototype,"getLoop",[_],Object.getOwnPropertyDescriptor(x.prototype,"getLoop"),x.prototype),r(x.prototype,"setMute",[g],Object.getOwnPropertyDescriptor(x.prototype,"setMute"),x.prototype),r(x.prototype,"getMute",[y],Object.getOwnPropertyDescriptor(x.prototype,"getMute"),x.prototype),r(x.prototype,"setVolume",[m],Object.getOwnPropertyDescriptor(x.prototype,"setVolume"),x.prototype),r(x.prototype,"getVolume",[E],Object.getOwnPropertyDescriptor(x.prototype,"getVolume"),x.prototype),r(x.prototype,"setPlaybackRate",[b],Object.getOwnPropertyDescriptor(x.prototype,"setPlaybackRate"),x.prototype),r(x.prototype,"getPlaybackRate",[S],Object.getOwnPropertyDescriptor(x.prototype,"getPlaybackRate"),x.prototype),r(x.prototype,"setPreload",[T],Object.getOwnPropertyDescriptor(x.prototype,"setPreload"),x.prototype),r(x.prototype,"getPreload",[k],Object.getOwnPropertyDescriptor(x.prototype,"getPreload"),x.prototype),r(x.prototype,"getCurrentTime",[w],Object.getOwnPropertyDescriptor(x.prototype,"getCurrentTime"),x.prototype),r(x.prototype,"setCurrentTime",[O],Object.getOwnPropertyDescriptor(x.prototype,"setCurrentTime"),x.prototype),r(x.prototype,"getDurationTime",[A],Object.getOwnPropertyDescriptor(x.prototype,"getDurationTime"),x.prototype),r(x.prototype,"setPlayInline",[I],Object.getOwnPropertyDescriptor(x.prototype,"setPlayInline"),x.prototype),r(x.prototype,"getPlayInline",[R],Object.getOwnPropertyDescriptor(x.prototype,"getPlayInline"),x.prototype),r(x.prototype,"getCurrentState",[D],Object.getOwnPropertyDescriptor(x.prototype,"getCurrentState"),x.prototype),r(x.prototype,"play",[P],Object.getOwnPropertyDescriptor(x.prototype,"play"),x.prototype),r(x.prototype,"pause",[C],Object.getOwnPropertyDescriptor(x.prototype,"pause"),x.prototype),r(x.prototype,"togglePlayback",[L],Object.getOwnPropertyDescriptor(x.prototype,"togglePlayback"),x.prototype),x);t.default=Y},2801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NATIVE_VIDEO_EVENTS_TO_STATE=void 0;var i,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(194),s=t.NATIVE_VIDEO_EVENTS_TO_STATE=["loadstart","loadedmetadata","canplay","play","playing","pause","ended","waiting","seeking","seeked"],l=(r=i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=t,this._video=n,this._currentState=null,this._isMetadataLoaded=!1,this._statesTimestamps={},this._bindCallbacks(),this._bindEvents()}return o(e,[{key:"_bindCallbacks",value:function(){this._processEventFromVideo=this._processEventFromVideo.bind(this)}},{key:"_bindEvents",value:function(){var e=this;s.forEach(function(t){return e._video.addEventListener(t,e._processEventFromVideo)})}},{key:"_unbindEvents",value:function(){var e=this;s.forEach(function(t){return e._video.removeEventListener(t,e._processEventFromVideo)})}},{key:"clearTimestamps",value:function(){this._statesTimestamps={}}},{key:"_setInitialTimeStamp",value:function(){this._initialTimeStamp=Date.now()}},{key:"_setStateTimestamp",value:function(e){this._statesTimestamps[e]||(this._statesTimestamps[e]=Date.now()-this._initialTimeStamp,this._setInitialTimeStamp())}},{key:"getStateTimestamps",value:function(){return this._statesTimestamps}},{key:"_processEventFromVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._video;switch(e.type){case"loadstart":this._setInitialTimeStamp(),this.setState(a.STATES.LOAD_STARTED);break;case"loadedmetadata":this._setStateTimestamp(a.STATES.METADATA_LOADED),this.setState(a.STATES.METADATA_LOADED),this._isMetadataLoaded=!0;break;case"canplay":this._setStateTimestamp(a.STATES.READY_TO_PLAY),this.setState(a.STATES.READY_TO_PLAY);break;case"play":this.setState(a.STATES.PLAY_REQUESTED);break;case"playing":this.setState(a.STATES.PLAYING);break;case"waiting":this.setState(a.STATES.WAITING);break;case"pause":this.setState(a.STATES.PAUSED);break;case"ended":this.setState(a.STATES.ENDED);break;case"seeking":this.setState(a.STATES.SEEK_IN_PROGRESS);break;case"seeked":this.setState(t.paused?a.STATES.PAUSED:a.STATES.PLAYING)}}},{key:"setState",value:function(e){(this._currentState!==a.STATES.METADATA_LOADED||e!==a.STATES.SEEK_IN_PROGRESS&&e!==a.STATES.PAUSED)&&(this._eventEmitter.emit(a.VIDEO_EVENTS.STATE_CHANGED,{prevState:this._currentState,nextState:e}),this._currentState=e)}},{key:"getState",value:function(){return this._currentState}},{key:"destroy",value:function(){this._unbindEvents(),delete this._eventEmitter,delete this._video}},{key:"isMetadataLoaded",get:function(){return this._isMetadataLoaded}}]),e}(),i.dependencies=["eventEmitter","config"],r);t.default=l},2802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NATIVE_VIDEO_TO_BROADCAST=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(194),o=t.NATIVE_VIDEO_TO_BROADCAST=["progress","error","stalled","suspend","durationchange","timeupdate","volumechange","seeking"],a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=t,this._video=n,this._bindCallbacks(),this._bindEvents()}return i(e,[{key:"_bindCallbacks",value:function(){this._processEventFromVideo=this._processEventFromVideo.bind(this)}},{key:"_bindEvents",value:function(){var e=this;o.forEach(function(t){return e._video.addEventListener(t,e._processEventFromVideo)})}},{key:"_unbindEvents",value:function(){var e=this;o.forEach(function(t){return e._video.removeEventListener(t,e._processEventFromVideo)})}},{key:"_processEventFromVideo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._video;switch(e.type){case"progress":this._eventEmitter.emit(r.VIDEO_EVENTS.CHUNK_LOADED);break;case"stalled":this._eventEmitter.emit(r.VIDEO_EVENTS.UPLOAD_STALLED);break;case"suspend":this._eventEmitter.emit(r.VIDEO_EVENTS.UPLOAD_SUSPEND);break;case"seeking":this._eventEmitter.emit(r.VIDEO_EVENTS.SEEK_IN_PROGRESS,t.currentTime);break;case"durationchange":this._eventEmitter.emit(r.VIDEO_EVENTS.DURATION_UPDATED,t.duration);break;case"timeupdate":this._eventEmitter.emit(r.VIDEO_EVENTS.CURRENT_TIME_UPDATED,t.currentTime);break;case"volumechange":this._eventEmitter.emit(r.VIDEO_EVENTS.VOLUME_STATUS_CHANGED,{volume:t.volume,muted:t.muted})}}},{key:"destroy",value:function(){this._unbindEvents(),delete this._video,delete this._eventEmitter}}]),e}();t.default=a},2803:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2804)),l=i(n(2806)),u=n(2807),c=n(2808),d=n(2809),f=n(194),h=[(0,l.default)(f.MEDIA_STREAM_TYPES.DASH,f.MEDIA_STREAM_DELIVERY_TYPE.NATIVE_ADAPTIVE),(0,l.default)(f.MEDIA_STREAM_TYPES.HLS,f.MEDIA_STREAM_DELIVERY_TYPE.NATIVE_ADAPTIVE),s.default,(0,l.default)(f.MEDIA_STREAM_TYPES.MP4,f.MEDIA_STREAM_DELIVERY_TYPE.NATIVE_PROGRESSIVE),(0,l.default)(f.MEDIA_STREAM_TYPES.WEBM,f.MEDIA_STREAM_DELIVERY_TYPE.NATIVE_PROGRESSIVE)],p=(o=r=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=t,this._video=n,this._playableStreamCreators=[],this._playableStreams=[],this._attachedStream=null,e.streamCreators.forEach(function(e){return e.isSupported(u.NativeEnvironmentSupport)&&i._playableStreamCreators.push(e)})}return a(e,[{key:"_autoDetectSourceTypes",value:function(e){return e.map(function(e){return"string"==typeof e?{url:e,type:(0,d.detectStreamType)(e)}:e})}},{key:"_resolvePlayableStreams",value:function(e){if(e){var t=[].concat(e),n=this._autoDetectSourceTypes(t);this._playableStreams=(0,c.resolvePlayableStreams)(n,this._playableStreamCreators,this._eventEmitter)}else this._playableStreams=[]}},{key:"_connectStreamToVideo",value:function(){this._playableStreams.length>0&&(this._attachedStream=this._playableStreams[0],this._attachedStream.attach(this._video))}},{key:"_detachCurrentStream",value:function(){this._attachedStream&&(this._attachedStream.detach(this._video),this._attachedStream=null)}},{key:"connectMediaStream",value:function(e){this._detachCurrentStream(),this._resolvePlayableStreams(e),this._connectStreamToVideo()}},{key:"destroy",value:function(){this._detachCurrentStream(),delete this._attachedStream,delete this._playableStreamCreators,delete this._playableStreams,delete this._eventEmitter,delete this._video}},{key:"attachedStream",get:function(){return this._attachedStream}}]),e}(),r.streamCreators=h,o);t.default=p},2804:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(2805)),a=n(194),s=n(2503),l={abrEwmaDefaultEstimate:5e6,liveSyncDuration:4},u=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventEmitter=n,this.hls=null,this.videoElement=null,this.mediaStream=null,1!==t.length)throw new Error("Can only handle a single HLS stream. Received "+t.length+" streams.");this.mediaStream=t[0],this._bindCallbacks()}return r(e,null,[{key:"isSupported",value:function(e){return e.MSE&&o.default.isSupported()}},{key:"canPlay",value:function(e){return e===a.MEDIA_STREAM_TYPES.HLS}}]),r(e,[{key:"_bindCallbacks",value:function(){this.attachOnPlay=this.attachOnPlay.bind(this),this.broadcastError=this.broadcastError.bind(this)}},{key:"logError",value:function(e,t){this.eventEmitter.emit(a.VIDEO_EVENTS.ERROR,{errorType:e,streamType:a.MEDIA_STREAM_TYPES.HLS,streamProvider:"hls.js",errorInstance:t})}},{key:"broadcastError",value:function(e,t){if(t.fatal){var n=o.default.ErrorTypes,i=o.default.ErrorDetails;if(t.type===n.NETWORK_ERROR){switch(t.details){case i.MANIFEST_LOAD_ERROR:case i.MANIFEST_LOAD_TIMEOUT:this.logError(a.ERRORS.MANIFEST_LOAD,t);break;case i.MANIFEST_PARSING_ERROR:this.logError(a.ERRORS.MANIFEST_PARSE,t);break;case i.LEVEL_LOAD_ERROR:case i.LEVEL_LOAD_TIMEOUT:this.logError(a.ERRORS.LEVEL_LOAD,t);break;case i.AUDIO_TRACK_LOAD_ERROR:case i.AUDIO_TRACK_LOAD_TIMEOUT:case i.FRAG_LOAD_ERROR:case i.FRAG_LOAD_TIMEOUT:this.logError(a.ERRORS.CONTENT_LOAD,t);break;default:this.logError(a.ERRORS.UNKNOWN,t)}this.hls.startLoad()}else if(t.type===n.MEDIA_ERROR){switch(t.details){case i.MANIFEST_INCOMPATIBLE_CODECS_ERROR:this.logError(a.ERRORS.MANIFEST_INCOMPATIBLE,t);break;default:this.logError(a.ERRORS.MEDIA,t)}this.hls.recoverMediaError()}else this.logError(a.VIDEO_EVENTS.UNKNOWN,t)}}},{key:"attachOnPlay",value:function(){this.videoElement&&(this.hls.startLoad(),this.videoElement.removeEventListener("play",this.attachOnPlay))}},{key:"attach",value:function(e){if(this.mediaStream){var t=i({},l);this.videoElement=e,"none"===this.videoElement.preload&&(t.autoStartLoad=!1,this.videoElement.addEventListener("play",this.attachOnPlay)),this.hls=new o.default(t),this.hls.on(o.default.Events.ERROR,this.broadcastError),this.hls.loadSource(this.mediaStream.url),this.hls.attachMedia(this.videoElement)}}},{key:"detach",value:function(){this.mediaStream&&(this.hls.off(o.default.Events.ERROR,this.broadcastError),this.hls.destroy(),this.hls=null,this.videoElement.removeEventListener("play",this.attachOnPlay),this.videoElement=null)}},{key:"getMediaStreamDeliveryType",value:function(){return a.MEDIA_STREAM_DELIVERY_TYPE.ADAPTIVE_VIA_MSE}},{key:"getDebugInfo",value:function(){var e=void 0,t=0,n=null,r=null,o=null;return this.hls.levelController&&(e=this.hls.levelController.levels)&&(n=e[this.hls.levelController.level]),this.hls.streamController&&(t=this.hls.streamController.lastCurrentTime,this.hls.streamController.mediaBuffer&&(o=(0,s.geOverallBufferLength)(this.hls.streamController.mediaBuffer.buffered),r=(0,s.getNearestBufferSegmentInfo)(this.hls.streamController.mediaBuffer.buffered,t))),i({},this.mediaStream,{deliveryType:this.getMediaStreamDeliveryType(),bitrates:e,currentBitrate:n,overallBufferLength:o,nearestBufferSegInfo:r})}},{key:"currentUrl",get:function(){return this.mediaStream.url}},{key:"livePosition",get:function(){return this.hls.liveSyncPosition}}]),e}();t.default=u},2805:function(e,t,n){var i;!function(t){e.exports=t()}(function(){return function e(t,n,r){function o(s,l){if(!n[s]){if(!t[s]){if(!l&&("function"==typeof i&&i))return i(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),i=(u=n.slice()).length,l=0;l<i;l++)u[l].apply(this,s);return!0},i.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){!function(e){var i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=r.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=s.normalizePath(d)}else u.path=a.path,o.params||(u.params=a.params,o.query||(u.query=a.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof n&&"object"==typeof t?t.exports=s:"object"==typeof n?n.URLToolkit=s:e.URLToolkit=s}(this)},{}],3:[function(e,t,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function n(e){_[e]=!0;for(var t in r[e][1]){var i=r[e][1][t];_[i]||n(i)}}for(var s,l=Object.keys(o),u=0,c=l.length;u<c;u++){var d=l[u],f=o[d].exports;if(f===e||f&&f.default===e){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,c=l.length;u<c;u++){h[d=l[u]]=d}r[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,r[p]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),v];var _={};n(p);var g="("+i+")({"+Object.keys(_).map(function(e){return a(e)+":["+r[e][0]+","+a(r[e][1])+"]"}).join(",")+"},{},["+a(p)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,m=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return m;var E=y.createObjectURL(m),b=new Worker(E);return b.objectURL=E,b}},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.hlsDefaultConfig=void 0;var r=i(e(5)),o=i(e(8)),a=i(e(9)),s=i(e(10)),l=i(e(59)),u=i(e(7)),c=i(e(6)),d=i(e(50)),f=i(e(16)),h=i(e(15)),p=i(e(14));n.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:l.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:r.default,bufferController:o.default,capLevelController:a.default,fpsController:s.default,audioStreamController:c.default,audioTrackController:u.default,subtitleStreamController:p.default,subtitleTrackController:h.default,timelineController:f.default,cueHandler:d.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,14:14,15:15,16:16,5:5,50:50,59:59,6:6,7:7,8:8,9:9}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=i(e(37)),l=e(33),u=e(54),c=i(e(52)),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.FRAG_LOADING,o.default.FRAG_LOADED,o.default.FRAG_BUFFERED,o.default.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){this.clearTimer(),a.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=e.frag.level,r=n.levels[i].details.live,o=n.config,a=void 0,s=void 0;r?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new c.default(n,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,n=this.fragCurrent,i=n.loader,r=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=i.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var l=performance.now()-a.trequest,c=Math.abs(t.playbackRate);if(l>500*n.duration/c){var d=e.levels,f=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/l),h=d[n.level],p=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,v=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*p/8)),_=t.currentTime,g=(v-a.loaded)/f,y=(s.default.bufferInfo(t,_,e.config.maxBufferHole).end-_)/c;if(y<2*n.duration/c&&g>y){var m=void 0,E=void 0;for(E=n.level-1;E>r;E--){var b=d[E].realBitrate?Math.max(d[E].realBitrate,d[E].bitrate):d[E].bitrate;if((m=n.duration*b/(6.4*f))<y)break}m<g&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),e.nextLoadLevel=E,this._bwEstimator.sample(l,a.loaded),i.abort(),this.clearTimer(),e.trigger(o.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,n,i,r,o,a,s,l){for(var c=r;c>=i;c--){var d=l[c].details,f=d?d.totalduration/d.fragments.length:t,h=!!d&&d.live,p=void 0;p=c<=e?a*n:s*n;var v=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,_=v*f/p;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+v+"/"+f+"/"+o+"/"+_),p>v&&(!_||h&&!this.bitrateTestDelay||_<o))return c}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(s.default.bufferInfo(o,c,i.maxBufferHole).end-c)/d,p=this._findBestLevel(a,l,f,r,t,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(p>=0)return p;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=l?Math.min(l,i.maxStarvationDelay):i.maxStarvationDelay,_=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===h){var y=this.bitrateTestDelay;if(y){v=(l?Math.min(l,i.maxLoadingDelay):i.maxLoadingDelay)-y,u.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),_=g=1}}return p=this._findBestLevel(a,l,f,r,t,h+v,_,g,n),Math.max(p,0)}}]),t}();n.default=d},{33:33,34:34,35:35,37:37,52:52,54:54}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(48)),a=i(e(37)),s=i(e(25)),l=i(e(35)),u=i(e(34)),c=i(e(38)),d=i(e(55)),f=e(33),h=e(54),p=e(51),v={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=v.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.default.prototype.destroy.call(this),this.state=v.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,n=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[n]=i,this.videoTrackCC=n,h.logger.log("InitPTS for cc:"+n+" found from video track:"+i),this.state===v.WAITING_INIT_PTS&&this.tick())}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(h.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=v.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=v.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=v.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,n,i=this.hls,r=i.config;switch(this.state){case v.ERROR:case v.PAUSED:case v.BUFFER_FLUSHING:break;case v.STARTING:this.state=v.WAITING_TRACK,this.loadedmetadata=!1;break;case v.IDLE:var s=this.tracks;if(!s)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var u=this.mediaBuffer?this.mediaBuffer:this.media,c=a.default.bufferInfo(u,e,r.maxBufferHole),d=c.len,_=c.end,g=this.fragPrevious,y=r.maxMaxBufferLength,m=this.audioSwitch,E=this.trackId;if((d<y||m)&&E<s.length){if(void 0===(n=s[E].details)){this.state=v.WAITING_TRACK;break}if(!m&&!n.live&&g&&g.sn===n.endSN&&(!this.media.seeking||this.media.duration-_<g.duration/2)){this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),this.state=v.ENDED;break}var b=n.fragments,S=b.length,T=b[0].start,k=b[S-1].start+b[S-1].duration,w=void 0;if(m)if(n.live&&!n.PTSKnown)h.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),_=0;else if(_=e,n.PTSKnown&&e<T){if(!(c.end>T||c.nextStart))return;h.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(n.initSegment&&!n.initSegment.data)w=n.initSegment;else if(_<=T){if(w=b[0],null!==this.videoTrackCC&&w.cc!==this.videoTrackCC&&(w=(0,p.findFragWithCC)(b,this.videoTrackCC)),n.live&&w.loadIdx&&w.loadIdx===this.fragLoadIdx){var O=c.nextStart?c.nextStart:T;return h.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(O+.05)),void(this.media.currentTime=O+.05)}}else{var A=void 0,I=r.maxFragLookUpTolerance,R=g?b[g.sn-b[0].sn+1]:void 0,D=function(e){var t=Math.min(I,e.duration);return e.start+e.duration-t<=_?1:e.start-t>_&&e.start?-1:0};_<k?(_>k-I&&(I=0),A=R&&!D(R)?R:o.default.search(b,D)):A=b[S-1],A&&(w=A,T=A.start,g&&w.level===g.level&&w.sn===g.sn&&(w.sn<n.endSN?(w=b[w.sn+1-n.startSN],h.logger.log("SN just loaded, load next one: "+w.sn)):w=null))}if(w)if(w.decryptdata&&null!=w.decryptdata.uri&&null==w.decryptdata.key)h.logger.log("Loading key for "+w.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+E),this.state=v.KEY_LOADING,i.trigger(l.default.KEY_LOADING,{frag:w});else{if(h.logger.log("Loading "+w.sn+", cc: "+w.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+E+", currentTime:"+e+",bufferEnd:"+_.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,w.loadCounter){w.loadCounter++;var P=r.fragLoadingLoopThreshold;if(w.loadCounter>P&&Math.abs(this.fragLoadIdx-w.loadIdx)<P)return void i.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:w})}else w.loadCounter=1;w.loadIdx=this.fragLoadIdx,this.fragCurrent=w,this.startFragRequested=!0,isNaN(w.sn)||(this.nextLoadPosition=w.start+w.duration),i.trigger(l.default.FRAG_LOADING,{frag:w}),this.state=v.FRAG_LOADING}}break;case v.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=v.IDLE);break;case v.FRAG_LOADING_WAITING_RETRY:var C=performance.now(),L=this.retryDate,x=(u=this.media)&&u.seeking;(!L||C>=L||x)&&(h.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=v.IDLE);break;case v.WAITING_INIT_PTS:var N=this.videoTrackCC;if(void 0===this.initPTS[N])break;var M=this.waitingFragment;if(M){var F=M.frag.cc;N!==F?(t=this.tracks[this.trackId]).details&&t.details.live&&(h.logger.warn("Waiting fragment CC ("+F+") does not match video track CC ("+N+")"),this.waitingFragment=null,this.state=v.IDLE):(this.state=v.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=v.IDLE;break;case v.STOPPED:case v.FRAG_LOADING:case v.PARSING:case v.PARSED:case v.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===v.ENDED&&(this.state=v.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){h.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=v.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=v.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,n=e.id,i=this.tracks[n],r=t.totalduration,o=0;if(h.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var a=i.details;a&&t.fragments.length>0?(c.default.mergeDetails(a,t),o=t.fragments[0].start,t.PTSKnown?h.logger.log("live audio playlist sliding:"+o.toFixed(3)):h.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,h.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(h.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===v.WAITING_TRACK&&(this.state=v.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===v.KEY_LOADING&&(this.state=v.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===v.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,o=r.totalduration,a=t.level,u=t.sn,c=t.cc,d=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",f=this.stats=e.stats;if("initSegment"===u)this.state=v.IDLE,f.tparsed=f.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:f,frag:t,id:"audio"}),this.tick();else{this.state=v.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new s.default(this.hls,"audio"));var p=this.initPTS[c],_=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==p){this.pendingBuffering=!0,h.logger.log("Demuxing "+u+" of ["+r.startSN+" ,"+r.endSN+"],track "+a);this.demuxer.push(e.payload,_,d,null,t,o,!1,p)}else h.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+r.startSN+" ,"+r.endSN+"],track "+a),this.waitingFragment=e,this.state=v.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===v.PARSING){var i=e.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,i),h.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,a))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===v.PARSING){var r=this.trackId,o=this.tracks[r],a=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),h.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),c.default.updateFragPTSDTS(o.details,n,e.startPTS,e.endPTS);var s=this.audioSwitch,u=this.media,d=!1;if(s&&u)if(u.readyState){var f=u.currentTime;h.logger.log("switching audio track : currentTime:"+f),f>=e.startPTS&&(h.logger.log("switching audio track : flushing all audio"),this.state=v.BUFFER_FLUSHING,a.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,a.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,a.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r});var p=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})}),!d&&p.length&&(p.forEach(function(e){t.state===v.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(l.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===v.PARSING&&(this.stats.tparsed=performance.now(),this.state=v.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==v.PARSING&&t!==v.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==v.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("audio buffered : "+d.default.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=v.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);h.logger.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=v.FRAG_LOADING_WAITING_RETRY}else h.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=v.ERROR}break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==v.ERROR&&(this.state=e.fatal?v.ERROR:v.IDLE,h.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case f.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===v.PARSING||this.state===v.PARSED)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&&a.default.isBuffered(o,s)&&a.default.isBuffered(o,s+.5)){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,h.logger.warn("audio:reduce max buffer length to "+u.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*u.fragLoadingLoopThreshold),this.state=v.IDLE}else h.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=v.BUFFER_FLUSHING,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(h.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=v.PARSED):(this.state=v.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}();n.default=_},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,51:51,54:54,55:55}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(54),l=e(33),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.AUDIO_TRACK_LOADED,o.default.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){this.cleanTimer(),a.default.prototype.destroy.call(this)}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onError",value:function(e){e.fatal&&e.type===l.ErrorTypes.NETWORK_ERROR&&this.cleanTimer()}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(o.default.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(e){if(e.default&&!i)return t.audioTrack=r,void(i=!0);r++}),!1===i&&n.length&&(s.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(s.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,s.logger.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,i=t.type,r=t.url,a={id:e,type:i,url:r};n.trigger(o.default.AUDIO_TRACK_SWITCH,a),n.trigger(o.default.AUDIO_TRACK_SWITCHING,a);var l=t.details;!r||void 0!==l&&!0!==l.live||(s.logger.log("(re)loading playlist for audioTrack "+e),n.trigger(o.default.AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,s.logger.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,i=t.details;!n||void 0!==i&&!0!==i.live||(s.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(o.default.AUDIO_TRACK_LOADING,{url:n,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}();n.default=u},{33:33,34:34,35:35,54:54}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(54),l=e(33),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_RESET,o.default.BUFFER_APPENDING,o.default.BUFFER_CODECS,o.default.BUFFER_EOS,o.default.BUFFER_FLUSHING,o.default.LEVEL_PTS_UPDATED,o.default.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-e.start)>.1){var r=i.updating;try{i.abort()}catch(e){r=!0,s.logger.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,i=0;e.altAudio&&(t||n)&&(i=(t?1:0)+(n?1:0),s.logger.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){s.logger.log("media source opened"),this.hls.trigger(o.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){s.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){s.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(o.default.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var i in e)if(!t[i]){var r=e[i],a=r.levelCodec||r.codec,u=r.container+";codecs="+a;s.logger.log("creating sourceBuffer("+u+")");try{var c=t[i]=n.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[i]={codec:a,container:r.container},r.buffer=c}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:u})}}this.hls.trigger(o.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,n=e.type;for(var i in t)n&&i!==n||t[i].ended||(t[i].ended=!0,s.logger.log(i+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var i=e[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}s.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,i=this._levelDuration;if(null!==i&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var r in n)if(n[r].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var o=e.duration;(i>this._msDuration&&i>o||o===1/0||isNaN(o))&&(s.logger.log("Updating mediasource duration to "+i.toFixed(3)),this._msDuration=t.duration=i)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n)t+=n[i].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=t[i.type];r?r.updating?n.unshift(i):(r.ended=!1,this.parent=i.parent,r.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){s.logger.error("error while trying to append buffer:"+t.message),n.unshift(i);var a={type:l.ErrorTypes.MEDIA_ERROR,parent:i.parent};if(22===t.code)return this.segments=[],a.details=l.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(o.default.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0,void e.trigger(o.default.ERROR,a);a.fatal=!1,e.trigger(o.default.ERROR,a)}}}}},{key:"flushBuffer",value:function(e,t,n){var i,r,o,a,l,u,c=this.sourceBuffer;if(Object.keys(c).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in c)if(!n||d===n){if(i=c[d],i.ended=!1,i.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(o=i.buffered.start(r),a=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(l=e,u=t):(l=Math.max(o,e),u=Math.min(a,t)),Math.min(u,a)-l>.5)return this.flushBufferCounter++,s.logger.log("flush "+d+" ["+l+","+u+"], of ["+o+","+a+"], pos:"+this.media.currentTime),i.remove(l,u),!1}catch(e){s.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0}}]),t}();n.default=u},{33:33,34:34,35:35,54:54}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.FPS_DROP_LEVEL_CAPPING,o.default.MEDIA_ATTACHING,o.default.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var n=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,r){return t.isLevelAllowed(r,n.restrictedLevels)&&r<=e});return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,n){if(!e||e&&!e.length)return-1;for(var i=e.length-1,r=0;r<e.length;r+=1){var o=e[r];if((o.width>=t||o.height>=n)&&function(e,t){return!t||e.width!==t.width||e.height!==t.height}(o,e[r+1])){i=r;break}}return i}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}();n.default=s},{34:34,35:35}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(54),l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){"function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,l=t-this.lastDecodedFrames,u=1e3*a/r,c=this.hls;if(c.trigger(o.default.FPS_DROP,{currentDropped:a,currentDecoded:l,totalDroppedFrames:n}),u>0&&a>c.config.fpsDroppedMonitoringThreshold*l){var d=c.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(o.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,c.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}();n.default=l},{34:34,35:35,54:54}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=i(e(27)),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,n=e.samples,i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var o=s.default.getID3Frames(n[r].data);if(o){var a=n[r].pts,l=r<n.length-1?n[r+1].pts:t.endPTS;a===l&&(l+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!s.default.isTimeStampFrame(c)){var d=new i(a,l,"");d.value=c,this.id3Track.addCue(d)}}}}}}]),t}();n.default=l},{27:27,34:34,35:35}],12:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(54),l=e(33),u=i(e(37)),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MANIFEST_LOADED,o.default.LEVEL_LOADED,o.default.FRAG_LOADED,o.default.ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=-1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){this.cleanTimer(),this._manualLevel=-1}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,n=[],i=[],r={},a=!1,u=!1,c=this.hls,d=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),f=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(a=!0),d&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(u=!0);var t=r[e.bitrate];void 0===t?(r[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),a&&u?n.forEach(function(e){e.videoCodec&&i.push(e)}):i=n,(i=i.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||f("audio",t))&&(!n||f("video",n))})).length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var h=0;h<i.length;h++)if(i[h].bitrate===t){this._firstLevel=h,s.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}c.trigger(o.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:a,altAudio:e.audioTracks.length>0})}else c.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:c.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this._level!==e){s.logger.log("switching to level "+e),this._level=e;var i=t[e];i.level=e,n.trigger(o.default.LEVEL_SWITCH,i),n.trigger(o.default.LEVEL_SWITCHING,i)}var r=t[e],a=r.details;if(!a||!0===a.live){var u=r.urlId;n.trigger(o.default.LEVEL_LOADING,{url:r.url[u],level:e,id:u})}}else n.trigger(o.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(e.fatal)e.type===l.ErrorTypes.NETWORK_ERROR&&this.cleanTimer();else{var t=e.details,n=this.hls,i=void 0,r=void 0,o=!1;switch(t){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=e.context.level,o=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:i=e.level}if(void 0!==i){(r=this._levels[i]).loadError?r.loadError++:r.loadError=1;var a=r.url.length;if(a>1&&r.loadError<a)r.urlId=(r.urlId+1)%a,r.details=void 0,s.logger.warn("level controller,"+t+" for level "+i+": switching to redundant stream id "+r.urlId);else{if(-1===this._manualLevel&&i)s.logger.warn("level controller,"+t+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,i-1);else if(r&&r.details&&r.details.live)s.logger.warn("level controller,"+t+" on live stream, discard"),o&&(this._level=void 0);else if(t===l.ErrorDetails.LEVEL_LOAD_ERROR||t===l.ErrorDetails.LEVEL_LOAD_TIMEOUT){var c=n.media;if(c&&u.default.isBuffered(c,c.currentTime)&&u.default.isBuffered(c,c.currentTime+.5)){var d=n.config.levelLoadingRetryDelay;s.logger.warn("level controller,"+t+", but media buffered, retry in "+d+"ms"),this.timer=setTimeout(this.ontick,d),e.levelRetry=!0}else s.logger.error("cannot recover "+t+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var n=this._levels[t.level];n&&(n.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var n=this._levels[t];n.loadError=0;var i=e.details;if(i.live){var r=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),o=n.details;o&&i.endSN===o.endSN&&(r/=2,s.logger.log("same live playlist, reload twice faster")),r-=performance.now()-e.stats.trequest,r=Math.max(1e3,Math.round(r)),s.logger.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var n=t.urlId;this.hls.trigger(o.default.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}();n.default=c},{33:33,34:34,35:35,37:37,54:54}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(48)),a=i(e(37)),s=i(e(25)),l=i(e(35)),u=i(e(34)),c=i(e(38)),d=i(e(55)),f=e(33),h=e(54),p={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=p.STOPPED,n.ontick=n.tick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.default.prototype.destroy.call(this),this.state=p.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(h.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=p.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=p.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=p.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case p.ERROR:break;case p.BUFFER_FLUSHING:this.fragLoadError=0;break;case p.IDLE:this._doTickIdle();break;case p.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=p.IDLE);break;case p.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=p.IDLE);break;case p.ERROR:case p.STOPPED:case p.FRAG_LOADING:case p.PARSING:case p.PARSED:case p.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,n=this.media;if(void 0===this.levelLastLoaded||n||!this.startFragRequested&&t.startFragPrefetch){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,o=this.levels[r];if(o){var s=o.bitrate,u=void 0;u=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,u=Math.min(u,t.maxMaxBufferLength);var c=a.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,t.maxBufferHole),d=c.len;if(!(d>=u)){h.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var f=o.details;if(void 0===f||f.live&&this.levelLastLoaded!==r)this.state=p.WAITING_LEVEL;else{var v=this.fragPrevious;if(!f.live&&v&&v.sn===f.endSN&&d&&!c.nextStart){if(Math.min(n.duration,v.start+v.duration)-Math.max(c.end,v.start)<=Math.max(.2,v.duration)){var _={};return this.altAudio&&(_.type="video"),this.hls.trigger(l.default.BUFFER_EOS,_),void(this.state=p.ENDED)}}this._fetchPayloadOrEos(i,c,f)}}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,n){var i=this.fragPrevious,r=this.level,o=n.fragments,a=o.length;if(0!==a){var s=o[0].start,l=o[a-1].start+o[a-1].duration,u=t.end,c=void 0;if(n.initSegment&&!n.initSegment.data)c=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void h.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(c=this._ensureFragmentAtLivePoint(n,u,s,l,i,o,a)))return}else u<s&&(c=o[0]);c||(c=this._findFragment(s,i,a,o,u,l,n)),c&&this._loadFragmentOrKey(c,r,n,e,u)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,n,i,r,a,s){var l=this.hls.config,u=this.media,c=void 0,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-l.maxFragLookUpTolerance,i-d)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);h.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,u&&u.readyState&&u.duration>f&&(u.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>i&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r){var p=r.sn+1;if(p>=e.startSN&&p<=e.endSN){var v=a[p-e.startSN];r.cc===v.cc&&(c=v,h.logger.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=o.default.search(a,function(e){return r.cc-e.cc}))&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=a[Math.min(s-1,Math.round(s/2))],h.logger.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c}},{key:"_findFragment",value:function(e,t,n,i,r,a,s){var l=this.hls.config,u=void 0,c=void 0,d=l.maxFragLookUpTolerance,f=t?i[t.sn-i[0].sn+1]:void 0,p=function(e){var t=Math.min(d,e.duration);return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(r<a?(r>a-d&&(d=0),c=f&&!p(f)?f:o.default.search(i,p)):c=i[n-1],c){var v=(u=c).sn-s.startSN,_=t&&u.level===t.level,g=i[v-1],y=i[v+1];if(t&&u.sn===t.sn)if(_&&!u.backtracked)if(u.sn<s.endSN){var m=t.deltaPTS;m&&m>l.maxBufferHole&&t.dropped&&v?(u=g,h.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=y,h.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(y&&y.backtracked?(h.logger.warn("Already backtracked from fragment "+y.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+y.sn),u=y):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,g?(g.loadCounter&&g.loadCounter--,(u=g).backtracked=!0):v&&(u=null)))}return u}},{key:"_loadFragmentOrKey",value:function(e,t,n,i,r){var o=this.hls,a=o.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(h.logger.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var u=a.fragLoadingLoopThreshold;if(e.loadCounter>u&&Math.abs(this.fragLoadIdx-e.loadIdx)<u)return void o.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=o.autoLevelEnabled,e.bitrateTest=this.bitrateTest,o.trigger(l.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new s.default(o,"main")),void(this.state=p.FRAG_LOADING)}h.logger.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=p.KEY_LOADING,o.trigger(l.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return o.default.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),a.default.isBuffered(n,t)?e=this.getBufferedFrag(t):a.default.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}}},{key:"immediateLevelSwitch",value:function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,n=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(n=this.getBufferedFrag(e.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var r=this.hls.nextLoadLevel,o=this.levels[r],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((i=this.getBufferedFrag(e.currentTime+t))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=p.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,n)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||h.logger.log("media seeking to "+t.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:e,r=a.default.bufferInfo(i,t,this.config.maxBufferHole);if(this.state===p.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var s=n.maxFragLookUpTolerance,l=o.start-s,u=o.start+o.duration+s;t<l||t>u?(o.loader&&(h.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=p.IDLE):h.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===p.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=p.IDLE);e&&(this.lastCurrentTime=t),this.state!==p.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||h.logger.log("media seeked to "+t.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){h.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,n=!1,i=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,n=e.level,i=this.levels[n],r=t.totalduration,o=0;if(h.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),this.levelLastLoaded=n,t.live){var a=i.details;a&&t.fragments.length>0?(c.default.mergeDetails(a,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,a),t.PTSKnown?h.logger.log("live playlist sliding:"+o.toFixed(3)):h.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,h.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,this.hls.trigger(l.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(o,t),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(h.logger.log("negative start time offset "+s+", count from end of last fragment"),s=o+r+s),h.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===p.WAITING_LEVEL&&(this.state=p.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===p.KEY_LOADING&&(this.state=p.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===p.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var i=e.stats,r=this.levels[t.level],o=r.details;if(h.logger.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=p.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=p.IDLE,i.tparsed=i.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=p.PARSING;var a=o.totalduration,u=t.level,c=t.sn,d=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,h.logger.log("Parsing "+c+" of ["+o.startSN+" ,"+o.endSN+"],level "+u+", cc "+t.cc);var f=this.demuxer;f||(f=this.demuxer=new s.default(this.hls,"main"));var v=this.media,_=!(v&&v.seeking)&&(o.PTSKnown||!o.live),g=o.initSegment?o.initSegment.data:[];f.push(e.payload,g,d,r.videoCodec,t,a,_,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===p.PARSING){var i,r,o=e.tracks;if(o.audio&&this.altAudio&&delete o.audio,r=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(a="mp4a.40.2",h.logger.log("Android: force audio codec to "+a)),r.levelCodec=a,r.id=e.id}(r=o.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,o);for(i in o){r=o[i],h.logger.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===p.PARSING){var r=this.levels[this.level],o=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),h.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped){if(!o.backtracked)return h.logger.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=p.IDLE,this.fragPrevious=o,void this.tick();h.logger.warn("Already backtracked on this fragment, appending with the gap")}else o.backtracked=!1;var a=c.default.updateFragPTSDTS(r.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(l.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===p.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(l.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===p.PARSING&&(this.stats.tparsed=performance.now(),this.state=p.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=p.IDLE}var r=this.hls;r.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,n=void 0,i=void 0,r=!1;for(var o in t){var a=t[o];"main"===a.id?(i=o,n=a,"video"===o&&(this.videoBuffer=t[o].buffer)):r=!0}r&&n?(h.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==p.PARSING&&t!==p.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==p.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+d.default.toString(t.buffered));var n=this._bufferedFrags.filter(function(e){return a.default.isBuffered(t,(e.startPTS+e.endPTS)/2)});n.push(e),this._bufferedFrags=n.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state=p.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=this.media,i=n&&a.default.isBuffered(n,n.currentTime)&&a.default.isBuffered(n,n.currentTime+.5);switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var o=this.config;if(r<=o.fragLoadingMaxRetry||i||t.autoLevel&&t.level){this.fragLoadError=r,t.loadCounter=0;var s=Math.min(Math.pow(2,r-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=p.FRAG_LOADING_WAITING_RETRY}else h.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=p.ERROR}break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(i?(this._reduceMaxBufferLength(t.duration),this.state=p.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=p.ERROR));break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==p.ERROR&&(e.fatal?(this.state=p.ERROR,h.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==p.WAITING_LEVEL||(this.state=p.IDLE));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==p.PARSING&&this.state!==p.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=p.IDLE):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,r=i.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var o=e.seeking?n:this.startPosition,s=a.default.isBuffered(i,o),u=r.start(0);(n!==o||!s&&Math.abs(o-u)<t.maxSeekHole)&&(h.logger.log("target start position:"+o),s||(o=u,h.logger.log("target start position not buffered, seek to buffered.start(0) "+o)),h.logger.log("adjust currentTime from "+n+" to "+o),e.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=a.default.bufferInfo(e,n,0),d=!(e.paused||e.ended||0===e.buffered.length);if(n!==this.lastCurrentTime)this.stallReported&&(h.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(d){var p=performance.now(),v=this.hls;if(this.stalled){var _=p-this.stalled,g=c.len,y=this.nudgeRetry||0;if(g<=.5&&_>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,h.logger.warn("playback stalling in low buffer @"+n),v.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}));var m=c.nextStart,E=m-n;if(m&&E<t.maxSeekHole&&E>0){this.nudgeRetry=++y;var b=y*t.nudgeOffset;h.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+b),e.currentTime=m+b,this.stalled=void 0,v.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+b-n})}}else if(g>.5&&_>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,h.logger.warn("playback stalling in high buffer @"+n),v.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=void 0,this.nudgeRetry=++y,y<t.nudgeMaxRetry){var S=e.currentTime,T=S+y*t.nudgeOffset;h.logger.log("adjust currentTime from "+S+" to "+T),e.currentTime=T,v.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.logger.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),v.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=p.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return a.default.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=p.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("main stream:"+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}();n.default=v},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,54:54,55:55}],14:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(54),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.ERROR,o.default.SUBTITLE_TRACKS_UPDATED,o.default.SUBTITLE_TRACK_SWITCH,o.default.SUBTITLE_TRACK_LOADED,o.default.SUBTITLE_FRAG_PROCESSED));return n.config=e.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.currentTrackId=-1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(o.default.FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;s.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this.vttFragSNsProcessed[e.id],n=this.vttFragQueues[e.id],i=this.currentlyProcessing?this.currentlyProcessing.sn:-1;e.details.fragments.forEach(function(r){(function(e){return t.indexOf(e.sn)>-1})(r)||r.sn===i||function(e){return n.some(function(t){return t.sn===e.sn})}(r)||(r.trackId=e.id,n.push(r))}),this.nextFrag()}}]),t}();n.default=l},{34:34,35:35,54:54}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(54),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"_onTextTracksChanged",value:function(){if(this.media){for(var e=-1,t=function(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}}},{key:"destroy",value:function(){a.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.media.textTracks.addEventListener("change",this.trackChangeListener))}},{key:"onMediaDetaching",value:function(){this.media&&(this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.subtitles||[],i=!1;this.tracks=n,this.trackId=-1,this.hls.trigger(o.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.subtitleTrack=e.id,i=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(s.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(s.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,s.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(o.default.SUBTITLE_TRACK_SWITCH,{id:e});var n=t.details;void 0!==n&&!0!==n.live||(s.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}();n.default=l},{34:34,35:35,54:54}],16:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(e(35)),s=i(e(34)),l=i(e(49)),u=i(e(58)),c=e(54),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a.default.MEDIA_ATTACHING,a.default.MEDIA_DETACHING,a.default.FRAG_PARSING_USERDATA,a.default.MANIFEST_LOADING,a.default.MANIFEST_LOADED,a.default.FRAG_LOADED,a.default.LEVEL_SWITCHING,a.default.INIT_PTS_FOUND));if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var i=n,o=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},s={newCue:function(e,t,n){if(!i.textTrack1){var a=i.getExistingTrack("1");if(a)i.textTrack1=a,r(i.textTrack1),o(i.textTrack1,i.media);else{var s=i.createTextTrack("captions",i.config.captionsTextTrack1Label,i.config.captionsTextTrack1LanguageCode);s&&(s.textTrack1=!0,i.textTrack1=s)}}i.addCues("textTrack1",e,t,n)}},u={newCue:function(e,t,n){if(!i.textTrack2){var a=i.getExistingTrack("2");if(a)i.textTrack2=a,r(i.textTrack2),o(i.textTrack2,i.media);else{var s=i.createTextTrack("captions",i.config.captionsTextTrack2Label,i.config.captionsTextTrack1LanguageCode);s&&(s.textTrack2=!0,i.textTrack2=s)}}i.addCues("textTrack2",e,t,n)}};n.cea608Parser=new l.default(0,s,u)}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"addCues",value:function(e,t,n,i){for(var r=this.cueRanges,o=!1,a=r.length;a--;){var s=r[a],l=function(e,t,n,i){return Math.min(t,i)-Math.max(e,n)}(s[0],s[1],t,n);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],n),o=!0,l/(n-t)>.5))return}o||r.push([t,n]),this.Cues.newCue(this[e],t,n,i)}},{key:"onInitPtsFound",value:function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(!0===i["textTrack"+e])return i}return null}},{key:"createTextTrack",value:function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)}},{key:"destroy",value:function(){s.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){r(this.textTrack1),r(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)r(t[n])}}},{key:"onManifestLoaded",value:function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var r=void 0;if(i<n.length){var o=n[i];(function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)})(o,e)&&(r=o)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),r.mode=e.default?"showing":"hidden",t.textTracks.push(r)})}}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t=e.frag,n=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var s=this.textTracks,l=this.hls;u.default.parse(n,this.initPTS,o,t.cc,function(e){var n=s[t.trackId];e.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(i){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),l.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){c.logger.log("Failed to parse VTT cue: "+e),l.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}}},{key:"extractCea608Data",value:function(e){for(var t,n,i,r,o,a=31&e[0],s=2,l=[],u=0;u<a;u++)t=e[s++],n=127&e[s++],i=127&e[s++],r=0!=(4&t),o=3&t,0===n&&0===i||r&&0===o&&(l.push(n),l.push(i));return l}}]),t}();n.default=d},{34:34,35:35,49:49,54:54,58:58}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=n}return i(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();n.default=r},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var _=p^p<<1^p<<2^p<<3^p<<4;_=_>>>8^255&_^99,e[h]=_,t[_]=h;var g=f[h],y=f[g],m=f[y],E=257*f[_]^16843008*_;i[h]=E<<24|E>>>8,r[h]=E<<16|E>>>16,o[h]=E<<8|E>>>24,a[h]=E,E=16843009*m^65537*y^257*g^16843008*h,l[_]=E<<24|E>>>8,u[_]=E<<16|E>>>16,c[_]=E<<8|E>>>24,d[_]=E,h?(h=g^f[f[f[m^g]]],p^=f[f[p]]):h=p=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),c=this.sBox,d=this.rcon,f=this.invSubMix,h=f[0],p=f[1],v=f[2],_=f[3],g=void 0,y=void 0;for(a=0;a<o;a++)a<r?g=l[a]=t[a]:(y=g,a%r==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[a/r|0]<<24):r>6&&a%r==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[a]=g=(l[a-r]^y)>>>0);for(s=0;s<o;s++)a=o-s,y=3&s?l[a]:l[a-4],u[s]=s<4||a<=4?y:h[c[y>>>24]]^p[c[y>>>16&255]]^v[c[y>>>8&255]]^_[c[255&y]],u[s]=u[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var i,r,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],v=h[1],_=h[2],g=h[3],y=new Int32Array(e),m=new Int32Array(y.length),E=void 0,b=void 0,S=void 0,T=void 0,k=void 0,w=void 0,O=void 0,A=void 0,I=void 0,R=void 0,D=void 0,P=void 0,C=this.networkToHostOrderSwap;t<y.length;){for(I=C(y[t]),R=C(y[t+1]),D=C(y[t+2]),P=C(y[t+3]),k=I^a[0],w=P^a[1],O=D^a[2],A=R^a[3],i=4,r=1;r<o;r++)E=u[k>>>24]^c[w>>16&255]^d[O>>8&255]^f[255&A]^a[i],b=u[w>>>24]^c[O>>16&255]^d[A>>8&255]^f[255&k]^a[i+1],S=u[O>>>24]^c[A>>16&255]^d[k>>8&255]^f[255&w]^a[i+2],T=u[A>>>24]^c[k>>16&255]^d[w>>8&255]^f[255&O]^a[i+3],k=E,w=b,O=S,A=T,i+=4;E=s[k>>>24]<<24^s[w>>16&255]<<16^s[O>>8&255]<<8^s[255&A]^a[i],b=s[w>>>24]<<24^s[O>>16&255]<<16^s[A>>8&255]<<8^s[255&k]^a[i+1],S=s[O>>>24]<<24^s[A>>16&255]<<16^s[k>>8&255]<<8^s[255&w]^a[i+2],T=s[A>>>24]<<24^s[k>>16&255]<<16^s[w>>8&255]<<8^s[255&O]^a[i+3],i+=3,m[t]=C(E^p),m[t+1]=C(T^v),m[t+2]=C(S^_),m[t+3]=C(b^g),p=I,v=R,_=D,g=P,t+=4}return m.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();n.default=r},{}],19:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(17)),a=i(e(20)),s=i(e(18)),l=e(33),u=e(54),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return r(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,n,i){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(u.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new s.default),l.expandKey(t),i(l.decrypt(e,0,n))}else{this.logEnabled&&(u.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a.default(c,t)),this.fastAesKey.expandKey().then(function(a){new o.default(c,n).decrypt(e,a).catch(function(o){r.onWebCryptoError(o,e,t,n,i)}).then(function(e){i(e)})}).catch(function(o){r.onWebCryptoError(o,e,t,n,i)})}}},{key:"onWebCryptoError",value:function(e,t,n,i,r){this.config.enableSoftwareAES?(u.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(u.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();n.default=c},{17:17,18:18,20:20,33:33,54:54}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=n}return i(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();n.default=r},{}],21:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(22)),a=e(54),s=i(e(27)),l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.remuxer=n}return r(e,[{key:"resetInitSegment",value:function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,i){for(var r=this._audioTrack,l=s.default.getID3Data(e,0),u=90*s.default.getTimeStamp(l),c=0,d=u,f=e.length,h=l.length,p=[{pts:d,dts:d,data:l}];h<f-1;)if(o.default.isHeader(e,h)&&h+5<f){o.default.initTrackConfig(r,this.observer,e,h,r.manifestCodec);var v=o.default.appendFrame(r,e,h,u,c);if(!v){a.logger.log("Unable to parse AAC frame");break}h+=v.length,d=v.sample.pts,c++}else s.default.isHeader(e,h)?(l=s.default.getID3Data(e,h),p.push({pts:d,dts:d,data:l}),h+=l.length):h++;this.remuxer.remux(r,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,n,i)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,i=s.default.getID3Data(e,0);if(i&&void 0!==s.default.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(o.default.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1}}]),e}();n.default=l},{22:22,27:27,54:54}],22:[function(e,t,n){"use strict";var i=e(54),r=e(33),o={getAudioConfig:function(e,t,n,o){var a,s,l,u,c,d=navigator.userAgent.toLowerCase(),f=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[n+2])>>>6),!((s=(60&t[n+2])>>>2)>h.length-1))return u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,i.logger.log("manifest codec:"+o+",ADTS data:type:"+a+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+u),/firefox/i.test(d)?s>=6?(a=5,c=new Array(4),l=s-3):(a=2,c=new Array(2),l=s):-1!==d.indexOf("android")?(a=2,c=new Array(2),l=s):(a=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&s>=6?l=s-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(s>=6&&1===u||/vivaldi/i.test(d))||!o&&1===u)&&(a=2,c=new Array(2)),l=s)),c[0]=a<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=u<<3,5===a&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:u,codec:"mp4a.40."+a,manifestCodec:f};e.trigger(Event.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.getHeaderLength(e,t);t+5<e.length&&(n=this.getFullFrameLength(e,t));var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1},initTrackConfig:function(e,t,n,r,o){if(!e.samplerate){var a=this.getAudioConfig(t,n,r,o);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,i.logger.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,n,i,r){var o=this.getFrameDuration(e.samplerate),a=this.parseFrameHeader(t,n,i,r,o);if(a){var s=a.stamp,l=a.headerLength,u=a.frameLength,c={unit:t.subarray(n+l,n+l+u),pts:s,dts:s};return e.samples.push(c),e.len+=u,{sample:c,length:u+l}}},parseFrameHeader:function(e,t,n,i,r){var o,a,s,l=e.length;if(o=this.getHeaderLength(e,t),a=this.getFullFrameLength(e,t),(a-=o)>0&&t+o+a<=l)return s=n+i*r,{headerLength:o,frameLength:a,stamp:s}}};t.exports=o},{33:33,54:54}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=e(33),s=i(e(19)),l=i(e(21)),u=i(e(29)),c=i(e(32)),d=i(e(28)),f=i(e(45)),h=i(e(46)),p=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.typeSupported=n,this.config=i,this.vendor=r}return r(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,n,i,r,a,l,u,c,d,f,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new s.default(this.observer,this.config));var v,_=this;try{v=performance.now()}catch(e){v=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var s;try{s=performance.now()}catch(e){s=Date.now()}_.observer.trigger(o.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:s}}),_.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,r,a,l,u,c,d,f,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,r,a,l,u,c,d,f,h)}},{key:"pushDecrypted",value:function(e,t,n,i,r,s,p,v,_,g,y,m){var E=this.demuxer;if(!E||p&&!this.probe(e)){for(var b=this.observer,S=this.typeSupported,T=this.config,k=[{demux:l.default,remux:f.default},{demux:d.default,remux:f.default},{demux:c.default,remux:f.default},{demux:u.default,remux:h.default}],w=0,O=k.length;w<O;w++){var A=k[w],I=A.demux.probe;if(I(e)){var R=this.remuxer=new A.remux(b,T,S,this.vendor);E=new A.demux(b,R,T,S),this.probe=I;break}}if(!E)return void b.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var D=this.remuxer;(p||v)&&(E.resetInitSegment(n,i,r,g),D.resetInitSegment()),p&&(E.resetTimeStamp(m),D.resetTimeStamp(m)),"function"==typeof E.setDecryptData&&E.setDecryptData(t),E.append(e,s,_,y)}}]),e}();n.default=p},{19:19,21:21,28:28,29:29,32:32,33:33,35:35,45:45,46:46}],24:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(23)),o=i(e(35)),a=e(54),s=i(e(1));n.default=function(e){var t=new s.default;t.trigger=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new r.default(t,o.typeSupported,s,o.vendor);try{(0,a.enableLogs)(!0===s.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(o.default.FRAG_DECRYPTED,n),t.on(o.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(o.default.FRAG_PARSED,n),t.on(o.default.ERROR,n),t.on(o.default.FRAG_PARSING_METADATA,n),t.on(o.default.FRAG_PARSING_USERDATA,n),t.on(o.default.INIT_PTS_FOUND,n),t.on(o.default.FRAG_PARSING_DATA,function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)})}},{1:1,23:23,35:35,54:54}],25:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(23)),s=i(e(24)),l=e(54),u=e(33),c=i(e(1)),d=function(){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=n,this.id=i;var r=this.observer=new c.default,d=n.config;r.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.emit.apply(r,[e,e].concat(n))},r.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.removeListener.apply(r,[e].concat(n))};var f=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,n.trigger(e,t)}.bind(this);r.on(o.default.FRAG_DECRYPTED,f),r.on(o.default.FRAG_PARSING_INIT_SEGMENT,f),r.on(o.default.FRAG_PARSING_DATA,f),r.on(o.default.FRAG_PARSED,f),r.on(o.default.ERROR,f),r.on(o.default.FRAG_PARSING_METADATA,f),r.on(o.default.FRAG_PARSING_USERDATA,f),r.on(o.default.INIT_PTS_FOUND,f);var h={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(d.enableWorker&&"undefined"!=typeof Worker){l.logger.log("demuxing in webworker");var v=void 0;try{var _=e(3);v=this.w=_(s.default),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(e){n.trigger(o.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},v.postMessage({cmd:"init",typeSupported:h,vendor:p,id:i,config:JSON.stringify(d)})}catch(e){l.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),v&&URL.revokeObjectURL(v.objectURL),this.demuxer=new a.default(r,h,d,p),this.w=void 0}}else this.demuxer=new a.default(r,h,d,p)}return r(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,n,i,r,o,a,s){var u=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,d=r.decryptdata,f=this.frag,h=!(f&&r.cc===f.cc),p=!(f&&r.level===f.level),v=f&&r.sn===f.sn+1,_=!p&&v;if(h&&l.logger.log(this.id+":discontinuity detected"),p&&l.logger.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:_,duration:o,accurateTimeOffset:a,defaultInitPTS:s},[e]);else{var g=this.demuxer;g&&g.push(e,d,t,n,i,c,h,p,_,o,a,s)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case o.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}}]),t}();n.default=d},{1:1,23:23,24:24,3:3,33:33,35:35,54:54}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e(54),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,n=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(n+this.readEG()+256)%256),n=0===i?n:i}},{key:"readSPS",value:function(){var e,t,n,i,r,o,a,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),_=this.skipEG.bind(this),g=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),v(3),d(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var m=h();if(3===m&&v(1),g(),g(),v(1),p())for(o=3!==m?8:12,a=0;a<o;a++)p()&&y(a<6?16:64)}g();var E=h();if(0===E)h();else if(1===E)for(v(1),_(),_(),t=h(),a=0;a<t;a++)_();g(),v(1),n=h(),i=h(),0===(r=f(1))&&v(1),v(1),p()&&(s=h(),l=h(),u=h(),c=h());var b=[1,1];if(p()&&p()){switch(d()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[d()<<8|d(),d()<<8|d()]}}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-r)*(i+1)*16-(r?2:4)*(u+c),pixelRatio:b}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();n.default=o},{54:54}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(t,n){for(var i=n,r=0;e.isHeader(t,n);){r+=10;r+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(r+=10),n+=r}if(r>0)return t.subarray(i,i+r)}},{key:"_readSize",value:function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]}},{key:"getTimeStamp",value:function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:n,size:i,data:t.subarray(10,10+i)}}},{key:"getID3Frames",value:function(t){for(var n=0,i=[];e.isHeader(t,n);){for(var r=e._readSize(t,n+6),o=(n+=10)+r;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&i.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return i}},{key:"_decodeFrame",value:function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}}},{key:"_decodePrivFrame",value:function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}}},{key:"_decodeTextFrame",value:function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}}},{key:"_decodeURLFrame",value:function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}}},{key:"_utf8ArrayToStr",value:function(e){for(var t=void 0,n=void 0,i="",r=0,o=e.length;r<o;){var a=e[r++];switch(a>>4){case 0:return i;case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(a);break;case 12:case 13:t=e[r++],i+=String.fromCharCode((31&a)<<6|63&t);break;case 14:t=e[r++],n=e[r++],i+=String.fromCharCode((15&a)<<12|(63&t)<<6|(63&n)<<0)}}return i}}]),e}();n.default=r},{}],28:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(27)),a=e(54),s=i(e(30)),l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.remuxer=n}return r(e,[{key:"resetInitSegment",value:function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,i){for(var r=o.default.getID3Data(e,0),a=90*o.default.getTimeStamp(r),l=r.length,u=e.length,c=0,d=0,f=this._audioTrack,h=[{pts:a,dts:a,data:r}];l<u;)if(s.default.isHeader(e,l)){var p=s.default.appendFrame(f,e,l,a,c);if(!p)break;l+=p.length,d=p.sample.pts,c++}else o.default.isHeader(e,l)?(r=o.default.getID3Data(e,l),h.push({pts:d,dts:d,data:r}),l+=r.length):l++;this.remuxer.remux(f,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,i=o.default.getID3Data(e,0);if(i&&void 0!==o.default.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(s.default.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),e}();n.default=l},{27:27,30:30,54:54}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e(35)),o=Math.pow(2,32)-1,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.remuxer=n}return i(e,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(t,n,i,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t),s={};a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:i,initSegment:o?t:null}),this.observer.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)}},{key:"append",value:function(t,n,i,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),a=this.initData);var s=void 0,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(a,t);this.initPTS=l=u-n,this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(a,t,l),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,i,o,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){var n=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(n)>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n}},{key:"writeUint32",value:function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}},{key:"findBox",value:function(t,n){var i,r,o,a,s,l,u,c=[];if(t.data?(l=t.start,a=t.end,t=t.data):(l=0,a=t.byteLength),!n.length)return null;for(i=l;i<a;)r=e.readUint32(t,i),o=e.bin2str(t.subarray(i+4,i+8)),u=r>1?i+r:a,o===n[0]&&(1===n.length?c.push({data:t,start:i+8,end:u}):(s=e.findBox({data:t,start:i+8,end:u},n.slice(1))).length&&(c=c.concat(s))),i=u;return c}},{key:"parseInitSegment",value:function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var r=i.data[i.start],o=0===r?12:20,a=e.readUint32(i,o),s=e.findBox(t,["mdia","mdhd"])[0];if(s){r=s.data[s.start];var l=e.readUint32(s,o=0===r?12:20),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var c={soun:"audio",vide:"video"}[e.bin2str(u.data.subarray(u.start+8,u.start+12))];c&&(n[a]={timescale:l,type:c},n[c]={timescale:l,id:a})}}}}),n}},{key:"getStartDTS",value:function(t,n){var i,r,o;return i=e.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var r,o,a;return r=e.readUint32(i,4),o=t[r].timescale||9e4,a=e.findBox(n,["tfdt"]).map(function(t){var n,i;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i})[0],(a=a||1/0)/o})})),o=Math.min.apply(null,r),isFinite(o)?o:0}},{key:"offsetStartDTS",value:function(t,n,i){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var a=e.readUint32(r,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*s);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*s;var a=Math.floor(r/(o+1)),l=Math.floor(r%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,l)}})})})}}]),e}();n.default=a},{35:35}],30:[function(e,t,n){"use strict";var i={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=i+r*(10368e4/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=!!(2&e[t+2]);if(1!==n&&0!==o&&15!==o&&3!==a){var l=3===n?3-r:3===r?3:4,u=1e3*i.BitratesMap[14*l+o-1],c=3===n?0:2===n?1:2,d=i.SamplingRateMap[3*c+a],f=s?1:0;return{sampleRate:d,channelCount:e[t+3]>>6==3?1:2,frameLength:3===r?(3===n?12:6)*u/d+f<<2:(3===n?144:72)*u/d+f|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),i=4;n&&n.frameLength&&(i=n.frameLength);var r=t+i;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}};t.exports=i},{}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e(19)),o=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decryptdata=i,this.discardEPB=o,this.decrypter=new r.default(t,n)}return i(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,n,i){var r=e[t].unit,o=r.subarray(16,r.length-r.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),r.set(o,16),i||s.decryptAacSamples(e,t+1,n)})}},{key:"decryptAacSamples",value:function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e}},{key:"decryptAvcSample",value:function(e,t,n,i,r,o){var a=this.discardEPB(r.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){r.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,n+1,i)})}},{key:"decryptAvcSamples",value:function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var o=r[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,o,a),!a)return}}}}}]),e}();n.default=o},{19:19}],32:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(22)),a=i(e(30)),s=i(e(35)),l=i(e(26)),u=i(e(31)),c=e(54),d=e(33),f=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.typeSupported=r,this.remuxer=n,this.sampleAes=null}return r(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new u.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:i,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,i){var r,o,a,l,u,f=e.length,h=!1;this.contiguous=n;var p=this.pmtParsed,v=this._avcTrack,_=this._audioTrack,g=this._id3Track,y=v.id,m=_.id,E=g.id,b=this._pmtId,S=v.pesData,T=_.pesData,k=g.pesData,w=this._parsePAT,O=this._parsePMT,A=this._parsePES,I=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this);for(f-=f%188,r=0;r<f;r+=188)if(71===e[r]){if(o=!!(64&e[r+1]),a=((31&e[r+1])<<8)+e[r+2],(48&e[r+3])>>4>1){if((l=r+5+e[r+4])===r+188)continue}else l=r+4;switch(a){case y:o&&(S&&(u=A(S))&&I(u,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(l,r+188)),S.size+=r+188-l);break;case m:o&&(T&&(u=A(T))&&(_.isAAC?R(u):D(u)),T={data:[],size:0}),T&&(T.data.push(e.subarray(l,r+188)),T.size+=r+188-l);break;case E:o&&(k&&(u=A(k))&&P(u),k={data:[],size:0}),k&&(k.data.push(e.subarray(l,r+188)),k.size+=r+188-l);break;case 0:o&&(l+=e[l]+1),b=this._pmtId=w(e,l);break;case b:o&&(l+=e[l]+1);var C=O(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=C.avc)>0&&(v.id=y),(m=C.audio)>0&&(_.id=m,_.isAAC=C.isAAC),(E=C.id3)>0&&(g.id=E),h&&!p&&(c.logger.log("reparse from beginning"),h=!1,r=-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(s.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(u=A(S))?(I(u,!0),v.pesData=null):v.pesData=S,T&&(u=A(T))?(_.isAAC?R(u):D(u),_.pesData=null):(T&&T.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),_.pesData=T),k&&(u=A(k))?(P(u),g.pesData=null):g.pesData=k,null==this.sampleAes?this.remuxer.remux(_,v,g,this._txtTrack,t,n,i):this.decryptAndRemux(_,v,g,this._txtTrack,t,n,i)}},{key:"decryptAndRemux",value:function(e,t,n,i,r,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,i,r,o,a)})}else this.decryptAndRemuxAvc(e,t,n,i,r,o,a)}},{key:"decryptAndRemuxAvc",value:function(e,t,n,i,r,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,i,r,o,a)})}else this.remuxer.remux(e,t,n,i,r,o,a)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,n,i){var r,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){c.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!i){c.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:c.logger.warn("HEVC stream type found, not supported for now");break;default:c.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a}},{key:"_parsePES",value:function(e){var t,n,i,r,o,a,s,l,u=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(t=d[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;192&(n=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&n?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(c.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),l=(r=t[8])+9,e.size-=l,o=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){var v=(t=d[h]).byteLength;if(l){if(l>v){l-=v;continue}t=t.subarray(l),v-=l,l=0}o.set(t,u),u+=v}return i&&(i-=r+3),{data:o,pts:a,dts:s,len:i}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&c.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var n,i,r,o=this,a=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,u&&s.length&&(d(u,a),u=this.avcSample=f(!1,e.pts,e.dts,"")),s.forEach(function(t){switch(t.type){case 1:i=!0,u.frame=!0;var s=t.data;if(c&&s.length>4){var h=new l.default(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(u.key=!0)}break;case 5:i=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:i=!0,(n=new l.default(o.discardEPB(t.data))).readUByte();for(var p=0,v=0,_=!1,g=0;!_&&n.bytesAvailable>1;){p=0;do{p+=g=n.readUByte()}while(255===g);v=0;do{v+=g=n.readUByte()}while(255===g);if(4===p&&0!==n.bytesAvailable){_=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var y=n.readUByte(),m=31&y,E=[y,n.readUByte()];for(r=0;r<m;r++)E.push(n.readUByte()),E.push(n.readUByte()),E.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}}}}else if(v<n.bytesAvailable)for(r=0;r<v;r++)n.readUByte()}break;case 7:if(i=!0,c=!0,!a.sps){var b=(n=new l.default(t.data)).readSPS();a.width=b.width,a.height=b.height,a.pixelRatio=b.pixelRatio,a.sps=[t.data],a.duration=o._duration;var S=t.data.subarray(1,4),T="avc1.";for(r=0;r<3;r++){var k=S[r].toString(16);k.length<2&&(k="0"+k),T+=k}a.codec=T}break;case 8:i=!0,a.pps||(a.pps=[t.data]);break;case 9:i=!1,u&&d(u,a),u=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}if(u&&i){u.units.push(t)}}),t&&u&&(d(u,a),this.avcSample=null)}},{key:"_insertSampleInOrder",value:function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,n,i,r,o=0,a=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,r=31&e[0],l=0,o=1);o<a;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){if(d>=0)i={data:e.subarray(d,o-l-1),type:r},c.push(i);else{var f=this._getLastNalUnit();if(f&&(u&&o<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(n=o-l-1)>0)){var h=new Uint8Array(f.data.byteLength+n);h.set(f.data,0),h.set(e.subarray(0,n),f.data.byteLength),f.data=h}}o<a?(d=o,r=31&e[o],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(i={data:e.subarray(d,a),type:r,state:l},c.push(i)),0===c.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return s.naluState=l,c}},{key:"discardEPB",value:function(e){for(var t,n,i=e.byteLength,r=[],o=1;o<i-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=e[a];return n}},{key:"_parseAACPES",value:function(e){var t,n,i,r,a,l=this._audioTrack,u=e.data,f=e.pts,h=this.aacOverFlow,p=this.aacLastPTS;if(h){var v=new Uint8Array(h.byteLength+u.byteLength);v.set(h,0),v.set(u,h.byteLength),u=v}for(i=0,a=u.length;i<a-1&&!o.default.isHeader(u,i);i++);if(i){var _,g;if(i<a-1?(_="AAC PES did not start with ADTS header,offset:"+i,g=!1):(_="no ADTS header found in AAC PES",g=!0),c.logger.warn("parsing error:"+_),this.observer.trigger(s.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:g,reason:_}),g)return}if(o.default.initTrackConfig(l,this.observer,u,i,this.audioCodec),n=0,t=o.default.getFrameDuration(l.samplerate),h&&p){var y=p+t;Math.abs(y-f)>1&&(c.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-f)/90)),f=y)}for(;i<a;)if(o.default.isHeader(u,i)&&i+5<a){var m=o.default.appendFrame(l,u,i,f,n);if(!m)break;i+=m.length,r=m.sample.pts,n++}else i++;h=i<a?u.subarray(i,a):null,this.aacOverFlow=h,this.aacLastPTS=r}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,n=t.length,i=0,r=0,o=e.pts;r<n;)if(a.default.isHeader(t,r)){var s=a.default.appendFrame(this._audioTrack,t,r,o,i);if(!s)break;r+=s.length,i++}else r++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();n.default=f},{22:22,26:26,30:30,31:31,33:33,35:35,54:54}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},n.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e(54),a=e(33),s=function(e){return e&&e.__esModule?e:{default:e}}(e(35)),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return r(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===i(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){o.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(s.default.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();n.default=l},{33:33,35:35,54:54}],35:[function(e,t,n){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();n.default=r},{}],37:[function(e,t,n){"use strict";var i={isBuffered:function(e,t){if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0;return!1},bufferInfo:function(e,t,n){if(e){var i,r=e.buffered,o=[];for(i=0;i<r.length;i++)o.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(o,t,n)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var i,r,o,a,s,l=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var u=l.length;if(u){var c=l[u-1].end;e[s].start-c<n?e[s].end>c&&(l[u-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,i=0,r=o=t;s<l.length;s++){var d=l[s].start,f=l[s].end;if(t+n>=d&&t<f)r=d,i=(o=f)-t;else if(t+n<d){a=d;break}}return{len:i,start:r,end:o,nextStart:a}}};t.exports=i},{}],38:[function(e,t,n){"use strict";var i=e(54),r={mergeDetails:function(e,t){var n,o=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,l=e.fragments,u=t.fragments,c=0;if(a<o)t.PTSKnown=!1;else{for(var d=o;d<=a;d++){var f=l[s+d],h=u[d];h&&f&&(c=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,h.backtracked=f.backtracked,h.dropped=f.dropped,n=h))}if(c)for(i.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<u.length;d++)u[d].cc+=c;if(n)r.updateFragPTSDTS(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(s>=0&&s<l.length){var p=l[s].start;for(d=0;d<u.length;d++)u[d].start+=p}t.PTSKnown=e.PTSKnown}},updateFragPTSDTS:function(e,t,n,i,o,a){var s=n;if(!isNaN(t.startPTS)){var l=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=l:t.deltaPTS=Math.max(l,t.deltaPTS),s=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),i=Math.max(i,t.endPTS),o=Math.min(o,t.startDTS),a=Math.max(a,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=s,t.endPTS=i,t.startDTS=o,t.endDTS=a,t.duration=i-n;var c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;var d,f,h;for(d=c-e.startSN,(f=e.fragments)[d]=t,h=d;h>0;h--)r.updatePTS(f,h,h-1);for(h=d;h<f.length-1;h++)r.updatePTS(f,h,h+1);return e.PTSKnown=!0,u},updatePTS:function(e,t,n){var r=e[t],o=e[n],a=o.startPTS;isNaN(a)?o.start=n>t?r.start+r.duration:Math.max(r.start-o.duration,0):n>t?(r.duration=a-r.start,r.duration<0&&i.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(o.duration=r.start-a,o.duration<0&&i.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=r},{54:54}],39:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(2)),a=i(e(35)),s=e(33),l=i(e(43)),u=i(e(41)),c=i(e(42)),d=i(e(13)),f=i(e(12)),h=i(e(11)),p=e(54),v=i(e(1)),_=e(4),g=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,p.enableLogs)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new v.default;o.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e,e].concat(n))},o.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[e].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new n.abrController(this),s=new n.bufferController(this),_=new n.capLevelController(this),g=new n.fpsController(this),y=new l.default(this),m=new u.default(this),E=new c.default(this),b=new h.default(this),S=[this.levelController=new f.default(this),this.streamController=new d.default(this)],T=n.audioStreamController;T&&S.push(new T(this)),this.networkControllers=S;var k=[y,m,E,a,s,_,g,b];if(T=n.audioTrackController){var w=new T(this);this.audioTrackController=w,k.push(w)}if(T=n.subtitleTrackController){var O=new T(this);this.subtitleTrackController=O,k.push(O)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&k.push(new e(t))}),this.coreComponents=k}return r(e,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return n&&i}},{key:"version",get:function(){return"0.7.11"}},{key:"Events",get:function(){return a.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:_.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),r(e,[{key:"destroy",value:function(){p.logger.log("destroy"),this.trigger(a.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){p.logger.log("attachMedia"),this.media=e,this.trigger(a.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){p.logger.log("detachMedia"),this.trigger(a.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=o.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),p.logger.log("loadSource:"+e),this.url=e,this.trigger(a.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;p.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:"stopLoad",value:function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){p.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){p.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){p.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){p.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){p.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){p.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){p.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++){if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();n.default=g},{1:1,11:11,12:12,13:13,2:2,33:33,35:35,4:4,41:41,42:42,43:43,54:54}],40:[function(e,t,n){"use strict";t.exports=e(39).default},{39:39}],41:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(33),l=e(54),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.FRAG_LOADING));return n.loaders={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},a.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=this.hls.config;t.loaded=0,i&&(l.logger.warn("abort previous fragment loader for type:"+n),i.abort()),i=this.loaders[n]=t.loader=void 0!==r.fLoader?new r.fLoader(r):new r.loader(r);var o=void 0,a=void 0,s=void 0;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,c=t.byteRangeEndOffset;isNaN(u)||isNaN(c)||(o.rangeStart=u,o.rangeEnd=c),a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(o,a,s)}},{key:"loadsuccess",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.default.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:i})}},{key:"loaderror",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})}},{key:"loadtimeout",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})}},{key:"loadprogress",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.frag;r.loaded=e.loaded,this.hls.trigger(o.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})}}]),t}();n.default=u},{33:33,34:34,35:35,54:54}],42:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(35)),a=i(e(34)),s=e(33),l=e(54),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=t.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&&(l.logger.warn("abort previous key loader for type:"+n),i.abort()),t.loader=this.loaders[n]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var u=void 0,c=void 0,d=void 0;u={url:a,frag:t,responseType:"arraybuffer"},c={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(u,c,d)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:i})}},{key:"loaderror",value:function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})}}]),t}();n.default=u},{33:33,34:34,35:35,54:54}],43:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(e(2)),s=i(e(35)),l=i(e(34)),u=e(33),c=i(e(47)),d=e(54),f=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,_=function(){function e(){r(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return o(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=a.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),g=function(){function e(){r(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return o(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new _).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=a.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),y=function(e){function t(e){r(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s.default.MANIFEST_LOADING,s.default.LEVEL_LOADING,s.default.AUDIO_TRACK_LOADING,s.default.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),o(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},l.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var n=this.loaders[t.type];if(n){var i=n.context;if(i&&i.url===e)return void d.logger.trace("playlist request ongoing");d.logger.warn("abort previous loader for type:"+t.type),n.abort()}var r=this.hls.config,o=void 0,a=void 0,s=void 0,l=void 0;"manifest"===t.type?(o=r.manifestLoadingMaxRetry,a=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout):(o=r.levelLoadingMaxRetry,a=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout,d.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader=void 0!==r.pLoader?new r.pLoader(r):new r.loader(r),t.url=e,t.responseType="";var u=void 0,c=void 0;u={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,u,c)}},{key:"resolve",value:function(e,t){return a.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var n=[],i=void 0;for(f.lastIndex=0;null!=(i=f.exec(e));){var r={},o=r.attrs=new c.default(i[1]);r.url=this.resolve(i[2],t);var a=o.decimalResolution("RESOLUTION");a&&(r.width=a.width,r.height=a.height),r.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),r.name=o.NAME;var s=o.CODECS;if(s){s=s.split(/[ ,]+/);for(var l=0;l<s.length;l++){var u=s[l];-1!==u.indexOf("avc1")?r.videoCodec=this.avc1toavcoti(u):-1!==u.indexOf("hvc1")?r.videoCodec=u:r.audioCodec=u}}n.push(r)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=void 0,o=[],a=0;for(h.lastIndex=0;null!=(r=h.exec(e));){var s={},l=new c.default(r[1]);l.TYPE===n&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=n,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),i&&(s.audioCodec=i),s.id=a++,o.push(s))}return o}},{key:"avc1toavcoti",value:function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,n,i){var r,o,a=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u=new _,f=0,h=null,y=new g;for(p.lastIndex=0;null!==(r=p.exec(e));){var m=r[1];if(m){y.duration=parseFloat(m);var E=(" "+r[2]).slice(1);y.title=E||null,y.tagList.push(E?["INF",m,E]:["INF",m])}else if(r[3]){if(!isNaN(y.duration)){var b=a++;y.type=i,y.start=s,y.levelkey=u,y.sn=b,y.level=n,y.cc=f,y.baseurl=t,y.relurl=(" "+r[3]).slice(1),l.fragments.push(y),h=y,s+=y.duration,y=new g}}else if(r[4]){if(y.rawByteRange=(" "+r[4]).slice(1),h){var S=h.byteRangeEndOffset;S&&(y.lastByteRangeEndOffset=S)}}else if(r[5])y.rawProgramDateTime=(" "+r[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]);else{for(r=r[0].match(v),o=1;o<r.length&&void 0===r[o];o++);var T=(" "+r[o+1]).slice(1),k=(" "+r[o+2]).slice(1);switch(r[o]){case"#":y.tagList.push(k?[T,k]:[T]);break;case"PLAYLIST-TYPE":l.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(T);break;case"TARGETDURATION":l.targetduration=parseFloat(T);break;case"VERSION":l.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":f++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(T);break;case"KEY":var w=T,O=new c.default(w),A=O.enumeratedString("METHOD"),I=O.URI,R=O.hexadecimalInteger("IV");A&&(u=new _,I&&["AES-128","SAMPLE-AES"].indexOf(A)>=0&&(u.method=A,u.baseuri=t,u.reluri=I,u.key=null,u.iv=R));break;case"START":var D=T,P=new c.default(D).decimalFloatingPoint("TIME-OFFSET");isNaN(P)||(l.startTimeOffset=P);break;case"MAP":var C=new c.default(T);y.relurl=C.URI,y.rawByteRange=C.BYTERANGE,y.baseurl=t,y.level=n,y.type=i,y.sn="initSegment",l.initSegment=y,y=new g;break;default:d.logger.warn("line parsed but not handled: "+r)}}}return(y=h)&&!y.relurl&&(l.fragments.pop(),s-=y.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l}},{key:"loadsuccess",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,o=e.url,a=n.type,l=n.id,c=n.level,f=this.hls;if(this.loaders[a]=void 0,void 0!==o&&0!==o.indexOf("data:")||(o=n.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var h="audioTrack"!==a&&"subtitleTrack"!==a,p=isNaN(c)?isNaN(l)?0:l:c,v=this.parseLevelPlaylist(r,o,p,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");v.tload=t.tload,"manifest"===a&&f.trigger(s.default.MANIFEST_LOADED,{levels:[{url:o,details:v}],audioTracks:[],url:o,stats:t,networkDetails:i}),t.tparsed=performance.now(),v.targetduration?h?f.trigger(s.default.LEVEL_LOADED,{details:v,level:c||0,id:l||0,stats:t,networkDetails:i}):"audioTrack"===a?f.trigger(s.default.AUDIO_TRACK_LOADED,{details:v,id:l,stats:t,networkDetails:i}):"subtitleTrack"===a&&f.trigger(s.default.SUBTITLE_TRACK_LOADED,{details:v,id:l,stats:t,networkDetails:i}):f.trigger(s.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:i})}else{var _=this.parseMasterPlaylist(r,o);if(_.length){var g=this.parseMasterPlaylistMedia(r,o,"AUDIO",_[0].audioCodec),y=this.parseMasterPlaylistMedia(r,o,"SUBTITLES");if(g.length){var m=!1;g.forEach(function(e){e.url||(m=!0)}),!1===m&&_[0].audioCodec&&!_[0].attrs.AUDIO&&(d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main"}))}f.trigger(s.default.MANIFEST_LOADED,{levels:_,audioTracks:g,subtitles:y,url:o,stats:t,networkDetails:i})}else f.trigger(s.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:i})}else f.trigger(s.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:i})}},{key:"loaderror",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.loader;switch(t.type){case"manifest":n=u.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=u.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1}o&&(o.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:n,fatal:i,url:o.url,loader:o,response:e,context:t,networkDetails:r})}},{key:"loadtimeout",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.loader;switch(t.type){case"manifest":n=u.ErrorDetails.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=u.ErrorDetails.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}o&&(o.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:n,fatal:i,url:o.url,loader:o,context:t,networkDetails:r})}}]),t}();n.default=y},{2:2,33:33,34:34,35:35,47:47,54:54}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=Math.pow(2,32)-1,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))}},{key:"box",value:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,o=r;r--;)i+=n[r].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),r=0,i=8;r<o;r++)t.set(n[r],i),i+=n[r].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))}},{key:"moov",value:function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))}},{key:"mvhd",value:function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)}},{key:"sdtp",value:function(t){var n,i,r=t.samples||[],o=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,o[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n,i,r,o=[],a=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(t,n){var i=e.sdtp(t),o=t.id,a=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var i,r,o,a,s,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)o=(r=u[i]).duration,a=r.size,s=r.flags,l=r.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var n,i=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),n.set(i,e.FTYP.byteLength),n}}]),e}();n.default=o},{}],45:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(e(36)),a=i(e(35)),s=e(54),l=i(e(44)),u=e(33),c=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.typeSupported=i;var o=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return r(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,i,r,o,l){if(this.ISGenerated){if(l){var u=this._initPTS,c=this._PTSNormalize,d=e.inputTimeScale||t.inputTimeScale,f=1/0,h=1/0,p=e.samples;if(p.length&&(f=h=c(p[0].pts-d*r,u)),(p=t.samples).length){var v=p[0];f=Math.min(f,c(v.pts-d*r,u)),h=Math.min(h,c(v.dts-d*r,u))}if(f!==1/0){var _=u-f;Math.abs(_)>10*d&&(s.logger.warn("timestamp inconsistency, "+(_/d).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=f,this._initDTS=h,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:f}))}}}else this.generateIS(e,t,r);if(this.ISGenerated)if(e.samples.length){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,r));var g=this.remuxAudio(e,r,o,l);if(t.samples.length){var y=void 0;g&&(y=g.endPTS-g.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,r)),this.remuxVideo(t,r,o,y,l)}}else{var m=void 0;t.samples.length&&(m=this.remuxVideo(t,r,o,l)),m&&e.codec&&this.remuxEmptyAudio(e,r,o,m)}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(a.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,n){var i,r,o=this.observer,c=e.samples,d=t.samples,f=this.typeSupported,h="audio/mp4",p={},v={tracks:p},_=void 0===this._initPTS;if(_&&(i=r=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(h="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:l.default.initSegment([e]),metadata:{channelCount:e.channelCount}},_&&(i=r=c[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&d.length){var g=t.inputTimeScale;t.timescale=g,p.video={container:"video/mp4",codec:t.codec,initSegment:l.default.initSegment([t]),metadata:{width:t.width,height:t.height}},_&&(i=Math.min(i,d[0].pts-g*n),r=Math.min(r,d[0].dts-g*n),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(p).length?(o.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,_&&(this._initPTS=i,this._initDTS=r)):o.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,n,i,r){var o,c,d,f,h,p,v,_=8,g=e.timescale,y=e.samples,m=[],E=y.length,b=this._PTSNormalize,S=this._initDTS,T=this.nextAvcDts,k=this.isSafari;k&&(n|=y.length&&T&&(r&&Math.abs(t-T/g)<.1||Math.abs(y[0].pts-T-S)<g/5)),n||(T=t*g),y.forEach(function(e){e.pts=b(e.pts-S,T),e.dts=b(e.dts-S,T)}),y.sort(function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||(i||e.id-t.id)});var w=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(w<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(w/90)+" ms to overcome this issue");for(var O=0;O<y.length;O++)y[O].dts+=w}var A=y[0];h=Math.max(A.dts,0),f=Math.max(A.pts,0);var I=Math.round((h-T)/90);n&&I&&(I>1?s.logger.log("AVC:"+I+" ms hole between fragments detected,filling it"):I<-1&&s.logger.log("AVC:"+-I+" ms overlapping between fragments detected"),h=T,y[0].dts=h,f=Math.max(f-I,T),y[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(h/90)+",delta:"+I+" ms")),A=y[y.length-1],v=Math.max(A.dts,0),p=Math.max(A.pts,0,v),k&&(o=Math.round((v-h)/(y.length-1)));for(var R=0,D=0,P=0;P<E;P++){for(var C=y[P],L=C.units,x=L.length,N=0,M=0;M<x;M++)N+=L[M].data.length;D+=N,R+=x,C.length=N,C.dts=k?h+P*o:Math.max(C.dts,h),C.pts=Math.max(C.pts,C.dts)}var F=D+4*R+8;try{c=new Uint8Array(F)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var U=new DataView(c.buffer);U.setUint32(0,F),c.set(l.default.types.mdat,4);for(var j=0;j<E;j++){for(var G=y[j],B=G.units,V=0,H=void 0,W=0,Y=B.length;W<Y;W++){var K=B[W],$=K.data,z=K.data.byteLength;U.setUint32(_,z),_+=4,c.set($,_),_+=z,V+=4+z}if(k)H=Math.max(0,o*Math.round((G.pts-G.dts)/o));else{if(j<E-1)o=y[j+1].dts-G.dts;else{var Z=this.config,X=G.dts-y[j>0?j-1:j].dts;if(Z.stretchShortVideoTrack){var q=Z.maxBufferHole,Q=Z.maxSeekHole,J=Math.floor(Math.min(q,Q)*g),ee=(i?f+i*g:this.nextAudioPts)-G.pts;ee>J?((o=ee-X)<0&&(o=X),s.logger.log("It is approximately "+ee/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=X}else o=X}H=Math.round(G.pts-G.dts)}m.push({size:V,duration:o,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=v+o;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=m[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=m,d=l.default.moof(e.sequenceNumber++,h,e),e.samples=[];var ie={data1:d,data2:c,startPTS:f/g,endPTS:(p+o)/g,startDTS:h/g,endDTS:this.nextAvcDts/g,type:"video",nb:m.length,dropped:te};return this.observer.trigger(a.default.FRAG_PARSING_DATA,ie),ie}},{key:"remuxAudio",value:function(e,t,n,i){var r,c,d,f,h,p,v,_=e.inputTimeScale,g=_/e.timescale,y=(e.isAAC?1024:1152)*g,m=this._PTSNormalize,E=this._initDTS,b=!e.isAAC&&this.typeSupported.mpeg,S=e.samples,T=[],k=this.nextAudioPts;if((n|=S.length&&k&&(i&&Math.abs(t-k/_)<.1||Math.abs(S[0].pts-k-E)<20*y))||(k=t*_),S.forEach(function(e){e.pts=e.dts=m(e.pts-E,k)}),S.sort(function(e,t){return e.pts-t.pts}),i&&e.isAAC)for(var w=0,O=k;w<S.length;){var A,I=S[w];A=I.pts-O;var R=Math.abs(1e3*A/_);if(A<=-y)s.logger.warn("Dropping 1 audio frame @ "+(O/_).toFixed(3)+"s due to "+R+" ms overlap."),S.splice(w,1),e.len-=I.unit.length;else if(A>=y&&R<1e4&&O){var D=Math.round(A/y);s.logger.warn("Injecting "+D+" audio frame @ "+(O/_).toFixed(3)+"s due to "+Math.round(1e3*A/_)+" ms gap.");for(var P=0;P<D;P++){var C=Math.max(O,0);(d=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=I.unit.subarray()),S.splice(w,0,{unit:d,pts:C,dts:C}),e.len+=d.length,O+=y,w++}I.pts=I.dts=O,O+=y,w++}else Math.abs(A),I.pts=I.dts=O,O+=y,w++}for(var L=0,x=S.length;L<x;L++){var N=S[L],M=N.unit,F=N.pts;if(void 0!==v)c.duration=Math.round((F-v)/g);else{var U=Math.round(1e3*(F-k)/_),j=0;if(n&&e.isAAC&&U){if(U>0&&U<1e4)j=Math.round((F-k)/y),s.logger.log(U+" ms hole between AAC samples detected,filling it"),j>0&&((d=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=M.subarray()),e.len+=j*d.length);else if(U<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(k/_).toFixed(3)+"s/"+(F/_).toFixed(3)+"s/"+-U+"ms"),e.len-=M.byteLength;continue}F=k}if(p=Math.max(0,F),!(e.len>0))return;var G=b?e.len:e.len+8;r=b?0:8;try{f=new Uint8Array(G)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}if(!b){new DataView(f.buffer).setUint32(0,G),f.set(l.default.types.mdat,4)}for(var B=0;B<j;B++)(d=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=M.subarray()),f.set(d,r),r+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c)}f.set(M,r);var V=M.byteLength;r+=V,c={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c),v=F}var H=0,W=T.length;if(W>=2&&(H=T[W-2].duration,c.duration=H),W){this.nextAudioPts=k=v+g*H,e.len=0,e.samples=T,h=b?new Uint8Array:l.default.moof(e.sequenceNumber++,p/g,e),e.samples=[];var Y=p/_,K=k/_,$={data1:h,data2:f,startPTS:Y,endPTS:K,startDTS:Y,endDTS:K,type:"audio",nb:W};return this.observer.trigger(a.default.FRAG_PARSING_DATA,$),$}return null}},{key:"remuxEmptyAudio",value:function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*r)+this._initDTS,c=i.endDTS*r+this._initDTS,d=1024*a,f=Math.ceil((c-u)/d),h=o.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var p=[],v=0;v<f;v++){var _=u+v*d;p.push({unit:h,pts:_,dts:_}),e.len+=h.length}e.samples=p,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var n,i=e.samples.length,r=e.inputTimeScale,o=this._initPTS,s=this._initDTS;if(i){for(var l=0;l<i;l++)(n=e.samples[l]).pts=(n.pts-o)/r,n.dts=(n.dts-s)/r;this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,i=e.samples.length,r=e.inputTimeScale,o=this._initPTS;if(i){for(var s=0;s<i;s++)(n=e.samples[s]).pts=(n.pts-o)/r;this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}}]),e}();n.default=c},{33:33,35:35,36:36,44:44,54:54}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e(35)),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t}return i(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,n,i,o,a,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:c,nb:1,dropped:0}),u.trigger(r.default.FRAG_PARSED)}}]),e}();n.default=o},{35:35}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,n={};for(o.lastIndex=0;null!==(t=o.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n}}]),e}();n.default=a},{}],48:[function(e,t,n){"use strict";t.exports={search:function(e,t){for(var n=0,i=e.length-1,r=null,o=null;n<=i;){var a=t(o=e[r=(n+i)/2|0]);if(a>0)n=r+1;else{if(!(a<0))return o;i=r-1}}return null}}},{}],49:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a=function(e){var t=e;return o.hasOwnProperty(e)&&(t=o[e]),String.fromCharCode(t)},s=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},_=function(){function e(t,n,r,o,a){i(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=r||!1,this.background=o||"black",this.flash=a||!1}return r(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),g=function(){function e(t,n,r,o,a,s){i(this,e),this.uchar=t||" ",this.penState=new _(n,r,o,a,s)}return r(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),y=function(){function e(){i(this,e),this.chars=[];for(var t=0;t<l;t++)this.chars.push(new g);this.pos=0,this.currPenState=new _}return r(e,[{key:"equals",value:function(e){for(var t=!0,n=0;n<l;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<l;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=l)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=a(e);this.pos>=l?p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<l;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,n=0;n<l;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}]),e}(),m=function(){function e(){i(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return r(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e);this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<s;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[i].cueStartTime;if(o&&o<p.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(r.rows[i+a])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null!==this.nrRollUpRows){p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}else p.log("DEBUG","roll_up but nrRollUpRows not set yet")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<s;r++){var o=this.rows[r].getTextString();o&&(i=r+1,e?t.push("Row "+i+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),E=function(){function e(t,n){i(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return r(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),b=function(){function e(t,n,r){i(this,e),this.field=t||1,this.outputs=[n,r],this.channels=[new E(1,n),new E(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return r(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var n,i,r,o=!1;this.lastTime=e,p.setTime(e);for(var a=0;a<t.length;a+=2)if(i=127&t[a],r=127&t[a+1],0!==i||0!==r){if(p.log("DATA","["+v([t[a],t[a+1]])+"] -> ("+v([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(o=this.parseChars(i,r)))if(this.currChNr&&this.currChNr>=0){this.channels[this.currChNr-1].insertChars(o)}else p.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([i,r])+" orig: "+v([t[a],t[a+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var n=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var i=this.channels[n-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"parseMidrow",value:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].ccMIDROW(t),p.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var n=null,i=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,i=64<=t&&t<=95?1===n?u[e]:d[e]:1===n?c[e]:f[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"interpretPAC",value:function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i}},{key:"parseChars",value:function(e,t){var n=null,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),17<=r&&r<=19){var o=t;o=17===r?t+80:18===r?t+112:t+144,p.log("INFO","Special char '"+a(o)+"' in channel "+n),i=[o]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=v(i);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i}},{key:"parseBackgroundAttributes",value:function(e,t){var n,i,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=h[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();n.default=b},{}],50:[function(e,t,n){"use strict";var i=e(57),r={newCue:function(e,t,n,r){for(var o,a,s,l,u,c=window.VTTCue||window.TextTrackCue,d=0;d<r.rows.length;d++)if(o=r.rows[d],s=!0,l=0,u="",!o.isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?l++:(u+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===n&&(n+=1e-4),a=new c(t,n,(0,i.fixLineBreaks)(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}};t.exports=r},{57:57}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findFragWithCC=function(e,t){return i.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})};var i=function(e){return e&&e.__esModule?e:{default:e}}(e(48))},{48:48}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e(53)),o=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(n),this.fast_=new r.default(i)}return i(e,[{key:"sample",value:function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),i=e/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();n.default=o},{53:53}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();n.default=r},{}],54:[function(e,t,n){"use strict";function i(){}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;n.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":r(e))){!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=self.console[e];return t?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];i[0]&&(i[0]=function(e,t){return t="["+e+"] > "+t}(e,i[0])),t.apply(self.console,i)}:i}(t)})}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},n.logger=a},{}],55:[function(e,t,n){"use strict";t.exports={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}}},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(e){if("string"!=typeof e)return!1;return!!o[e.toLowerCase()]&&e.toLowerCase()}function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function n(n,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=n,h=o,p=a,v=null,_="",g=!0,y="auto",m="start",E=50,b="middle",S=50,T="middle";if(Object.defineProperty(s,"id",t({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",t({},u,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",t({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",t({},u,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",t({},u,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",t({},u,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",t({},u,{get:function(){return _},set:function(e){var t=function(e){return"string"==typeof e&&!!r[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",t({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",t({},u,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",t({},u,{get:function(){return m},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",t({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",t({},u,{get:function(){return b},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",t({},u,{get:function(){return S},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");S=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",t({},u,{get:function(){return T},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");T=n,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",r={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}()},{}],57:[function(e,t,n){"use strict";function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new l,this.regionList=[]}function r(){this.values=Object.create(null)}function o(e,t,n,i){var r=i?e.split(i):[e];for(var o in r)if("string"==typeof r[o]){var a=r[o].split(n);if(2===a.length){t(a[0],a[1])}}}function a(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(n,"__esModule",{value:!0}),n.fixLineBreaks=void 0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e(56)),l=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};r.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u=new s.default(0,0,0),c="middle"===u.align?"middle":"center";i.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=a(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var l=(i=t()).match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var d=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(d?d=!1:i=t(),n.state){case"HEADER":/:/.test(i)?function(e){o(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new s.default(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{!function(e,t,n){function i(){var t=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+s);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}var s=e;if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var i=new r;o(e,function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];i.integer(e,a),i.percent(e,a)&&i.set("snapToLines",!1),i.alt(e,a,["auto"]),2===o.length&&i.alt("lineAlign",o[1],["start",c,"end"]);break;case"position":o=t.split(","),i.percent(e,o[0]),2===o.length&&i.alt("positionAlign",o[1],["start",c,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",c,"end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===u.line&&(a=-1),t.line=a,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",c);var s=i.get("position","auto");"auto"===s&&50===u.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}(i,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var f=-1!==i.indexOf("--\x3e");if(!i||f&&(d=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},n.fixLineBreaks=a,n.default=i},{56:56}],58:[function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(e(57)),r=function(e,t,n){return e.substr(n||0,t.length)===t},o=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},a={parse:function(e,t,n,a,s,l){var u=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),c="00:00.000",d=0,f=0,h=0,p=[],v=void 0,_=!0,g=new i.default;g.oncue=function(e){var t=n[a],i=n.ccOffset;t&&t.new&&(void 0!==f?i=n.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC];e.presentationOffset=n}(n,a,h)),h&&(i=h+n.ccOffset-n.presentationOffset),e.startTime+=i-f,e.endTime+=i-f,e.id=o(e.startTime)+o(e.endTime)+o(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&p.push(e)},g.onparsingerror=function(e){v=e},g.onflush=function(){v&&l?l(v):s(p)},u.forEach(function(e){if(_){if(r(e,"X-TIMESTAMP-MAP=")){_=!1,e.substr(16).split(",").forEach(function(e){r(e,"LOCAL:")?c=e.substr(6):r(e,"MPEGTS:")&&(d=parseInt(e.substr(7)))});try{d-=t=t<0?t+8589934592:t,f=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(t+=1e3*n,t+=6e4*i,t+=36e5*r)}(c)/1e3,h=d/9e4,-1===f&&(v=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){v=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(_=!1)}g.parse(e+"\n")}),g.flush()}};t.exports=a},{57:57}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e(54),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(n){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,o=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var s=t.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var l=void 0,u=void 0;u="arraybuffer"===o.responseType?(l=t.response).byteLength:(l=t.responseText).length,i.loaded=i.total=u;var c={url:t.responseURL,data:l};this.callbacks.onSuccess(c,i,o,t)}else i.retry>=a.maxRetry||s>=400&&s<499?(r.logger.error(s+" while loading "+o.url),this.callbacks.onError({code:s,text:t.statusText},o,t)):(r.logger.warn(s+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)}},{key:"loadtimeout",value:function(){r.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)}}]),e}();n.default=o},{54:54}]},{},[40])(40)})},2806:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.default=function(e,t){return function(){function n(e,t){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.mediaStreams=e,this.eventEmitter=t,this.currentLevel=0,this._bindCallbacks()}return r(n,null,[{key:"isSupported",value:function(t){return t[e]}},{key:"canPlay",value:function(t){return t===e}}]),r(n,[{key:"_bindCallbacks",value:function(){this.broadcastError=this.broadcastError.bind(this)}},{key:"logError",value:function(t,n){this.eventEmitter.emit(o.VIDEO_EVENTS.ERROR,{errorType:t,streamType:e,streamProvider:"native",errorInstance:n})}},{key:"broadcastError",value:function(){var e=this.videoElement.error;switch(e.code){case s.ABORTED:break;case s.NETWORK:this.logError(o.ERRORS.CONTENT_LOAD,e);break;case s.DECODE:this.logError(o.ERRORS.MEDIA,e);break;case s.SRC_NOT_SUPPORTED:this.logError(o.ERRORS.CONTENT_LOAD,e);break;default:this.logError(o.ERRORS.UNKNOWN,e)}}},{key:"attach",value:function(e){this.videoElement=e,this.videoElement.addEventListener("error",this.broadcastError),this.videoElement.src=this.mediaStreams[this.currentLevel].url}},{key:"detach",value:function(){this.videoElement.removeEventListener("error",this.broadcastError),this.videoElement.src="",this.videoElement=null}},{key:"getMediaStreamDeliveryType",value:function(){return t}},{key:"getMediaStreamType",value:function(){return e}},{key:"getDebugInfo",value:function(){if(this.videoElement){var e=this.videoElement,t=e.buffered,n=e.currentTime,r=(0,a.geOverallBufferLength)(t),o=(0,a.getNearestBufferSegmentInfo)(t,n);return i({},this.mediaStreams[0],{deliveryType:this.getMediaStreamDeliveryType(),overallBufferLength:r,nearestBufferSegInfo:o})}return{}}},{key:"currentUrl",get:function(){return this.mediaStreams[this.currentLevel].url}}]),n}()};var o=n(194),a=n(2503),s={ABORTED:1,NETWORK:2,DECODE:3,SRC_NOT_SUPPORTED:4}},2807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.isBrowser="undefined"!=typeof window,r=t.NativeEnvironmentSupport={MSE:!1,HLS:!1,DASH:!1,MP4:!1,WEBM:!1};!function(){if(i){r.MSE="WebKitMediaSource"in window||"MediaSource"in window;var e=document.createElement("video");"function"==typeof e.canPlayType&&((e.canPlayType("application/x-mpegURL")||e.canPlayType("application/vnd.apple.mpegURL"))&&(r.HLS=!0),e.canPlayType("application/dash+xml")&&(r.DASH=!0),e.canPlayType("video/mp4")&&(r.MP4=!0),e.canPlayType("video/webm")&&(r.WEBM=!0))}}()},2808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePlayableStreams=function(e,t,n){var i=[],r=function(e){var t={};return e.forEach(function(e){Array.isArray(t[e.type])||(t[e.type]=[]),t[e.type].push(e)}),t}(e),o=Object.keys(r);return t.forEach(function(e){for(var t=0;t<o.length;t+=1){var a=o[t],s=r[a];if(e.canPlay(a)){i.push(new e(s,n));break}}}),i.sort(function(e,t){return t.getMediaStreamDeliveryType()-e.getMediaStreamDeliveryType()}),i}},2809:function(e,t,n){"use strict";function i(e){return e.split(".").pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.detectStreamType=function(e){a.href=e;var t=o[i(a.pathname)];if(t)return t;throw new Error("Vidi: cannot auto-detect url '"+e+"'. Please specify type manually using the MediaStream interface.")},t.getExtFromPath=i;var r=n(916),o=Object.create(null);o.mp4=r.MEDIA_STREAM_TYPES.MP4,o.webm=r.MEDIA_STREAM_TYPES.WEBM,o.m3u8=r.MEDIA_STREAM_TYPES.HLS,o.mpd=r.MEDIA_STREAM_TYPES.DASH;var a=document.createElement("a")},2810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elem=t,this._callback=n,this._fullscreenFn=function(){for(var e={},t=0;t<r.length;t+=1)if(r[t][1]in document){for(var n=0;n<r[t].length;n+=1)e[r[0][n]]=r[t][n];return e}return!1}(),this._bindEvents()}return i(e,[{key:"_bindEvents",value:function(){document.addEventListener(this._fullscreenFn.fullscreenchange,this._callback)}},{key:"_unbindEvents",value:function(){document.removeEventListener(this._fullscreenFn.fullscreenchange,this._callback)}},{key:"request",value:function(){if(this.isEnabled){var e=this._fullscreenFn.requestFullscreen;/5\.1[.\d]* Safari/.test(navigator.userAgent)?this._elem[e]():this._elem[e](Element.ALLOW_KEYBOARD_INPUT)}}},{key:"exit",value:function(){this.isEnabled&&document[this._fullscreenFn.exitFullscreen]()}},{key:"destroy",value:function(){this._unbindEvents(),delete this._elem,delete this._callback}},{key:"isAPIExist",get:function(){return Boolean(this._fullscreenFn)}},{key:"isInFullScreen",get:function(){return Boolean(document[this._fullscreenFn.fullscreenElement])}},{key:"isEnabled",get:function(){return this.isAPIExist&&document[this._fullscreenFn.fullscreenEnabled]}}]),e}();t.default=o},2811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=!1,o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elem=t,this._callback=n,this._bindEvents(),this._enterWhenHasMetaData=this._enterWhenHasMetaData.bind(this)}return i(e,[{key:"_bindEvents",value:function(){this._elem.addEventListener("webkitbeginfullscreen",this._callback),this._elem.addEventListener("webkitendfullscreen",this._callback)}},{key:"_unbindEvents",value:function(){this._elem.removeEventListener("webkitbeginfullscreen",this._callback),this._elem.removeEventListener("webkitendfullscreen",this._callback),this._elem.removeEventListener("loadedmetadata",this._enterWhenHasMetaData)}},{key:"_enterWhenHasMetaData",value:function(){this._elem.removeEventListener("loadedmetadata",this._enterWhenHasMetaData),r=!1,this._elem.webkitEnterFullscreen()}},{key:"request",value:function(){if(!this.isEnabled||this.isInFullScreen)return!1;try{this._elem.webkitEnterFullscreen()}catch(e){if(this._elem.readyState<1){if(r)return;this._elem.addEventListener("loadedmetadata",this._enterWhenHasMetaData),r=!0}}}},{key:"exit",value:function(){if(!this.isEnabled||!this.isInFullScreen)return!1;this._elem.webkitExitFullscreen()}},{key:"destroy",value:function(){this._unbindEvents(),delete this._elem,delete this._callback}},{key:"isAPIExist",get:function(){return Boolean(this._elem&&this._elem.webkitSupportsFullscreen)}},{key:"isInFullScreen",get:function(){return Boolean(this._elem&&this._elem.webkitDisplayingFullscreen)}},{key:"isEnabled",get:function(){return this.isAPIExist}}]),e}();t.default=o},2812:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s,l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=i(n(1613)),f=i(n(914)),h=(a=(0,f.default)(),s=(0,f.default)(),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),u(t,[{key:"on",value:function(e,n,i){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this,e,n,i)}},{key:"off",value:function(e,n,i,r){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"off",this).call(this,e,n,i,r)}},{key:"destroy",value:function(){var e=this;this.eventNames().forEach(function(t){e.removeAllListeners(t)})}}]),t}(),r(l.prototype,"on",[a],Object.getOwnPropertyDescriptor(l.prototype,"on"),l.prototype),r(l.prototype,"off",[s],Object.getOwnPropertyDescriptor(l.prototype,"off"),l.prototype),l);t.default=h},2813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(n(2814)),l=(r=i=function(){function e(t){var n=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._textMap=o({},s.default,n.textMap)}return a(e,[{key:"get",value:function(e){if(this._textMap){var t=this._textMap[e];if("function"==typeof t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.apply(void 0,i)}return t}}},{key:"destroy",value:function(){delete this._textMap}}]),e}(),i.dependencies=["config"],r);t.default=l},2814:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(194);t.default=(r={},i(r,o.TEXT_LABELS.WATCH_ON_SITE_LABEL,"Watch On Site"),i(r,o.TEXT_LABELS.WATCH_ON_SITE_TOOLTIP,"Watch On Site"),i(r,o.TEXT_LABELS.PAUSE_CONTROL_LABEL,"Pause"),i(r,o.TEXT_LABELS.PLAY_CONTROL_LABEL,"Play"),i(r,o.TEXT_LABELS.PROGRESS_CONTROL_LABEL,"Progress control"),i(r,o.TEXT_LABELS.PROGRESS_CONTROL_VALUE,function(e){return"Already played "+e+"%"}),i(r,o.TEXT_LABELS.MUTE_CONTROL_LABEL,"Mute"),i(r,o.TEXT_LABELS.UNMUTE_CONTROL_LABEL,"Unmute"),i(r,o.TEXT_LABELS.VOLUME_CONTROL_LABEL,"Volume control"),i(r,o.TEXT_LABELS.VOLUME_CONTROL_VALUE,function(e){return"Volume is "+e+"%"}),i(r,o.TEXT_LABELS.ENTER_FULL_SCREEN_LABEL,"Enter full screen mode"),i(r,o.TEXT_LABELS.EXIT_FULL_SCREEN_LABEL,"Exit full screen mode"),r)},2815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(194),s=(r=i=function(){function e(t){var n=t.eventEmitter,i=t.rootContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._rootNode=i.node,this._bindCallbacks(),this._bindEvents()}return o(e,[{key:"_bindCallbacks",value:function(){this._broadcastMouseEnter=this._broadcastMouseEnter.bind(this),this._broadcastMouseMove=this._broadcastMouseMove.bind(this),this._broadcastMouseLeave=this._broadcastMouseLeave.bind(this)}},{key:"_bindEvents",value:function(){this._rootNode.addEventListener("mouseenter",this._broadcastMouseEnter),this._rootNode.addEventListener("mousemove",this._broadcastMouseMove),this._rootNode.addEventListener("mouseleave",this._broadcastMouseLeave)}},{key:"_unbindEvents",value:function(){this._rootNode.removeEventListener("mouseenter",this._broadcastMouseEnter),this._rootNode.removeEventListener("mousemove",this._broadcastMouseMove),this._rootNode.removeEventListener("mouseleave",this._broadcastMouseLeave)}},{key:"_broadcastMouseEnter",value:function(){this._eventEmitter.emit(a.UI_EVENTS.MOUSE_ENTER_ON_PLAYER_TRIGGERED)}},{key:"_broadcastMouseMove",value:function(){this._eventEmitter.emit(a.UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED)}},{key:"_broadcastMouseLeave",value:function(){this._eventEmitter.emit(a.UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED)}},{key:"destroy",value:function(){this._unbindEvents(),delete this._rootNode,delete this._eventEmitter}}]),e}(),i.dependencies=["eventEmitter","rootContainer"],r);t.default=s},2816:function(e,t,n){"use strict";function i(e){var t="";if(e.type===a){var n=l.get();t=c||n.pointer&&"pointer"||n.key&&"key"||"script"}else"initial"===e.type&&(t="initial");document.documentElement.setAttribute("data-focus-source",t),e.type!==s&&(d[t]=!0,u=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2817)),o="undefined"!=typeof document&&"onfocusin"in document,a=o?"focusin":"focus",s=o?"focusout":"blur",l=void 0,u=null,c=null,d={pointer:!1,key:!1,script:!1,initial:!1};t.default={engage:function(){return document.documentElement.addEventListener(a,i,!0),document.documentElement.addEventListener(s,i,!0),l=r.default.engage(),i({type:"initial"}),{used:function(e){return d[e]},current:function(){return u},lock:function(e){c=e},unlock:function(){c=!1}}},disengage:function(){i({type:s}),u=c=null,Object.keys(d).forEach(function(e){d[e]=!1}),r.default.disengage(),document.documentElement.removeEventListener(a,i,!0),document.documentElement.removeEventListener(s,i,!0),document.documentElement.removeAttribute("data-focus-source")}}},2817:function(e,t,n){"use strict";function i(){l=0,u=0}function r(e){!1!==e.isPrimary&&(l+=1)}function o(e){!1!==e.isPrimary&&(e.touches?l=e.touches.length:(window.setImmediate||window.setTimeout)(function(){l=Math.max(l-1,0)}))}function a(e){switch(e.keyCode||e.which){case 16:case 17:case 18:case 91:case 93:return}u+=1}function s(e){switch(e.keyCode||e.which){case 16:case 17:case 18:case 91:case 93:return}(window.setImmediate||window.setTimeout)(function(){u=Math.max(u-1,0)})}Object.defineProperty(t,"__esModule",{value:!0});var l=0,u=0,c=["touchstart","pointerdown","MSPointerDown","mousedown"],d=["touchend","touchcancel","pointerup","MSPointerUp","pointercancel","MSPointerCancel","mouseup"];t.default={engage:function(){return window.addEventListener("blur",i,!1),document.documentElement.addEventListener("keydown",a,!0),document.documentElement.addEventListener("keyup",s,!0),c.forEach(function(e){document.documentElement.addEventListener(e,r,!0)}),d.forEach(function(e){document.documentElement.addEventListener(e,o,!0)}),{get:function(){return{pointer:Boolean(l),key:Boolean(u)}}}},disengage:function(){l=u=0,window.removeEventListener("blur",i,!1),document.documentElement.removeEventListener("keydown",a,!0),document.documentElement.removeEventListener("keyup",s,!0),c.forEach(function(e){document.documentElement.removeEventListener(e,r,!0)}),d.forEach(function(e){document.documentElement.removeEventListener(e,o,!0)})}}},2818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=[].slice,t=function(){var t=void 0,n=void 0;return function(){t||(requestAnimationFrame(function(){var i=document.activeElement;if(t=!1,n!==i)for(n=i,e.call(document.getElementsByClassName("focus-within")).forEach(function(e){e.classList.remove("focus-within")});i&&i.classList;)i.classList.add("focus-within"),i=i.parentNode}),t=!0)}}();return document.addEventListener("focus",t,!0),document.addEventListener("blur",t,!0),t(),function(){document.removeEventListener("focus",t,!0),document.removeEventListener("blur",t,!0)}}},2819:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2820)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.width,o=e.height,s=e.callbacks,l=e.fillAllSpace;return n._callbacks=s,n.$node=(0,a.default)("<div>",{"data-hook":"player-container",tabIndex:0,class:n.styleNames["video-wrapper"]}),n.setFillAllSpaceFlag(l),n.setWidth(i),n.setHeight(o),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"setWidth",value:function(e){e&&(this._width=e,this.$node.css({width:this._width+"px"}))}},{key:"setHeight",value:function(e){e&&(this._height=e,this.$node.css({height:this._height+"px"}))}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"appendComponentNode",value:function(e){this.$node.append(e)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"setFullScreenStatus",value:function(e){e?this.$node.attr("data-in-full-screen",!0):this.$node.removeAttr("data-in-full-screen"),this.$node.toggleClass(this.styleNames["full-screen"],e)}},{key:"setFillAllSpaceFlag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$node.toggleClass(this.styleNames["fill-all-space"],e)}},{key:"destroy",value:function(){this.$node.remove(),delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2820:function(e,t,n){var i=n(2821);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2821:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,".root-container__control-button__2Jhqq {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.root-container__control-button__2Jhqq:hover {\n  opacity: .7;\n}\n\n.root-container__hidden__uPyKq {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.root-container__video-wrapper__16Aei {\n  font-family: HelveticaNeueW01-45Ligh,HelveticaNeueW02-45Ligh,HelveticaNeueW10-45Ligh,Helvetica Neue,Helvetica,Arial,\\\\30E1\\30A4\\30EA\\30AA,meiryo,\\\\30D2\\30E9\\30AE\\30CE\\89D2\\30B4 pro w3,hiragino kaku gothic pro;\n  line-height: 0;\n  position: relative;\n  height: inherit;\n  outline: none;\n  overflow: hidden;\n}\n\n.root-container__video-wrapper__16Aei ::-moz-focus-inner {\n  border: 0;\n}\n\n.root-container__video-wrapper__16Aei .root-container__full-screen-control__2Q5Y4 {\n  display: none;\n}\n\n.root-container__fill-all-space__oMO-4,\n.root-container__full-screen__1eoGs {\n  width: 100%!important;\n  height: 100%!important;\n}\n\n[data-focus-source=key] [data-hook=player-container] button.focus-within,\n[data-focus-source=key] [data-hook=player-container] img.focus-within,\n[data-focus-source=key] [data-hook=player-container] input.focus-within,\n[data-focus-source=script] [data-hook=player-container] button.focus-within,\n[data-focus-source=script] [data-hook=player-container] img.focus-within,\n[data-focus-source=script] [data-hook=player-container] input.focus-within {\n  box-shadow: 0 0 0 2px rgba(56,153,236,.8);\n}\n\n[data-hook=player-container] * {\n  outline: none;\n}\n\n",""]),t.locals={"control-button":"root-container__control-button__2Jhqq",controlButton:"root-container__control-button__2Jhqq",hidden:"root-container__hidden__uPyKq","video-wrapper":"root-container__video-wrapper__16Aei",videoWrapper:"root-container__video-wrapper__16Aei","full-screen-control":"root-container__full-screen-control__2Q5Y4",fullScreenControl:"root-container__full-screen-control__2Q5Y4","fill-all-space":"root-container__fill-all-space__oMO-4",fillAllSpace:"root-container__fill-all-space__oMO-4","full-screen":"root-container__full-screen__1eoGs",fullScreen:"root-container__full-screen__1eoGs"}},2822:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(194),s=function(e){return e&&e.__esModule?e:{default:e}}(n(2823)),l=(r=i=function(){function e(t){var n=t.eventEmitter,i=t.engine,r=t.rootContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._engine=i,this._bindCallbacks(),this._initUI(),this.hide(),r.appendComponentNode(this.node)}return o(e,[{key:"_initUI",value:function(){this.view=new s.default({callbacks:{onCloseButtonClick:this.hide}})}},{key:"_bindCallbacks",value:function(){this.updateInfo=this.updateInfo.bind(this),this.hide=this.hide.bind(this)}},{key:"getDebugInfo",value:function(){var e=this._engine.getDebugInfo(),t=e.url,n=e.type,i=e.deliveryType,r=e.currentBitrate,o=e.overallBufferLength,s=e.nearestBufferSegInfo,l=e.viewDimensions,u=e.currentTime,c=e.duration,d=e.loadingStateTimestamps;return{url:t,type:n,deliveryType:a.MEDIA_STREAM_DELIVERY_TYPE[i],currentBitrate:r,overallBufferLength:o,nearestBufferSegInfo:s,viewDimensions:l,currentTime:u,duration:c,loadingStateTimestamps:d}}},{key:"updateInfo",value:function(){this.view.setInfo(this.getDebugInfo())}},{key:"setUpdateInterval",value:function(){this.clearUpdateInterval(),this._interval=setInterval(this.updateInfo,1e3)}},{key:"clearUpdateInterval",value:function(){clearInterval(this._interval)}},{key:"show",value:function(){this.isHidden&&(this.updateInfo(),this.setUpdateInterval(),this.view.show(),this.isHidden=!1)}},{key:"hide",value:function(){this.isHidden||(this.clearUpdateInterval(),this.view.hide(),this.isHidden=!0)}},{key:"destroy",value:function(){this.clearUpdateInterval(),this.view.destroy(),delete this.view}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),i.View=s.default,i.dependencies=["engine","eventEmitter","rootContainer"],r);t.default=l},2823:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2824)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=e,n.$node=(0,a.default)("<div>",{class:n.styleNames["video-player-debug-panel"]}),n.$infoContainer=(0,a.default)("<pre>",{class:n.styleNames["info-container"]}),n.$close=(0,a.default)("<div>",{class:n.styleNames["close-button"]}),n.$close.html("x"),n.$node.append(n.$close).append(n.$infoContainer),n._bindCallbacks(),n._bindEvents(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"_onCloseClick",value:function(e){e.stopPropagation(),this.config.callbacks.onCloseButtonClick()}},{key:"_bindCallbacks",value:function(){this._onCloseClick=this._onCloseClick.bind(this)}},{key:"_bindEvents",value:function(){this.$close[0].addEventListener("click",this.config.callbacks.onCloseButtonClick)}},{key:"_unbindEvents",value:function(){this.$close[0].removeEventListener("click",this.config.callbacks.onCloseButtonClick)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"setInfo",value:function(e){this.$infoContainer.html(function(e,t){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(e){var n=t.number;return/^"/.test(e)?n=/:$/.test(e)?t.key:t.string:/true|false/.test(e)?n=t.boolean:/null/.test(e)&&(n=t.null),'<span class="'+n+'">'+e+"</span>"})}(JSON.stringify(e,void 0,4),this.styleNames))}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2824:function(e,t,n){var i=n(2825);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2825:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,".debug-panel__control-button__XsPNh {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.debug-panel__control-button__XsPNh:hover {\n  opacity: .7;\n}\n\n.debug-panel__hidden__1nOtR {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.debug-panel__video-player-debug-panel__3nouq {\n  position: absolute;\n  z-index: 10000;\n  top: 10px;\n  left: 10px;\n  overflow: scroll;\n  width: 400px;\n  height: 250px;\n  border-radius: 3px;\n  background-color: rgba(0,0,0,.95);\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__close-button__2zdWs {\n  position: absolute;\n  top: 10px;\n  right: 5px;\n  cursor: pointer;\n  color: #fff;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__close-button__2zdWs:hover {\n  opacity: .8;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__info-container__2xmO8 {\n  font-size: 8px;\n  line-height: 8px;\n  margin: 5px;\n  padding: 5px;\n  color: #fff;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__info-container__2xmO8 .debug-panel__string__1ABXA {\n  color: green;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__info-container__2xmO8 .debug-panel__number__3hw2x {\n  color: #ff8c00;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__info-container__2xmO8 .debug-panel__boolean__2QZgv {\n  color: blue;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__info-container__2xmO8 .debug-panel__null__2oltm {\n  color: #f0f;\n}\n\n.debug-panel__video-player-debug-panel__3nouq .debug-panel__info-container__2xmO8 .debug-panel__key__2wKqw {\n  color: #fff;\n}\n\n",""]),t.locals={"control-button":"debug-panel__control-button__XsPNh",controlButton:"debug-panel__control-button__XsPNh",hidden:"debug-panel__hidden__1nOtR","video-player-debug-panel":"debug-panel__video-player-debug-panel__3nouq",videoPlayerDebugPanel:"debug-panel__video-player-debug-panel__3nouq","close-button":"debug-panel__close-button__2zdWs",closeButton:"debug-panel__close-button__2zdWs","info-container":"debug-panel__info-container__2xmO8",infoContainer:"debug-panel__info-container__2xmO8",string:"debug-panel__string__1ABXA",number:"debug-panel__number__3hw2x",boolean:"debug-panel__boolean__2QZgv",null:"debug-panel__null__2oltm",key:"debug-panel__key__2wKqw"}},2826:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2827)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.callbacks,o=e.nativeControls,s=e.playbackViewNode;return n._nativeControls=o,n._callbacks=i,n.$node=(0,a.default)("<div>",{class:n.styleNames["screen-block"],"data-hook":"screen-block"}),n._bindEvents(),n.$topBackground=(0,a.default)("<div>",{class:n.styleNames["top-gradient-background"]}),n.$bottomBackground=(0,a.default)("<div>",{class:n.styleNames["bottom-gradient-background"]}),n._nativeControls&&s.setAttribute("controls","true"),s.setAttribute("tabindex",-1),n.$node.append(s).append(n.$topBackground).append(n.$bottomBackground),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"_bindEvents",value:function(){this.$node[0].addEventListener("click",this._callbacks.onWrapperMouseClick),this.$node[0].addEventListener("dblclick",this._callbacks.onWrapperMouseDblClick)}},{key:"_unbindEvents",value:function(){this.$node[0].removeEventListener("click",this._callbacks.onWrapperMouseClick),this.$node[0].removeEventListener("dblclick",this._callbacks.onWrapperMouseDblClick)}},{key:"focusOnNode",value:function(){this.$node[0].focus()}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"showTopShadow",value:function(){this.$topBackground.addClass(this.styleNames.visible)}},{key:"hideTopShadow",value:function(){this.$topBackground.removeClass(this.styleNames.visible)}},{key:"showBottomShadow",value:function(){this._nativeControls||this.$bottomBackground.addClass(this.styleNames.visible)}},{key:"hideBottomShadow",value:function(){this.$bottomBackground.removeClass(this.styleNames.visible)}},{key:"appendComponentNode",value:function(e){this.$node.append(e)}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2827:function(e,t,n){var i=n(2828);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2828:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,".screen__screen-block__bA3F- {\n  position: absolute;\n  z-index: 50;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n}\n\n.screen__screen-block__bA3F- video {\n  position: relative;\n  z-index: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.screen__bottom-gradient-background__1kz4O,\n.screen__top-gradient-background__1UCsi {\n  position: absolute;\n  z-index: 1;\n  right: 0;\n  left: 0;\n  visibility: hidden;\n  height: 182px;\n  transition: opacity .2s,visibility .2s;\n  opacity: 0;\n  background-size: 100% 182px;\n}\n\n.screen__bottom-gradient-background__1kz4O.screen__visible__mzbfw,\n.screen__top-gradient-background__1UCsi.screen__visible__mzbfw {\n  visibility: visible;\n  opacity: 1;\n}\n\n.screen__top-gradient-background__1UCsi {\n  top: 0;\n  background-image: linear-gradient(0deg,transparent,rgba(91,88,88,.03) 16%,rgba(43,41,41,.09) 39%,rgba(0,0,0,.15) 67%,rgba(0,0,0,.3));\n}\n\n.screen__bottom-gradient-background__1kz4O {\n  bottom: 0;\n  background-image: linear-gradient(180deg,transparent,rgba(91,88,88,.03) 16%,rgba(43,41,41,.09) 39%,rgba(0,0,0,.15) 67%,rgba(0,0,0,.3));\n}\n\n",""]),t.locals={"screen-block":"screen__screen-block__bA3F-",screenBlock:"screen__screen-block__bA3F-","bottom-gradient-background":"screen__bottom-gradient-background__1kz4O",bottomGradientBackground:"screen__bottom-gradient-background__1kz4O","top-gradient-background":"screen__top-gradient-background__1UCsi",topGradientBackground:"screen__top-gradient-background__1UCsi",visible:"screen__visible__mzbfw"}},2829:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2830)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.callbacks,o=e.src;return n._callbacks=i,n.$node=(0,a.default)("<div>",{class:n.styleNames.overlay,"data-hook":"overlay"}),n.$content=(0,a.default)("<div>",{class:n.styleNames.poster}),n.setBackgroundSrc(o),n.$playButton=(0,a.default)("<div>",{class:n.styleNames.icon}),n.$node.append(n.$content).append(n.$playButton),n._bindEvents(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"_bindEvents",value:function(){this.$playButton[0].addEventListener("click",this._callbacks.onPlayClick)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"setBackgroundSrc",value:function(e){e&&this.$content.css("background-image","url('"+e+"')")}},{key:"_unbindEvents",value:function(){this.$playButton[0].removeEventListener("click",this._callbacks.onPlayClick)}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$content,delete this.$playButton,delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2830:function(e,t,n){var i=n(2831);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2831:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.overlay__control-button__1eWLD {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.overlay__control-button__1eWLD:hover {\n  opacity: .7;\n}\n\n.overlay__hidden__Djsfm {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.overlay__overlay__3F0YW {\n  z-index: 100;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.overlay__overlay__3F0YW,\n.overlay__poster__1C922 {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.overlay__poster__1C922 {\n  width: 100%;\n  height: 100%;\n  background: #000 no-repeat 50%;\n  background-size: cover;\n}\n\n.overlay__poster__1C922:before {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  content: "";\n  background-color: rgba(0,0,0,.35);\n}\n\n.overlay__icon__CzUQn {\n  position: relative;\n  width: 71px;\n  height: 71px;\n  opacity: 1;\n  background-image: url('+n(2832)+');\n  background-size: 100%;\n}\n\ndiv[data-hook=player-container][max-width~="550px"] .overlay__icon__CzUQn {\n  width: 54px;\n  height: 54px;\n}\n\ndiv[data-hook=player-container][max-width~="400px"] .overlay__icon__CzUQn {\n  width: 36px;\n  height: 36px;\n}\n\n.overlay__icon__CzUQn:hover {\n  opacity: .8;\n}\n\n',""]),t.locals={"control-button":"overlay__control-button__1eWLD",controlButton:"overlay__control-button__1eWLD",hidden:"overlay__hidden__Djsfm",overlay:"overlay__overlay__3F0YW",poster:"overlay__poster__1C922",icon:"overlay__icon__CzUQn"}},2832:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgdmlld0JveD0iMCAwIDM2IDM2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTciIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICAgICAgPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTIzLjkzNSAxNy43MDhsLTEwLjMxMyA2LjAzM1YxMS42NzZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo="},2833:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2834)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.$node=(0,a.default)("<div>",{class:n.styleNames.loader,"data-hook":"loader"}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"getNode",value:function(){return this.$node[0]}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"destroy",value:function(){this.$node.remove(),delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2834:function(e,t,n){var i=n(2835);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2835:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.loader__control-button__HZRgS {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.loader__control-button__HZRgS:hover {\n  opacity: .7;\n}\n\n.loader__hidden__2hcfO {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.loader__loader__mk8en {\n  position: absolute;\n  z-index: 90;\n  top: 50%;\n  left: 50%;\n  clip: rect(0,48px,48px,24px);\n  width: 42px;\n  height: 42px;\n  margin-top: -21px;\n  margin-left: -21px;\n  animation: loader__rotate__3lGw- 1s linear infinite;\n  color: #fff;\n}\n\n.loader__loader__mk8en:after {\n  clip: rect(4px,48px,48px,24px);\n  animation: loader__clip__2NdgO 1s linear infinite;\n}\n\n.loader__loader__mk8en:after,\n.loader__loader__mk8en:before {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  content: "";\n  border: 3px solid currentColor;\n  border-radius: 50%;\n}\n\n.loader__loader__mk8en:before {\n  clip: rect(0,48px,48px,24px);\n  animation: loader__clip-reverse__TFxkn 1s linear infinite;\n}\n\n@keyframes loader__clip__2NdgO {\n  50% {\n    clip: rect(42px,48px,48px,24px);\n    animation-timing-function: ease-in-out;\n  }\n}\n\n@keyframes loader__clip-reverse__TFxkn {\n  50% {\n    clip: rect(0,48px,9px,24px);\n    transform: rotate(135deg);\n    animation-timing-function: ease-in-out;\n  }\n}\n\n@keyframes loader__rotate__3lGw- {\n  0% {\n    transform: rotate(0);\n    animation-timing-function: ease-out;\n  }\n\n  45% {\n    transform: rotate(18deg);\n    color: #fff;\n  }\n\n  55% {\n    transform: rotate(54deg);\n  }\n\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n',""]),t.locals={"control-button":"loader__control-button__HZRgS",controlButton:"loader__control-button__HZRgS",hidden:"loader__hidden__2hcfO",loader:"loader__loader__mk8en",rotate:"loader__rotate__3lGw-",clip:"loader__clip__2NdgO","clip-reverse":"loader__clip-reverse__TFxkn",clipReverse:"loader__clip-reverse__TFxkn"}},2836:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a,s,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=i(n(59)),c=n(194),d=i(n(914)),f=i(n(2837)),h=(r=(0,d.default)(),s=a=function(){function e(t){var n=t.config,i=t.eventEmitter,r=t.engine,o=t.controls,a=t.rootContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=i,this.isHidden=!1,this._engine=r,this._controls=o,this._url=(0,u.default)(n,"ui.loadingCover"),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._initUI(),this.hide(),this._bindEvents(),!1!==(0,u.default)(n,"ui.loadingCover")&&a.appendComponentNode(this.node)}return l(e,[{key:"_bindEvents",value:function(){this._eventEmitter.on(c.VIDEO_EVENTS.STATE_CHANGED,this._checkForWaitingState,this),this._eventEmitter.on(c.VIDEO_EVENTS.UPLOAD_SUSPEND,this.hide,this)}},{key:"_checkForWaitingState",value:function(e){switch(e.nextState){case c.STATES.LOAD_STARTED:this._engine.isPreloadAvailable&&this.show();break;case c.STATES.WAITING:this._engine.isMetadataLoaded||this.show();break;case c.STATES.READY_TO_PLAY:this.hide()}}},{key:"_initUI",value:function(){this.view=new f.default({url:this._url})}},{key:"hide",value:function(){this.isHidden||(this._eventEmitter.emit(c.UI_EVENTS.LOADING_COVER_HIDE_TRIGGERED),this.view.hide(),this.isHidden=!0)}},{key:"show",value:function(){this.isHidden&&(this._controls._hideContent(),this._eventEmitter.emit(c.UI_EVENTS.LOADING_COVER_SHOW_TRIGGERED),this.view.show(),this.isHidden=!1)}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(c.VIDEO_EVENTS.STATE_CHANGED,this._checkForWaitingState,this),this._eventEmitter.off(c.VIDEO_EVENTS.UPLOAD_SUSPEND,this.hide,this)}},{key:"setLoadingCover",value:function(e){this.view.setCover(e)}},{key:"destroy",value:function(){this._unbindEvents(),this.view.destroy(),delete this.view,delete this._controls,delete this._eventEmitter,delete this._engine}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),a.View=f.default,a.dependencies=["engine","eventEmitter","config","controls","rootContainer"],o=s,function(e,t,n,i,r){var o={};Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}(o.prototype,"setLoadingCover",[r],Object.getOwnPropertyDescriptor(o.prototype,"setLoadingCover"),o.prototype),o);t.default=h},2837:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2838)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.$node=(0,a.default)("<div>",{class:n.styleNames["loading-cover"],"data-hook":"loading-cover"}),n.$image=(0,a.default)("<img>",{class:n.styleNames.image}),n._showImageOnLoad=n._showImageOnLoad.bind(n),n.$image.on("load",n._showImageOnLoad),n.setCover(e.url),n.$node.append(n.$image),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"getNode",value:function(){return this.$node[0]}},{key:"_showImageOnLoad",value:function(){this.$image.removeClass(this.styleNames.hidden)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"setCover",value:function(e){e&&(this.$image.addClass(this.styleNames.hidden),this.$image.attr("src",e))}},{key:"destroy",value:function(){this.$image.off("load",this._showImageOnLoad),this.$node.remove(),delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2838:function(e,t,n){var i=n(2839);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2839:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,".loading-cover__loading-cover__3r_Hp {\n  position: absolute;\n  z-index: 70;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  transition: opacity .3s,visibility .3s,transform .3s;\n  background: #000 no-repeat 50%;\n  background-size: contain;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.loading-cover__loading-cover__3r_Hp.loading-cover__hidden__H2VKU {\n  animation: none;\n}\n\n.loading-cover__hidden__H2VKU {\n  display: none!important;\n  visibility: hidden!important;\n  opacity: 0!important;\n}\n\n.loading-cover__image__5wxy4 {\n  height: 100%;\n  transition: opacity .6s,visibility .6s;\n}\n\n@keyframes loading-cover__trans__3FQHq {\n  30% {\n    transform: perspective(1000px) rotate3d(0,10,0,10deg);\n  }\n\n  60% {\n    transform: perspective(1000px) rotate3d(0,10,0,10deg);\n  }\n\n  to {\n    transform: perspective(1000px) rotate3d(0,10,10,10deg);\n  }\n}\n\n",""]),t.locals={"loading-cover":"loading-cover__loading-cover__3r_Hp",loadingCover:"loading-cover__loading-cover__3r_Hp",hidden:"loading-cover__hidden__H2VKU",image:"loading-cover__image__5wxy4",trans:"loading-cover__trans__3FQHq"}},2840:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2841)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.callbacks;return n._callbacks=i,n.$node=(0,a.default)("<div>",{class:n.styleNames["controls-block"],"data-hook":"controls-block"}),n.$wrapper=(0,a.default)("<div>",{class:n.styleNames["controls-wrapper"]}),n.$controlsContainer=(0,a.default)("<div>",{class:n.styleNames.controls,"data-hook":"controls-container"}),n.$wrapper.append(n.$controlsContainer),n.$node.append(n.$wrapper),n._bindEvents(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"_preventClickPropagation",value:function(e){e.stopPropagation()}},{key:"_bindEvents",value:function(){this.$controlsContainer[0].addEventListener("click",this._preventClickPropagation),this.$controlsContainer[0].addEventListener("mousemove",this._callbacks.onControlsBlockMouseMove),this.$controlsContainer[0].addEventListener("mouseleave",this._callbacks.onControlsBlockMouseOut)}},{key:"_unbindEvents",value:function(){this.$controlsContainer[0].removeEventListener("click",this._preventClickPropagation),this.$controlsContainer[0].removeEventListener("mousemove",this._callbacks.onControlsBlockMouseMove),this.$controlsContainer[0].removeEventListener("mouseleave",this._callbacks.onControlsBlockMouseOut)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"appendComponentNode",value:function(e){this.$wrapper.append(e)}},{key:"appendControlNode",value:function(e){this.$controlsContainer.append(e)}},{key:"showControlsBlock",value:function(){this.$wrapper.toggleClass(this.styleNames.activated,!0)}},{key:"hideControlsBlock",value:function(){this.$wrapper.toggleClass(this.styleNames.activated,!1)}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$wrapper,delete this.$controlsContainer,delete this.$node}}]),t}();u.extendStyleNames(l.default),t.default=u},2841:function(e,t,n){var i=n(2842);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2842:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.controls__control-button__2K0RM {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.controls__control-button__2K0RM:hover {\n  opacity: .7;\n}\n\n.controls__hidden__5bO21 {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.controls__controls-block__3EXj0 {\n  position: absolute;\n  z-index: 60;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.controls__controls-block__3EXj0::-moz-focus-inner {\n  border: 0;\n}\n\n.controls__controls-wrapper__1ICu_ {\n  z-index: 50;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.controls__controls-wrapper__1ICu_.controls__activated__2TLBf .controls__controls__1o4Ej,\n.controls__controls-wrapper__1ICu_.controls__focus-within__3HJFj .controls__controls__1o4Ej,\n.controls__controls-wrapper__1ICu_.controls__video-paused__33OLB .controls__controls__1o4Ej {\n  opacity: 1;\n}\n\n.controls__controls__1o4Ej {\n  position: relative;\n  z-index: 3;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex: 1;\n  flex: 1;\n  width: 100%;\n  max-width: 100%;\n  padding: 13px 0;\n  transition: opacity .2s,visibility .2s;\n  opacity: 0;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .controls__controls__1o4Ej {\n  padding: 25px 0;\n}\n\ndiv[data-hook=player-container][max-width~="550px"] .controls__controls__1o4Ej {\n  padding: 7px 0;\n}\n\n',""]),t.locals={"control-button":"controls__control-button__2K0RM",controlButton:"controls__control-button__2K0RM",hidden:"controls__hidden__5bO21","controls-block":"controls__controls-block__3EXj0",controlsBlock:"controls__controls-block__3EXj0","controls-wrapper":"controls__controls-wrapper__1ICu_",controlsWrapper:"controls__controls-wrapper__1ICu_",activated:"controls__activated__2TLBf",controls:"controls__controls__1o4Ej","focus-within":"controls__focus-within__3HJFj",focusWithin:"controls__focus-within__3HJFj","video-paused":"controls__video-paused__33OLB",videoPaused:"controls__video-paused__33OLB"}},2843:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2416)),l=n(194),u=i(n(2417)),c=i(n(2844)),d="data-hook",f="progress-control",h="seek-input",p="data-played-percent",v=function(e){function t(e){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),u=e.callbacks,c=e.texts;return a._callbacks=u,a._texts=c,a.$node=(0,s.default)("<div>",(n={class:a.styleNames["seek-block"]},r(n,d,f),r(n,p,0),n)),a.$progressPlayed=(0,s.default)("<div>",{class:a.styleNames["progress-bar"]+" "+a.styleNames["progress-played"]}),a.$progressBuffered=(0,s.default)("<div>",{class:a.styleNames["progress-bar"]+" "+a.styleNames["progress-buffered"]}),a.$progressBackground=(0,s.default)("<div>",{class:a.styleNames["progress-bar"]+" "+a.styleNames["progress-background"]}),a.$input=(0,s.default)("<input>",(i={class:a.styleNames["seek-control"]},r(i,d,h),r(i,"aria-label",a._texts.get(l.TEXT_LABELS.PROGRESS_CONTROL_LABEL)),r(i,"aria-valuemin",0),r(i,"aria-valuenow",0),r(i,"aria-valuemax",100),r(i,"type","range"),r(i,"min",0),r(i,"max",100),r(i,"step",.1),r(i,"value",0),i)),a.$node.append(a.$input).append(a.$progressPlayed).append(a.$progressBuffered).append(a.$progressBackground),a._bindCallbacks(),a._bindEvents(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),a(t,[{key:"_onMouseInteractionStart",value:function(e){e.button>1||this._callbacks.onUserInteractionStart()}},{key:"_onMouseInteractionEnd",value:function(e){e.button>1||this._callbacks.onUserInteractionEnd()}},{key:"_onInputValueChange",value:function(){var e=this.$input.val();this._updateDOMAttributes(e),this._callbacks.onChangePlayedProgress(e)}},{key:"_bindCallbacks",value:function(){this._onMouseInteractionStart=this._onMouseInteractionStart.bind(this),this._onMouseInteractionEnd=this._onMouseInteractionEnd.bind(this),this._onInputValueChange=this._onInputValueChange.bind(this)}},{key:"_bindEvents",value:function(){this.$input[0].addEventListener("input",this._onInputValueChange),this.$input[0].addEventListener("change",this._onInputValueChange),this.$node[0].addEventListener("mousedown",this._onMouseInteractionStart),this.$node[0].addEventListener("mouseup",this._onMouseInteractionEnd)}},{key:"_unbindEvents",value:function(){this.$input[0].removeEventListener("input",this._onInputValueChange),this.$input[0].removeEventListener("change",this._onInputValueChange),this.$node[0].removeEventListener("mousedown",this._onMouseInteractionStart),this.$node[0].removeEventListener("mouseup",this._onMouseInteractionEnd)}},{key:"_updateDOMAttributes",value:function(e){this.$input.attr("value",e),this.$input.attr("aria-valuetext",this._texts.get(l.TEXT_LABELS.PROGRESS_CONTROL_VALUE,e)),this.$input.attr("aria-valuenow",e),this.$node.attr(p,e),this.$progressPlayed.attr("style","width:"+e+"%;")}},{key:"_updatePlayed",value:function(e){this.$input.val(e),this._updateDOMAttributes(e)}},{key:"_updateBuffered",value:function(e){this.$progressBuffered.attr("style","width:"+e+"%;")}},{key:"setState",value:function(e){var t=e.played,n=e.buffered;void 0!==t&&this._updatePlayed(t),void 0!==n&&this._updateBuffered(n)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$input,delete this.$progressPlayed,delete this.$progressBuffered,delete this.$progressBackground,delete this.$node,delete this._texts}}]),t}();v.extendStyleNames(c.default),t.default=v},2844:function(e,t,n){var i=n(2845);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2845:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.progress__control-button__1XA4A {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.progress__control-button__1XA4A:hover {\n  opacity: .7;\n}\n\n.progress__hidden__2nDkR {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.progress__seek-block__2xdPP {\n  position: relative;\n  display: block;\n  -ms-flex: 1;\n  flex: 1;\n  margin: 0 8px;\n  cursor: pointer;\n  transition: opacity .2s,visibility .2s;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .progress__seek-block__2xdPP {\n  margin-right: 20px;\n}\n\ndiv[data-hook=player-container][max-width~="400px"] .progress__seek-block__2xdPP {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.progress__progress-bar__2g0Vv {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  height: 2px;\n  margin: -1px 0 0;\n  padding: 0;\n  vertical-align: top;\n  border: none;\n}\n\n.progress__progress-played__2TaP2 {\n  background-color: #fff;\n}\n\n.progress__progress-played__2TaP2:before {\n  position: absolute;\n  top: -4px;\n  right: -5px;\n  width: 10px;\n  height: 10px;\n  content: "";\n  transition: transform .1s cubic-bezier(0,0,.2,1);\n  border-radius: 50%;\n  background-color: #fff;\n}\n\n.progress__progress-buffered__n3ycS {\n  transition: width .2s ease;\n  background-color: hsla(0,0%,100%,.25);\n}\n\n.progress__progress-background__2qKFG {\n  width: 100%;\n  background-color: hsla(0,0%,100%,.25);\n}\n\n.progress__seek-control__2b8Pm {\n  position: relative;\n  z-index: 2;\n  display: block;\n  width: 100%;\n  height: 15px;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  vertical-align: middle;\n  opacity: 0;\n  border: none;\n  background: transparent;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n[data-focus-source=key] [data-hook=progress-control].focus-within,\n[data-focus-source=script] [data-hook=progress-control].focus-within {\n  opacity: 1;\n  box-shadow: 0 0 0 2px rgba(56,153,236,.8);\n}\n\n',""]),t.locals={"control-button":"progress__control-button__1XA4A",controlButton:"progress__control-button__1XA4A",hidden:"progress__hidden__2nDkR","seek-block":"progress__seek-block__2xdPP",seekBlock:"progress__seek-block__2xdPP","progress-bar":"progress__progress-bar__2g0Vv",progressBar:"progress__progress-bar__2g0Vv","progress-played":"progress__progress-played__2TaP2",progressPlayed:"progress__progress-played__2TaP2","progress-buffered":"progress__progress-buffered__n3ycS",progressBuffered:"progress__progress-buffered__n3ycS","progress-background":"progress__progress-background__2qKFG",progressBackground:"progress__progress-background__2qKFG","seek-control":"progress__seek-control__2b8Pm",seekControl:"progress__seek-control__2b8Pm"}},2846:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2416)),l=n(194),u=i(n(2417)),c=i(n(2847)),d="data-hook",f="playback-control",h="toggle-playback-button",p="data-is-playing",v=function(e){function t(e){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),u=e.callbacks,c=e.texts;return a._callbacks=u,a._texts=c,a.$node=(0,s.default)("<div>",(n={class:a.styleNames["play-control"]},r(n,d,f),r(n,p,!1),n)),a.$playbackControl=(0,s.default)("<button>",(i={class:a.styleNames["playback-toggle"]+" "+a.styleNames["control-button"]},r(i,d,h),r(i,"aria-label",a._texts.get(l.TEXT_LABELS.PLAY_CONTROL_LABEL)),r(i,"type","button"),r(i,"tabIndex",0),i)),a.$node.append(a.$playbackControl),a._bindEvents(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),a(t,[{key:"_bindEvents",value:function(){this._onButtonClick=this._onButtonClick.bind(this),this.$playbackControl[0].addEventListener("click",this._onButtonClick)}},{key:"_unbindEvents",value:function(){this.$playbackControl[0].removeEventListener("click",this._onButtonClick)}},{key:"_onButtonClick",value:function(){this.$playbackControl[0].focus(),this._callbacks.onTogglePlaybackButtonClick()}},{key:"setState",value:function(e){var t=e.isPlaying;this.$playbackControl.toggleClass(this.styleNames.paused,!t),this.$node.attr(p,t),this.$playbackControl.attr("aria-label",t?this._texts.get(l.TEXT_LABELS.PAUSE_CONTROL_LABEL):this._texts.get(l.TEXT_LABELS.PLAY_CONTROL_LABEL))}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$playbackControl,delete this.$node,delete this._texts}}]),t}();v.extendStyleNames(c.default),t.default=v},2847:function(e,t,n){var i=n(2848);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2848:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.play__control-button__3hQOV {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.play__control-button__3hQOV:hover {\n  opacity: .7;\n}\n\n.play__hidden__2a_ry {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.play__play-control__xgwLB {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  box-sizing: border-box;\n  width: 25px;\n  height: 25px;\n  margin-right: 11px;\n  margin-left: 11px;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: start;\n  justify-content: flex-start;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .play__play-control__xgwLB {\n  width: 35px;\n  height: 35px;\n  margin-right: 20px;\n  margin-left: 20px;\n}\n\ndiv[data-hook=player-container][max-width~="550px"] .play__play-control__xgwLB {\n  margin-left: 5px;\n}\n\n.play__playback-toggle__ruV7U {\n  width: 25px;\n  min-width: 25px;\n  height: 25px;\n  min-height: 25px;\n  background-image: url('+n(2849)+");\n  background-repeat: no-repeat;\n  background-position: 50%;\n  background-size: 10px 14px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .play__playback-toggle__ruV7U {\n  width: 35px;\n  min-width: 35px;\n  height: 35px;\n  min-height: 35px;\n  background-size: 15px 21px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .play__playback-toggle__ruV7U.play__paused__2gwQC {\n  width: 35px;\n  min-width: 35px;\n  background-size: 16px 21px;\n}\n\n.play__playback-toggle__ruV7U.play__paused__2gwQC {\n  width: 25px;\n  min-width: 25px;\n  background-image: url("+n(2850)+");\n  background-size: 11px 14px;\n}\n\n",""]),t.locals={"control-button":"play__control-button__3hQOV",controlButton:"play__control-button__3hQOV",hidden:"play__hidden__2a_ry","play-control":"play__play-control__xgwLB",playControl:"play__play-control__xgwLB","playback-toggle":"play__playback-toggle__ruV7U",playbackToggle:"play__playback-toggle__ruV7U",paused:"play__paused__2gwQC"}},2849:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDEwIDE0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMGgzdjE0SDdWMHpNMCAwaDN2MTRIMFYweiIvPgo8L3N2Zz4K"},2850:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMSIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDExIDE0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTS4wNzkgMEwwIDE0bDEwLjUtNy4xODF6Ii8+Cjwvc3ZnPgo="},2851:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=new Date(null);return e=isNaN(e)||!isFinite(e)?0:Math.floor(e),t.setSeconds(e),t.toISOString().substr(11,8).replace(/^00:/,"")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.formatTime=r;var s=i(n(2416)),l=i(n(2417)),u=i(n(2852)),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.$node=(0,s.default)("<div>",{class:n.styleNames["time-wrapper"],"data-hook":"time-control"}),n.$currentTime=(0,s.default)("<span>",{class:n.styleNames.current+" "+n.styleNames.time,"data-hook":"current-time-indicator"}),n.$divider=(0,s.default)("<span>",{class:n.styleNames.time}).html("/"),n.$durationTime=(0,s.default)("<span>",{class:n.styleNames.duration+" "+n.styleNames.time,"data-hook":"duration-time-indicator"}),n.$node.append(n.$currentTime).append(n.$divider).append(n.$durationTime),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),a(t,[{key:"setState",value:function(e){var t=e.duration,n=e.current;void 0!==t&&this._setDurationTime(t),void 0!==n&&this._setCurrentTime(n)}},{key:"_setDurationTime",value:function(e){this.$durationTime.html(r(e))}},{key:"_setCurrentTime",value:function(e){this.$currentTime.html(r(e))}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this.$node.remove(),delete this.$currentTime,delete this.$divider,delete this.$durationTime,delete this.$node}}]),t}();c.extendStyleNames(u.default),t.default=c},2852:function(e,t,n){var i=n(2853);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2853:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.time__control-button__15Zsk {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.time__control-button__15Zsk:hover {\n  opacity: .7;\n}\n\n.time__hidden__2p3uj {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.time__time-wrapper__1KjrC {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex: 0 0 auto;\n  flex: 0 0 auto;\n  margin-right: 18px;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .time__time-wrapper__1KjrC {\n  margin-right: 30px;\n}\n\ndiv[data-hook=player-container][max-width~="300px"] .time__time-wrapper__1KjrC {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.time__time__2Si0v {\n  font-size: 12px;\n  color: #fff;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .time__time__2Si0v {\n  font-size: 14px;\n}\n\n.time__time__2Si0v.time__current__IanQ9 {\n  margin-right: 5px;\n}\n\n.time__time__2Si0v.time__duration__3JTJk {\n  margin-left: 5px;\n}\n\n',""]),t.locals={"control-button":"time__control-button__15Zsk",controlButton:"time__control-button__15Zsk",hidden:"time__hidden__2p3uj","time-wrapper":"time__time-wrapper__1KjrC",timeWrapper:"time__time-wrapper__1KjrC",time:"time__time__2Si0v",current:"time__current__IanQ9",duration:"time__duration__3JTJk"}},2854:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2416)),l=n(194),u=i(n(2417)),c=i(n(2855)),d="data-hook",f="volume-control",h="mute-button",p="volume-input",v="volume-input-container",_="data-is-muted",g="data-volume-percent",y=function(e){function t(e){var n,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),c=e.callbacks,y=e.texts;u._callbacks=c,u._texts=y,u.$node=(0,s.default)("<div>",(n={class:u.styleNames["volume-control"]},r(n,d,f),r(n,g,100),r(n,_,!1),n)),u.$muteControl=(0,s.default)("<button>",(i={class:u.styleNames["mute-button"]+" "+u.styleNames["control-button"]},r(i,d,h),r(i,"aria-label",u._texts.get(l.TEXT_LABELS.MUTE_CONTROL_LABEL)),r(i,"type","button"),r(i,"tabIndex",0),i)),u.$container=(0,s.default)("<div>",r({class:u.styleNames.container},d,v));var m=(0,s.default)("<div>",{class:u.styleNames.content}),E=(0,s.default)("<div>",{class:u.styleNames["input-wrapper"]});return u.$filledProgress=(0,s.default)("<div>",{class:u.styleNames["filled-progress"]}),u.$input=(0,s.default)("<input>",(a={class:""+u.styleNames["volume-input"]},r(a,d,p),r(a,"aria-label",u._texts.get(l.TEXT_LABELS.VOLUME_CONTROL_LABEL)),r(a,"aria-valuemin",0),r(a,"aria-valuenow",0),r(a,"aria-valuemax",100),r(a,"tabIndex",0),r(a,"orient","vertical"),r(a,"type","range"),r(a,"min",0),r(a,"max",100),r(a,"step",1),r(a,"value",0),a)),E.append(u.$filledProgress).append(u.$input),m.append(E),u.$container.append(m),u.$node.append(u.$muteControl).append(u.$container),u._bindEvents(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),a(t,[{key:"_onInputChange",value:function(){this._callbacks.onVolumeLevelChangeFromInput(this.$input.val())}},{key:"_onWheel",value:function(e){e.preventDefault(),e.deltaY&&this._callbacks.onVolumeLevelChangeFromWheel(e.deltaY)}},{key:"_preventClickPropagation",value:function(e){e.stopPropagation()}},{key:"_bindEvents",value:function(){this._onInputChange=this._onInputChange.bind(this),this._onWheel=this._onWheel.bind(this),this._onButtonClick=this._onButtonClick.bind(this),this.$node[0].addEventListener("wheel",this._onWheel),this.$container[0].addEventListener("click",this._preventClickPropagation),this.$input[0].addEventListener("change",this._onInputChange),this.$input[0].addEventListener("input",this._onInputChange),this.$muteControl[0].addEventListener("click",this._onButtonClick)}},{key:"_onButtonClick",value:function(){this.$muteControl[0].focus(),this._callbacks.onToggleMuteClick()}},{key:"_unbindEvents",value:function(){this.$node[0].removeEventListener("wheel",this._onWheel),this.$container[0].removeEventListener("click",this._preventClickPropagation),this.$input[0].removeEventListener("change",this._onInputChange),this.$input[0].removeEventListener("input",this._onInputChange),this.$muteControl[0].removeEventListener("click",this._onButtonClick)}},{key:"setState",value:function(e){var t=e.volume,n=e.isMuted;void 0!==t&&this._setVolumeLevel(t),void 0!==n&&this._setMuteStatus(n)}},{key:"_setVolumeLevel",value:function(e){this.$input.val(e),this.$input.attr("value",e),this.$input.attr("aria-valuetext",this._texts.get(l.TEXT_LABELS.VOLUME_CONTROL_VALUE,e)),this.$input.attr("aria-valuenow",e),this.$filledProgress.attr("style","height:"+e+"%;"),this.$node.attr(g,e),e>=30?this.$muteControl.toggleClass(this.styleNames["half-volume"],!1):this.$muteControl.toggleClass(this.styleNames["half-volume"],!0)}},{key:"_setMuteStatus",value:function(e){this.$muteControl.toggleClass(this.styleNames.muted,e),this.$node.attr(_,e),this.$muteControl.attr("aria-label",e?this._texts.get(l.TEXT_LABELS.UNMUTE_CONTROL_LABEL):this._texts.get(l.TEXT_LABELS.MUTE_CONTROL_LABEL))}},{key:"show",value:function(){this.$node.toggleClass(c.default.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(c.default.hidden,!0)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$input,delete this.$muteControl,delete this.$filledProgress,delete this.$container,delete this.$node,delete this._texts}}]),t}();y.extendStyleNames(c.default),t.default=y},2855:function(e,t,n){var i=n(2856);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2856:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.volume__control-button__f8vY9 {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.volume__control-button__f8vY9:hover {\n  opacity: .7;\n}\n\n.volume__hidden__JXr-1 {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.volume__volume-control__1TgdQ {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  overflow: hidden;\n  width: 25px;\n  max-width: 25px;\n  height: 25px;\n  margin-right: 5px;\n  margin-left: 5px;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .volume__volume-control__1TgdQ {\n  width: 35px;\n  max-width: 35px;\n  height: 35px;\n  margin-right: 20px;\n}\n\ndiv[data-hook=player-container][max-width~="300px"] .volume__volume-control__1TgdQ {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.volume__volume-control__1TgdQ .volume__focus-withing__3NAun .volume__container__1RGs0,\n.volume__volume-control__1TgdQ:focus .volume__container__1RGs0,\n.volume__volume-control__1TgdQ:hover .volume__container__1RGs0 {\n  opacity: 1;\n}\n\n.volume__mute-button__1tZ1N {\n  width: 25px;\n  min-width: 25px;\n  height: 25px;\n  min-height: 25px;\n  background-image: url('+n(2857)+");\n  background-repeat: no-repeat;\n  background-position: 50%;\n  background-size: 17px 14px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .volume__mute-button__1tZ1N {\n  width: 35px;\n  min-width: 35px;\n  height: 35px;\n  min-height: 35px;\n  background-size: 25px 21px;\n}\n\n.volume__mute-button__1tZ1N.volume__half-volume__1y4_Y {\n  background-image: url("+n(2858)+");\n}\n\n.volume__mute-button__1tZ1N.volume__muted__BB6Mc {\n  background-image: url("+n(2859)+');\n}\n\n.volume__container__1RGs0 {\n  font-size: 10px;\n  position: absolute;\n  top: -82px;\n  left: 0;\n  padding: 9px 3px;\n  transition: opacity .2s,visibility .2s;\n  opacity: 0;\n  background-color: rgba(0,0,0,.5);\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .volume__container__1RGs0 {\n  top: -122px;\n}\n\n.volume__content__12mvh {\n  position: relative;\n  box-sizing: content-box;\n  width: 2px;\n  height: 60px;\n  padding: 2px 7px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .volume__content__12mvh {\n  width: 2px;\n  height: 100px;\n  padding: 2px 12px;\n}\n\n.volume__input-wrapper__31Tma {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background-color: hsla(0,0%,100%,.5);\n}\n\n.volume__filled-progress__m_m_8 {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background-color: #fff;\n}\n\n.volume__filled-progress__m_m_8:before {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  width: 10px;\n  height: 10px;\n  content: "";\n  border-radius: 50%;\n  background-color: #fff;\n}\n\n.volume__volume-input__2t106 {\n  position: absolute;\n  top: 0;\n  right: -5px;\n  bottom: 0;\n  left: -5px;\n  width: 12px;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  -ms-writing-mode: bt-lr;\n  opacity: 0;\n  border: 0;\n  -webkit-writing-mode: bt-lr;\n  writing-mode: bt-lr;\n  -webkit-appearance: slider-vertical;\n}\n\n[data-focus-source=key] [data-hook=volume-control] [data-hook=volume-input-container].focus-within,\n[data-focus-source=script] [data-hook=volume-control] [data-hook=volume-input-container].focus-within {\n  opacity: 1;\n  box-shadow: 0 0 0 2px rgba(56,153,236,.8);\n}\n\n[data-hook=volume-control].focus-within,\n[data-hook=volume-control]:hover {\n  overflow: visible;\n}\n\n',""]),t.locals={"control-button":"volume__control-button__f8vY9",controlButton:"volume__control-button__f8vY9",hidden:"volume__hidden__JXr-1","volume-control":"volume__volume-control__1TgdQ",volumeControl:"volume__volume-control__1TgdQ","focus-withing":"volume__focus-withing__3NAun",focusWithing:"volume__focus-withing__3NAun",container:"volume__container__1RGs0","mute-button":"volume__mute-button__1tZ1N",muteButton:"volume__mute-button__1tZ1N","half-volume":"volume__half-volume__1y4_Y",halfVolume:"volume__half-volume__1y4_Y",muted:"volume__muted__BB6Mc",content:"volume__content__12mvh","input-wrapper":"volume__input-wrapper__31Tma",inputWrapper:"volume__input-wrapper__31Tma","filled-progress":"volume__filled-progress__m_m_8",filledProgress:"volume__filled-progress__m_m_8","volume-input":"volume__volume-input__2t106",volumeInput:"volume__volume-input__2t106"}},2857:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE3IDE0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTAgMy45MTloMi45OTN2NS45N0gwVjMuOTJ6bTIuOTk1LS4wMTVMNyAuOTI0djEyTDIuOTk1IDkuODgydi01Ljk4eiIvPgogICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRiIgZD0iTTEyLjc5MyAxMy43MTZhOS42MDcgOS42MDcgMCAwIDAgMC0xMy41ODZNOS44NTMgMTAuODM3YTUuNDUgNS40NSAwIDAgMCAwLTcuNzA3Ii8+CiAgICA8L2c+Cjwvc3ZnPgo="},2858:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE3IDE0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTAgMy45MTloMi45OTN2NS45N0gwVjMuOTJ6bTIuOTk1LS4wMTVMNyAuOTI0djEyTDIuOTk1IDkuODgydi01Ljk4eiIvPgogICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRiIgZD0iTTkuODUzIDEwLjgzN2E1LjQ1IDUuNDUgMCAwIDAgMC03LjcwNyIvPgogICAgPC9nPgo8L3N2Zz4K"},2859:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDE3IDE0Ij4KICAgIDxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMy45MTloMi45OTN2NS45N0gwVjMuOTJ6bTIuOTk1LS4wMTVMNyAuOTI0djEyTDIuOTk1IDkuODgydi01Ljk4eiIvPgogICAgICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTEzIDYuMjU3bC0yLjA1LTIuMDUtLjc0My43NDNMMTIuMjU3IDdsLTIuMDUgMi4wNS43NDMuNzQzTDEzIDcuNzQzbDIuMDUgMi4wNS43NDMtLjc0M0wxMy43NDMgN2wyLjA1LTIuMDUtLjc0My0uNzQzTDEzIDYuMjU3eiIvPgogICAgPC9nPgo8L3N2Zz4K"},2860:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(2416)),l=n(194),u=i(n(2417)),c=i(n(2861)),d="data-hook",f="full-screen-control",h="full-screen-button",p="data-is-in-full-screen",v=function(e){function t(e){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),u=e.callbacks,c=e.texts;return a._callbacks=u,a._texts=c,a.$node=(0,s.default)("<div>",(n={class:a.styleNames["full-screen-control"]},r(n,d,f),r(n,p,!1),n)),a.$toggleFullScreenControl=(0,s.default)("<button>",(i={class:a.styleNames["full-screen-toggle"]+" "+a.styleNames["control-button"]},r(i,d,h),r(i,"aria-label",a._texts.get(l.TEXT_LABELS.ENTER_FULL_SCREEN_LABEL)),r(i,"type","button"),r(i,"tabIndex",0),i)),a.$node.append(a.$toggleFullScreenControl),a.setState({isInFullScreen:!1}),a._bindEvents(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),a(t,[{key:"_bindEvents",value:function(){this._onButtonClick=this._onButtonClick.bind(this),this.$toggleFullScreenControl[0].addEventListener("click",this._onButtonClick)}},{key:"_unbindEvents",value:function(){this.$toggleFullScreenControl[0].removeEventListener("click",this._onButtonClick)}},{key:"_onButtonClick",value:function(){this.$toggleFullScreenControl[0].focus(),this._callbacks.onToggleFullScreenButtonClick()}},{key:"setState",value:function(e){var t=e.isInFullScreen;this.$toggleFullScreenControl.toggleClass(this.styleNames["in-full-screen"],t),this.$toggleFullScreenControl.attr("aria-label",t?this._texts.get(l.TEXT_LABELS.EXIT_FULL_SCREEN_LABEL):this._texts.get(l.TEXT_LABELS.ENTER_FULL_SCREEN_LABEL)),this.$node.attr(p,t)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$toggleFullScreenControl,delete this.$node,delete this._texts}}]),t}();v.extendStyleNames(c.default),t.default=v},2861:function(e,t,n){var i=n(2862);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2862:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.full-screen__control-button__2fLTb {\n  cursor: pointer;\n  transition-duration: .2s;\n  transition-property: opacity;\n  opacity: 1;\n  border: 0;\n  outline: none;\n  background-color: transparent;\n}\n\n.full-screen__control-button__2fLTb:hover {\n  opacity: .7;\n}\n\n.full-screen__hidden__ACU6n {\n  visibility: hidden!important;\n  width: 0!important;\n  height: 0!important;\n  margin: 0!important;\n  padding: 0!important;\n  opacity: 0!important;\n}\n\n.full-screen__full-screen-control__pttkY {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  margin-right: 13px;\n  margin-left: 5px;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n\ndiv[data-hook=player-container][max-width~="550px"] .full-screen__full-screen-control__pttkY {\n  margin-right: 7px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .full-screen__full-screen-control__pttkY {\n  margin-right: 25px;\n  margin-left: 0;\n}\n\n.full-screen__full-screen-toggle__3-j5S {\n  width: 25px;\n  min-width: 25px;\n  height: 25px;\n  min-height: 25px;\n  transition: transform .2s;\n  background-image: url('+n(2863)+");\n  background-repeat: no-repeat;\n  background-position: 50%;\n  background-size: 14px 14px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .full-screen__full-screen-toggle__3-j5S {\n  width: 35px;\n  min-width: 35px;\n  height: 35px;\n  min-height: 21px;\n  background-size: 21px 21px;\n}\n\n.full-screen__full-screen-toggle__3-j5S:hover {\n  transform: scale(1.18);\n}\n\n.full-screen__full-screen-toggle__3-j5S.full-screen__in-full-screen__H2Mnb {\n  background-image: url("+n(2864)+");\n}\n\n.full-screen__full-screen-toggle__3-j5S.full-screen__in-full-screen__H2Mnb:hover {\n  transform: scale(.8);\n}\n\n",""]),t.locals={"control-button":"full-screen__control-button__2fLTb",controlButton:"full-screen__control-button__2fLTb",hidden:"full-screen__hidden__ACU6n","full-screen-control":"full-screen__full-screen-control__pttkY",fullScreenControl:"full-screen__full-screen-control__pttkY","full-screen-toggle":"full-screen__full-screen-toggle__3-j5S",fullScreenToggle:"full-screen__full-screen-toggle__3-j5S","in-full-screen":"full-screen__in-full-screen__H2Mnb",inFullScreen:"full-screen__in-full-screen__H2Mnb"}},2863:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIgMTBIMHY0aDR2LTJIMnYtMnpNMCAxdjNoMlYyaDJWMEgwdjF6bTE0LTFoLTR2MmgydjJoMlYwem0tMiAxMmgtMnYyaDR2LTRoLTJ2MnoiLz4KPC9zdmc+Cg=="},2864:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMSIgaGVpZ2h0PSIyMSIgdmlld0JveD0iMCAwIDIxIDIxIj4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQgMjFoMnYtNkgwdjJoNHY0ek02IDBINHY0SDB2Mmg2VjB6bTkgNmg2VjRoLTRWMGgtMnY2em0yIDExaDR2LTJoLTZ2Nmgydi00eiIvPgo8L3N2Zz4K"},2865:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=i(n(59)),c=n(2446),d=i(c),f=n(194),h=i(n(2866)),p=(a=o=function(){function e(t){var n=t.engine,i=t.eventEmitter,r=t.config,o=t.textMap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=s({},(0,u.default)(r,"ui.controls.watchOnSite")),this._eventEmitter=i,this._engine=n,this._textMap=o,this._bindCallbacks(),this._initUI(),this._initInterceptor()}return l(e,[{key:"_bindCallbacks",value:function(){this._triggerWatchOnSite=this._triggerWatchOnSite.bind(this)}},{key:"_initUI",value:function(){var e={callbacks:{onWatchOnSiteClick:this._triggerWatchOnSite},texts:this._textMap,logo:this._config.logo};this.view=new this.constructor.View(e)}},{key:"_initInterceptor",value:function(){var e,t=this;this._interceptor=new d.default({node:this.view.$logo[0],callbacks:(e={},r(e,c.KEYCODES.SPACE_BAR,function(e){e.stopPropagation(),t._eventEmitter.emit(f.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),t._triggerWatchOnSite()}),r(e,c.KEYCODES.ENTER,function(e){e.stopPropagation(),t._eventEmitter.emit(f.UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED),t._triggerWatchOnSite()}),e)})}},{key:"_destroyInterceptor",value:function(){this._interceptor.destroy()}},{key:"_triggerWatchOnSite",value:function(){this._eventEmitter.emit(f.UI_EVENTS.WATCH_ON_SITE_TRIGGERED)}},{key:"setLogo",value:function(e){this.view.setLogo(e)}},{key:"hide",value:function(){this.isHidden=!0,this.view.hide()}},{key:"show",value:function(){this.isHidden=!1,this.view.show()}},{key:"destroy",value:function(){this._destroyInterceptor(),this.view.destroy(),delete this.view,delete this._engine,delete this._eventEmitter,delete this._textMap,delete this.isHidden}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),o.View=h.default,o.dependencies=["engine","config","eventEmitter","textMap"],a);t.default=p},2866:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=n(194),l=i(n(2417)),u=i(n(2867)),c=i(n(2567)),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.callbacks,o=e.texts;return n._callbacks=i,n._texts=o,n.$node=(0,a.default)("<div>",{class:""+n.styleNames.wrapper}),n.$logo=(0,a.default)("<img>",{class:n.styleNames["watch-on-site-toggle"],"aria-label":n._texts.get(s.TEXT_LABELS.WATCH_ON_SITE_LABEL),role:"button",tabIndex:0,src:e.logo||c.default}),n.$tooltip=(0,a.default)("<div>",{class:""+n.styleNames.tooltip}),n.$tooltip.html(n._texts.get(s.TEXT_LABELS.WATCH_ON_SITE_TOOLTIP)),n.$node.append(n.$tooltip),n.$node.append(n.$logo),n.setLogo(e.logo),n._bindCallbacks(),n._bindEvents(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),o(t,[{key:"setLogo",value:function(e){e?(this.$logo.removeClass(this.styleNames["watch-on-site-toggle"]),this.$logo.addClass(this.styleNames["company-logo"]),this.$logo.attr("src",e)):(this.$logo.removeClass(this.styleNames["company-logo"]),this.$logo.addClass(this.styleNames["watch-on-site-toggle"]),this.$logo.attr("src",c.default))}},{key:"_bindCallbacks",value:function(){this._onNodeClick=this._onNodeClick.bind(this)}},{key:"_bindEvents",value:function(){this.$logo[0].addEventListener("click",this._onNodeClick)}},{key:"_unbindEvents",value:function(){this.$logo[0].removeEventListener("click",this._onNodeClick)}},{key:"_onNodeClick",value:function(){this.$logo[0].focus(),this._callbacks.onWatchOnSiteClick()}},{key:"show",value:function(){this.$node.toggleClass(this.styleNames.hidden,!1)}},{key:"hide",value:function(){this.$node.toggleClass(this.styleNames.hidden,!0)}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this._unbindEvents(),this.$node.remove(),delete this.$wrapper,delete this.$controlsContainer,delete this.$node,delete this._texts}}]),t}();d.extendStyleNames(u.default),t.default=d},2867:function(e,t,n){var i=n(2868);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2868:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.watch-on-site__hidden__26yxm {\n  visibility: hidden!important;\n  opacity: 0!important;\n}\n\n.watch-on-site__wrapper__2LXYA {\n  position: relative;\n  z-index: 3;\n  display: -ms-flexbox;\n  display: flex;\n  margin-right: 18px;\n  cursor: pointer;\n  transition: opacity .2s,visibility .2s;\n  transition-duration: .2s;\n  opacity: 1;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\ndiv[data-hook=player-container][max-width~="550px"] .watch-on-site__wrapper__2LXYA {\n  margin-right: 12px;\n  margin-left: 6px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .watch-on-site__wrapper__2LXYA {\n  margin-right: 30px;\n  margin-left: 0;\n}\n\n.watch-on-site__wrapper__2LXYA:hover .watch-on-site__watch-on-site-toggle__v2tC1,\n.watch-on-site__wrapper__2LXYA:hover img {\n  opacity: .7;\n}\n\n.watch-on-site__wrapper__2LXYA:hover .watch-on-site__tooltip__22jhy {\n  visibility: visible;\n  opacity: 1;\n}\n\n.watch-on-site__company-logo__27HYf {\n  max-width: 125px;\n  max-height: 26px;\n  transition: opacity .2s,visibility .2s;\n}\n\ndiv[data-hook=player-container][max-width~="550px"] .watch-on-site__company-logo__27HYf {\n  max-width: 90px;\n  max-height: 20px;\n}\n\ndiv[data-hook=player-container][max-width~="350px"] .watch-on-site__company-logo__27HYf {\n  max-width: 70px;\n  max-height: 18px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .watch-on-site__company-logo__27HYf {\n  max-width: 450px;\n  max-height: 36px;\n}\n\n.watch-on-site__watch-on-site-toggle__v2tC1 {\n  width: 14px;\n  min-width: 14px;\n  height: 14px;\n  min-height: 14px;\n  background-image: url('+n(2567)+");\n  background-size: 14px 14px;\n}\n\ndiv[data-hook=player-container][data-in-full-screen=true] .watch-on-site__watch-on-site-toggle__v2tC1 {\n  width: 21px;\n  min-width: 21px;\n  height: 21px;\n  min-height: 21px;\n  background-size: 21px 21px;\n}\n\n.watch-on-site__watch-on-site-toggle__v2tC1:hover {\n  transform: scale(1.2);\n}\n\n.watch-on-site__watch-on-site-toggle__v2tC1.watch-on-site__in-full-screen__2lGeA:hover {\n  transform: scale(.8);\n}\n\n.watch-on-site__tooltip__22jhy {\n  font-size: 12px;\n  line-height: 20px;\n  position: absolute;\n  top: -30px;\n  right: -12px;\n  visibility: hidden;\n  padding: 3px 10px;\n  transition: opacity .2s,visibility .2s;\n  white-space: nowrap;\n  opacity: 0;\n  color: #fff;\n  background: rgba(0,0,0,.5);\n}\n\n",""]),t.locals={hidden:"watch-on-site__hidden__26yxm",wrapper:"watch-on-site__wrapper__2LXYA","watch-on-site-toggle":"watch-on-site__watch-on-site-toggle__v2tC1",watchOnSiteToggle:"watch-on-site__watch-on-site-toggle__v2tC1",tooltip:"watch-on-site__tooltip__22jhy","company-logo":"watch-on-site__company-logo__27HYf",companyLogo:"watch-on-site__company-logo__27HYf","in-full-screen":"watch-on-site__in-full-screen__2lGeA",inFullScreen:"watch-on-site__in-full-screen__2lGeA"}},2869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(194),s=function(e){return e&&e.__esModule?e:{default:e}}(n(2870)),l=(r=i=function(){function e(t){var n=t.eventEmitter,i=t.engine;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=n,this._engine=i,this._initUI(),this._bindEvents()}return o(e,[{key:"_initUI",value:function(){this.view=new s.default}},{key:"_bindEvents",value:function(){this._eventEmitter.on(a.UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,this._showPlaybackChangeIndicator,this),this._eventEmitter.on(a.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,this.showRewind,this),this._eventEmitter.on(a.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,this.showForward,this),this._eventEmitter.on(a.UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,this.showIncreaseVolume,this),this._eventEmitter.on(a.UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,this.showDecreaseVolume,this),this._eventEmitter.on(a.UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,this.showMute,this),this._eventEmitter.on(a.UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,this.showIncreaseVolume,this),this._eventEmitter.on(a.UI_EVENTS.HIDE_MANIPULATION_INDICATOR_TRIGGERED,this.hide,this)}},{key:"showPause",value:function(){this.view.activatePauseIcon()}},{key:"showPlay",value:function(){this.view.activatePlayIcon()}},{key:"showRewind",value:function(){this.view.activateRewindIcon()}},{key:"showForward",value:function(){this.view.activateForwardIcon()}},{key:"showMute",value:function(){this.view.activateMuteVolumeIcon()}},{key:"showIncreaseVolume",value:function(){this.view.activateIncreaseVolumeIcon()}},{key:"showDecreaseVolume",value:function(){this.view.activateDecreaseVolumeIcon()}},{key:"hide",value:function(){this.view.deactivateIcon()}},{key:"_unbindEvents",value:function(){this._eventEmitter.off(a.UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,this._showPlaybackChangeIndicator,this),this._eventEmitter.off(a.UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,this.showRewind,this),this._eventEmitter.off(a.UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,this.showForward,this),this._eventEmitter.off(a.UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,this.showIncreaseVolume,this),this._eventEmitter.off(a.UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,this.showDecreaseVolume,this),this._eventEmitter.off(a.UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,this.showMute,this),this._eventEmitter.off(a.UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,this.showIncreaseVolume,this),this._eventEmitter.off(a.UI_EVENTS.HIDE_MANIPULATION_INDICATOR_TRIGGERED,this.hide,this)}},{key:"_showPlaybackChangeIndicator",value:function(){var e=this._engine.getCurrentState();e===a.STATES.PLAY_REQUESTED||e===a.STATES.PLAYING?this.view.activatePauseIcon():this.view.activatePlayIcon()}},{key:"destroy",value:function(){this._unbindEvents(),this.view.destroy(),delete this.view,delete this._eventEmitter,delete this._engine}},{key:"node",get:function(){return this.view.getNode()}}]),e}(),i.View=s.default,i.dependencies=["engine","eventEmitter"],r);t.default=l},2870:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(2416)),s=i(n(2417)),l=i(n(2871)),u=5,c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.$node=(0,a.default)("<div>",{class:""+e.styleNames["icon-container"]}),e.playIcon='<div class="'+e.styleNames.icon+'"><svg class="'+e.styleNames["play-icon"]+" "+e.styleNames["animated-icon"]+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 14"><path fill="#FFF" fill-rule="evenodd" d="M.079 0L0 14l10.5-7.181z"/></svg></div>',e.pauseIcon='<div class="'+e.styleNames.icon+'"><svg class="'+e.styleNames["pause-icon"]+" "+e.styleNames["animated-icon"]+'"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14"><path fill="#FFF" fill-rule="evenodd" d="M7 0h3v14H7V0zM0 0h3v14H0V0z"/></svg></div>',e.forwardIcon='<div class="'+e.styleNames.icon+'"><div class="'+e.styleNames.seconds+'"><span>'+u+'</span></div><svg class="'+e.styleNames["forward-icon"]+" "+e.styleNames["animated-icon"]+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 34"><path fill="#FFF" fill-rule="evenodd" d="M17 0c4.59 0 8.84 1.87 11.9 4.93V1.7h3.4v10.2H22.1V8.5h5.44C24.99 5.27 21.25 3.4 17 3.4 9.52 3.4 3.4 9.52 3.4 17c0 7.48 6.12 13.6 13.6 13.6 7.48 0 13.6-6.12 13.6-13.6H34c0 9.35-7.65 17-17 17S0 26.35 0 17 7.65 0 17 0z"/></svg></div>',e.rewindIcon='<div class="'+e.styleNames.icon+'"><div class="'+e.styleNames.seconds+'"><span>'+u+'</span></div><svg class="'+e.styleNames["rewind-icon"]+" "+e.styleNames["animated-icon"]+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 34"><path fill="#FFF" fill-rule="evenodd" d="M17 0C12.41 0 8.16 1.87 5.1 4.93V1.7H1.7v10.2h10.2V8.5H6.46C9.01 5.27 12.75 3.4 17 3.4c7.48 0 13.6 6.12 13.6 13.6 0 7.48-6.12 13.6-13.6 13.6-7.48 0-13.6-6.12-13.6-13.6H0c0 9.35 7.65 17 17 17s17-7.65 17-17S26.35 0 17 0z"/></svg></div>',e.descreaseVolumeIcon='<div class="'+e.styleNames.icon+'"><svg class="'+e.styleNames["decrease-volume-icon"]+" "+e.styleNames["animated-icon"]+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 14"><g fill="none" fill-rule="evenodd"><path fill="#FFF" d="M0 3.919h2.993v5.97H0V3.92zm2.995-.015L7 .924v12L2.995 9.882v-5.98z"/><path stroke="#FFF" d="M9.853 10.837a5.45 5.45 0 0 0 0-7.707"/></g></svg></div>',e.increaseVolumeIcon='<div class="'+e.styleNames.icon+'"><svg class="'+e.styleNames["increase-volume-icon"]+" "+e.styleNames["animated-icon"]+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 14"><g fill="none" fill-rule="evenodd"><path fill="#FFF" d="M0 3.919h2.993v5.97H0V3.92zm2.995-.015L7 .924v12L2.995 9.882v-5.98z"/><path stroke="#FFF" d="M12.793 13.716a9.607 9.607 0 0 0 0-13.586M9.853 10.837a5.45 5.45 0 0 0 0-7.707"/></g></svg></div>',e.muteIcon='<div class="'+e.styleNames.icon+'"><svg class="'+e.styleNames["decrease-volume-icon"]+" "+e.styleNames["animated-icon"]+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 14"><g fill="#FFF" fill-rule="evenodd"><path fill="#FFF" d="M0 3.919h2.993v5.97H0V3.92zm2.995-.015L7 .924v12L2.995 9.882v-5.98z"/><path stroke="#FFF" d="M13 6.257l-2.05-2.05-.743.743L12.257 7l-2.05 2.05.743.743L13 7.743l2.05 2.05.743-.743L13.743 7l2.05-2.05-.743-.743L13 6.257z"/></g></svg></div>',e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"activatePlayIcon",value:function(){this.$node.html(this.playIcon)}},{key:"activatePauseIcon",value:function(){this.$node.html(this.pauseIcon)}},{key:"activateForwardIcon",value:function(){this.$node.html(this.forwardIcon)}},{key:"activateRewindIcon",value:function(){this.$node.html(this.rewindIcon)}},{key:"activateIncreaseVolumeIcon",value:function(){this.$node.html(this.increaseVolumeIcon)}},{key:"activateDecreaseVolumeIcon",value:function(){this.$node.html(this.descreaseVolumeIcon)}},{key:"activateMuteVolumeIcon",value:function(){this.$node.html(this.muteIcon)}},{key:"deactivateIcon",value:function(){this.$node.html("")}},{key:"getNode",value:function(){return this.$node[0]}},{key:"destroy",value:function(){this.$node.remove(),delete this.$node}}]),t}();c.extendStyleNames(l.default),t.default=c},2871:function(e,t,n){var i=n(2872);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2872:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,".manipulation-indicator__icon-container__2DScG {\n  position: absolute;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.manipulation-indicator__icon-container__2DScG,\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__icon__1aCyo {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__icon__1aCyo {\n  font-size: 9px;\n  line-height: 9px;\n  position: relative;\n  box-sizing: initial;\n  animation-name: manipulation-indicator__fade-out__C-oYP;\n  animation-duration: .5s;\n  opacity: 0;\n  border-radius: 100px;\n  background-color: rgba(0,0,0,.5);\n}\n\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__animated-icon__2NoY9 {\n  animation-name: manipulation-indicator__icon-size__1NgRc;\n  animation-duration: .5s;\n}\n\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__play-icon__2GK3f {\n  position: relative;\n  left: 3px;\n}\n\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__pause-icon__3114F {\n  margin: 5px 0;\n}\n\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__seconds__dYYDA {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: -ms-flexbox;\n  display: flex;\n  min-width: 5px;\n  min-height: 8px;\n  color: #fff;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.manipulation-indicator__icon-container__2DScG .manipulation-indicator__seconds__dYYDA span {\n  display: block;\n}\n\n@keyframes manipulation-indicator__icon-size__1NgRc {\n  0% {\n    width: 22px;\n    height: 22px;\n  }\n\n  to {\n    width: 30px;\n    height: 30px;\n  }\n}\n\n@keyframes manipulation-indicator__fade-out__C-oYP {\n  0% {\n    width: 22px;\n    height: 22px;\n    padding: 19px;\n    opacity: .9;\n  }\n\n  to {\n    font-size: 14px;\n    line-height: 14px;\n    width: 30px;\n    height: 30px;\n    padding: 25px;\n    opacity: 0;\n  }\n}\n\n",""]),t.locals={"icon-container":"manipulation-indicator__icon-container__2DScG",iconContainer:"manipulation-indicator__icon-container__2DScG",icon:"manipulation-indicator__icon__1aCyo","fade-out":"manipulation-indicator__fade-out__C-oYP",fadeOut:"manipulation-indicator__fade-out__C-oYP","animated-icon":"manipulation-indicator__animated-icon__2NoY9",animatedIcon:"manipulation-indicator__animated-icon__2NoY9","icon-size":"manipulation-indicator__icon-size__1NgRc",iconSize:"manipulation-indicator__icon-size__1NgRc","play-icon":"manipulation-indicator__play-icon__2GK3f",playIcon:"manipulation-indicator__play-icon__2GK3f","pause-icon":"manipulation-indicator__pause-icon__3114F",pauseIcon:"manipulation-indicator__pause-icon__3114F",seconds:"manipulation-indicator__seconds__dYYDA"}},2873:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2562)),o=i(n(2563)),a=i(n(2564)),s=i(n(2565)),l=i(n(2566));t.default={PlayControl:o.default,ProgressControl:r.default,TimeControl:a.default,VolumeControl:s.default,FullscreenControl:l.default}},2961:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r,o=n(0),a=n.n(o),s=n(1),l=n.n(s),u=n(6),c=n.n(u),d=n(2962),f=n.n(d),h=(r=i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.className,t=c()(e,f.a.circle);return a.a.createElement("div",{className:t})},t}(a.a.Component),i.propTypes={className:l.a.string},r)},2962:function(e,t,n){var i=n(2963);"string"==typeof i&&(i=[[e.i,i,""]]);var r={singleton:!0};r.transform=void 0;n(3)(i,r);i.locals&&(e.exports=i.locals)},2963:function(e,t,n){(t=e.exports=n(2)(!1)).push([e.i,'.loading-spinner__circle__1rqtd {\n  top: 50%;\n  left: 50%;\n  margin-top: -15px;\n  margin-left: -15px;\n  color: #fff;\n  animation: loading-spinner__rotate__2gQy0 1s linear infinite;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  clip: rect(0,36px,36px,18px);\n}\n\n.loading-spinner__circle__1rqtd:after {\n  clip: rect(4px,36px,36px,18px);\n  animation: loading-spinner__clip__1_pgO 1s linear infinite;\n}\n\n.loading-spinner__circle__1rqtd:after,\n.loading-spinner__circle__1rqtd:before {\n  content: "";\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border: 3px solid currentColor;\n  border-radius: 50%;\n  position: absolute;\n}\n\n.loading-spinner__circle__1rqtd:before {\n  clip: rect(0,36px,36px,18px);\n  animation: loading-spinner__clip-reverse__HWfr0 1s linear infinite;\n}\n\n@keyframes loading-spinner__clip__1_pgO {\n  50% {\n    clip: rect(30px,36px,36px,18px);\n    animation-timing-function: ease-in-out;\n  }\n}\n\n@keyframes loading-spinner__clip-reverse__HWfr0 {\n  50% {\n    clip: rect(0,36px,9px,18px);\n    animation-timing-function: ease-in-out;\n    transform: rotate(135deg);\n  }\n}\n\n@keyframes loading-spinner__rotate__2gQy0 {\n  0% {\n    transform: rotate(0);\n    animation-timing-function: ease-out;\n  }\n\n  45% {\n    transform: rotate(18deg);\n    color: #fff;\n  }\n\n  55% {\n    transform: rotate(54deg);\n  }\n\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n',""]),t.locals={circle:"loading-spinner__circle__1rqtd",rotate:"loading-spinner__rotate__2gQy0",clip:"loading-spinner__clip__1_pgO","clip-reverse":"loading-spinner__clip-reverse__HWfr0",clipReverse:"loading-spinner__clip-reverse__HWfr0"}},2964:function(e,t,n){"use strict";function i(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return v});var r,o,a,s=n(0),l=n.n(s),u=n(1),c=n.n(u),d=n(4),f=n.n(d),h=n(194),p=(n.n(h),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),v=(a=o=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.state={isVideoEnded:!1,isVideoPaused:!0,isMouseOnPlayer:!1,isPlayerInFullScreen:!1},i.bindEvents(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillUnmount=function(){this.unbindEvents()},t.prototype.bindEvents=function(){var e=this.props.eventEmitter;e.on(h.UI_EVENTS.CONTROL_BLOCK_SHOW_TRIGGERED,this.setShowControlsState),e.on(h.UI_EVENTS.CONTROL_BLOCK_HIDE_TRIGGERED,this.setHideControlsState),e.on(h.VIDEO_EVENTS.STATE_CHANGED,this.setPlaybackStatusState),e.on(h.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.setFullScreenState)},t.prototype.unbindEvents=function(){var e=this.props.eventEmitter;e.off(h.UI_EVENTS.CONTROL_BLOCK_SHOW_TRIGGERED,this.setShowControlsState),e.off(h.UI_EVENTS.CONTROL_BLOCK_HIDE_TRIGGERED,this.setHideControlsState),e.off(h.VIDEO_EVENTS.STATE_CHANGED,this.setPlaybackStatusState),e.off(h.UI_EVENTS.FULLSCREEN_STATUS_CHANGED,this.setFullScreenState)},t.prototype.setPlaybackStatusState=function(e){var t=e.nextState;this.setState({isVideoEnded:t===h.STATES.ENDED,isVideoPaused:t===h.STATES.PAUSED,isVideoPlaying:t===h.STATES.PLAYING})},t.prototype.setShowControlsState=function(){this.props.screen.showTopShadow(),this.setState({isControlsShown:!0})},t.prototype.setHideControlsState=function(){this.props.screen.hideTopShadow(),this.setState({isControlsShown:!1})},t.prototype.hidePlayerUI=function(){var e=this.props,t=e.controls,n=e.cards;t.disableShowingContent(),t.hide(),n.hide()},t.prototype.showPlayerUI=function(){var e=this.props,t=e.controls,n=e.cards;t.enableShowingContent(),t.show(),n.show()},t.prototype.setFullScreenState=function(e){this.setState({isPlayerInFullScreen:e})},t.prototype.exitFullScreen=function(){this.props.fullScreenManager.exitFullScreen()},t.prototype.pauseVideo=function(){this.props.engine.pause()},t.prototype.render=function(){var e=this,t=this.props.children;return l.a.createElement("section",null,l.a.Children.map(t,function(t){return t?l.a.cloneElement(t,p({},e.state,{pauseVideo:e.pauseVideo,exitFullScreen:e.exitFullScreen,hidePlayerUI:e.hidePlayerUI,showPlayerUI:e.showPlayerUI})):t}))},t}(l.a.Component),o.dependencies=["engine","eventEmitter","fullScreenManager","screen","controls","cards"],o.propTypes={eventEmitter:c.a.object,engine:c.a.object,fullScreenManager:c.a.object,screen:c.a.object,controls:c.a.object,cards:c.a.object,children:c.a.node},r=a,i(r.prototype,"setPlaybackStatusState",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"setPlaybackStatusState"),r.prototype),i(r.prototype,"setShowControlsState",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"setShowControlsState"),r.prototype),i(r.prototype,"setHideControlsState",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"setHideControlsState"),r.prototype),i(r.prototype,"hidePlayerUI",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"hidePlayerUI"),r.prototype),i(r.prototype,"showPlayerUI",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"showPlayerUI"),r.prototype),i(r.prototype,"setFullScreenState",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"setFullScreenState"),r.prototype),i(r.prototype,"exitFullScreen",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"exitFullScreen"),r.prototype),i(r.prototype,"pauseVideo",[f.a],Object.getOwnPropertyDescriptor(r.prototype,"pauseVideo"),r.prototype),r)}});
//# sourceMappingURL=vod-player.js.map