"use strict";angular.module("eventsAppInternal",["eventsTranslations","eventsPreload","wixAngular","wix.common.bi","angularMoment"]).constant("PROD","events.wix.com"===location.hostname),angular.module("eventsApp",["eventsAppInternal","eventsAppExternal","ngRoute","ngSanitize","fedops"]).run(["$rootScope","$window","$timeout","settingsStore","siteStore","evResize","wixSDK","evListResize",function(a,b,c,d,e,f,g,h){e.setData(window.preloadedData.instance),a.$on("$routeChangeSuccess",function(a,e){var g=b.location.search.indexOf("resize=true")>-1;!g||["","/"].indexOf(e.originalPath)>-1||c(function(){var a=d.getSettings();"LIST"===a.widgetType&&a.listLayout!==d.LIST_LAYOUT.NEW_GRID&&a.listLayout!==d.LIST_LAYOUT.SIDE_BY_SIDE?h.resizeToDefault(a.listLayout):"LIST"!==a.widgetType&&f.resize(a.widgetLayout)},200)})}]).config(["$routeProvider","eventsBiProvider","fedopsLoggerProvider",function(a,b,c){c.setAppName("events-widget-onstage"),c.setDisableAutoLoadFinish(),b.setConfig(b.MODULES.WIDGET);var d=["widgetResolve",function(a){return a.chooseLayout()}],e=["widgetResolve",function(a){return a.loadSingleEventAndWidgetData()}],f=["widgetResolve",function(a){return a.loadEvents()}];a.when("/",{resolve:{chooseLayout:d}}).when("/event",{template:"<ev-event></ev-event>",resolve:{widgetData:e}}).when("/events/list",{template:"<ev-widget-list></ev-widget-list>",resolve:{eventList:f,widgetData:e}}).when("/events/cards",{template:"<ev-cards></ev-cards>",resolve:{eventList:f,widgetData:e}}).when("/events/new-cards",{template:"<ev-new-cards></ev-new-cards>",resolve:{eventList:f,widgetData:e}}).when("/events/side-by-side",{template:"<ev-side-by-side></ev-side-by-side>",resolve:{eventList:f,widgetData:e}})}]),angular.module("eventsAppExternal",[]).run(["$rootScope","$location","wixSDK","siteStore","eventStore","settingsStore","componentStore","formService","repository","eventAdapter","evResize","evListResize","cards",function(a,b,c,d,e,f,g,h,i,j,k,l,m){c.addEventListener(c.Events.SETTINGS_UPDATED,function(h){switch(h.type){case"SETTINGS":return f.setSettings(h.settings),g.updateComponentDraftSettings(),a.$broadcast("UPDATE_REACT_LAYOUT"),void a.$apply();case"SITE_SETTINGS":return void d.updateSiteSettings(h.settings);case"SELECT_EVENT":return void i.updateComponentDraftSettings(f.getComponentSettings(),[h.eventId]).then(function(){i.getComponentDraftSettings(c.Utils.getCompId()).then(function(b){var c=b.data.events[b.data.compEvents[0]];e.normalizeData(c),f.setSettings(c.settings),f.setComponentSettings(b.data.compSettings),g.setComponentData(b.data.compEvents,b.data.events),a.$evalAsync()})});case"RESIZE":return void k.resize(h.layout);case"RESIZE_LIST":return void(h.layout!==f.LIST_LAYOUT.NEW_GRID&&h.layout!==f.LIST_LAYOUT.SIDE_BY_SIDE&&l.resize(h.animationDuration,h.layout));case"EXPAND_EVENT":return a.$broadcast("EXPAND_EVENT"),void a.$apply();case"COLLAPSE_EVENT":return a.$broadcast("COLLAPSE_EVENT"),void a.$apply();case"DISPLAY_EVENT":return g.update(h),g.updateComponentDraftSettings(),a.$broadcast("UPDATE_REACT_LAYOUT"),void a.$apply();case"HIDE_EVENT":return g.update(h),g.updateComponentDraftSettings(),a.$broadcast("UPDATE_REACT_LAYOUT"),void a.$apply();case"CHANGE_LIST_LAYOUT":return f.setSettings({listLayout:h.layout}),void g.updateComponentDraftSettings().then(function(){h.layout===f.LIST_LAYOUT.NEW_GRID?b.path("/events/new-cards"):h.layout===f.LIST_LAYOUT.SIDE_BY_SIDE?b.path("/events/side-by-side"):(b.path(h.layout===f.LIST_LAYOUT.LIST?"/events/list":"/events/cards"),l.resizeToDefault(h.layout,500))});case"PAGE_NAVIGATION":return void c.PubSub.publish(h.type,h.page,!0);case"OB_INTRO_DATA":var m,n=j.serializeFromOB(h.data),o=f.getDefaultSettings();return void i.createEvent(n,o).then(function(a){return m=a.data.eventId,i.getComponentDraftSettings(c.Utils.getCompId())}).then(function(a){return i.updateComponentDraftSettings(a.data.compSettings,a.data.compEvents.concat([m]))}).then(function(){return window.location.reload()})}}),c.addEventListener(c.Events.STYLE_PARAMS_CHANGE,function(b){m.hasCardPropertiesChanged(b.numbers)&&m.setBreakpoints(b.numbers.cardMinWidth,b.numbers.cardMargins),f.setParams(b),a.$broadcast("WIX_PARAMS_CHANGED"),a.$evalAsync()}),c.addEventListener(c.Events.SITE_PUBLISHED,function(){g.updateComponentSettings(),d.getData().upgradePending&&d.updateSiteSettings({upgradePending:!1})}),c.addEventListener(c.Events.COMPONENT_DELETED,function(){i.unlinkComponent(c.Utils.getCompId())}),c.addEventListener(c.Events.EDIT_MODE_CHANGE,function(){"mobile"!==c.Utils.getDeviceType()&&h.loadForm(),a.$broadcast("COLLAPSE_EVENT"),a.$apply()}),c.PubSub.subscribe("EVENTS_PAGE_LOADED",function(){window.location.reload()},!1)}]),angular.module("eventsAppInternal").factory("wixSDK",["$window",function(a){return a.Wix}]),angular.module("eventsAppInternal").factory("evSDK",["$location",function(a){return{getInstance:function(){var b=a.absUrl(),c=/instance=([a-zA-Z0-9-\._]*)/.exec(b);return c&&c[1]}}}]);var Repository=function(){function a(a,b,c,d){this.$http=a,this.wixSDK=b,this.evUtils=c,this.evSDK=d,this.headers={headers:{Instance:this.evSDK.getInstance()}}}return a.$inject=["$http","wixSDK","evUtils","evSDK"],a.prototype.getRejectedPromise=function(a){return new Promise(function(b,c){c(a)})},a.prototype.isValidGet=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return!a.filter(function(a){return!a}).length},a.prototype.isValidUpdate=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return!this.wixSDK.Utils.getInstanceValue("demoMode")&&!a.filter(function(a){return!a}).length},a.prototype.getEvent=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/events/"+a,this.headers)},a.prototype.getUserEvents=function(){return this.$http.get("/_api/wix-events-web/events",this.headers)},a.prototype.getUpcomingEvents=function(a){return void 0===a&&(a=6),this.$http.get("/_api/wix-events-web/events/upcoming?size="+a,this.headers)},a.prototype.createEvent=function(a,b){return this.isValidUpdate(a,b)&&this.$http.post("/_api/wix-events-web/events?publish=true",{data:a,settings:b},this.headers)},a.prototype.publishEvent=function(a,b,c){return this.isValidUpdate(a,b,c)?this.$http.put("/_api/wix-events-web/events/"+c,{data:a,settings:b},this.headers):this.getRejectedPromise("FrontEnd publish event is not valid")},a.prototype.cloneEvent=function(a){return this.isValidUpdate(a)&&this.$http.post("/_api/wix-events-web/events?cloneFrom="+a,{},this.headers)},a.prototype.discardDraft=function(a){return this.isValidUpdate(a)&&this.$http["delete"]("/_api/wix-events-web/events/"+a+"/draft",this.headers)},a.prototype.changeEventStatus=function(a,b){return this.isValidUpdate(a,b)&&this.$http.put("/_api/wix-events-web/events/"+b+"/status",{status:a},this.headers)},a.prototype.getDeepLink=function(a,b){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/events/"+a+"/deepLink"+(b?"?pageId="+b:""),this.headers)},a.prototype.getEventTexts=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/events/"+a+"/texts",this.headers)},a.prototype.changeEventTexts=function(a,b){return this.isValidUpdate(a,b)&&this.$http.put("/_api/wix-events-web/events/"+b+"/texts",a,this.headers)},a.prototype.getComponentDraftSettings=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/component/"+a+"/draft",this.headers)},a.prototype.updateComponentDraftSettings=function(a,b){return this.$http.put("/_api/wix-events-web/component/"+this.getCompId()+"/draft",{events:b,compSettings:a},this.headers)},a.prototype.updateComponentSettings=function(a,b,c){return this.$http.put("/_api/wix-events-web/component/"+this.getCompId(),{events:b,compSettings:a,pageId:c},this.headers)},a.prototype.unlinkComponent=function(a){return this.isValidUpdate(a)&&this.$http["delete"]("/_api/wix-events-web/component/"+a+"/link",this.headers)},a.prototype.getEmails=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/notifications/"+a,this.headers)},a.prototype.updateEmails=function(a,b){return this.isValidUpdate(a,b)&&this.$http.put("/_api/wix-events-web/notifications/"+b+"/emailNotifications",{emailNotifications:a},this.headers)},a.prototype.getPrivateData=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/events/"+a+"/private",this.headers)},a.prototype.updateSubscription=function(a,b){return this.isValidUpdate(a,b)&&this.$http.put("/_api/wix-events-web/events/"+b+"/private/summarySubscription",{summarySubscription:a},this.headers)},a.prototype.getRsvpByEventId=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/rsvp/"+a,this.headers)},a.prototype.sendRSVP=function(a,b,c){return void 0===c&&(c=!1),this.isValidUpdate(a,b)&&this.$http.post("/_api/wix-events-web/rsvp/"+b+"?force="+c,a,this.headers)},a.prototype.updateRSVP=function(a,b,c){return this.isValidUpdate(a,b,c)&&this.$http.put("/_api/wix-events-web/rsvp/"+b+"/"+c,a,this.headers)},a.prototype.updateSiteSettings=function(a){return this.$http.put("/_api/wix-events-web/instance",{settings:a},this.headers)},a.prototype.getAvailableTickets=function(a){return this.isValidGet(a)&&this.$http.get("/_api/wix-events-web/tickets/"+a+"/available",this.headers)},a.prototype.getPaymentSettings=function(){return this.$http.get("/_api/wix-events-web/tickets/checkout/payment-settings",this.headers)},a.prototype.getSiteInfo=function(){return this.$http.get("/_api/wix-events-web/bo/site-info",this.headers)},a.prototype.getCompId=function(){return this.evUtils.getOrigCompId()||this.evUtils.getCompId()},a}();angular.module("eventsAppInternal").service("repository",Repository);var ApplicationLoad=function(){function a(a,b){this.fedopsLogger=a,this.wixSDK=b}return a.$inject=["fedopsLogger","wixSDK"],a.prototype.reportAppLoaded=function(){this.fedopsLogger.appLoaded(),this.wixSDK.Performance.applicationLoaded()},a}();angular.module("eventsAppInternal").service("applicationLoad",ApplicationLoad);var DateService=function(){function a(a,b,c,d){this.moment=a,this.wixSDK=b,this.evUtils=c,this.$translate=d,this.DEFAULT_FORMAT="YYYY-MM-DD HH:mm",this.DEFAULT_DATE_FORMAT="YYYY-MM-DD",this.DEFAULT_TIME_FORMAT="HH:mm",this.EN_LOCALE="en",a.locale(c.getLocale()||this.EN_LOCALE),this.dateTimeSeparator=d("dashboard_dateTimeSeparator")}return a.$inject=["moment","wixSDK","evUtils","$translate"],a.prototype.createDateISOString=function(a,b,c){return this.moment.tz(a+" "+b,c).toISOString()},a.prototype.getTimeStamp=function(a,b,c){return+this.moment(a+" "+b).tz(c)},a.prototype.addHours=function(a,b){return this.normalizeMomentDateTime(this.stringToMoment(a).add(b,"hours"))},a.prototype.stringToMoment=function(a){return this.moment(a,this.DEFAULT_FORMAT)},a.prototype.normalizeMomentDateTime=function(a){return{date:a.format(this.DEFAULT_DATE_FORMAT),time:a.format(this.DEFAULT_TIME_FORMAT)}},a.prototype.normalizeStringDateTime=function(a){return this.normalizeMomentDateTime(this.stringToMoment(a))},a.prototype.now=function(a){return this.moment.tz(a)},a.prototype.addDaysToCurrentDate=function(a){return this.moment().add(a,"days").format(this.DEFAULT_DATE_FORMAT)},a.prototype.getDateStringFromObj=function(a){return this.moment(a).format(this.DEFAULT_DATE_FORMAT)},a.prototype.getDateObjFromString=function(a,b){return this.moment(a,this.DEFAULT_DATE_FORMAT).tz(b).toDate()},a.prototype.getDate=function(a,b){return this.moment.tz(a,b).format(this.DEFAULT_DATE_FORMAT)},a.prototype.getTime=function(a,b){return this.moment.tz(a,b).format(this.DEFAULT_TIME_FORMAT)},a.prototype.getDifference=function(a,b){return this.moment(a).diff(this.moment(b))},a.prototype.getDifferenceInHours=function(a,b){return this.moment(b,this.DEFAULT_FORMAT).diff(this.moment(a,this.DEFAULT_FORMAT))/36e5},a.prototype.isDateBefore=function(a,b){return this.moment(a,this.DEFAULT_FORMAT).isBefore(this.moment(b,this.DEFAULT_FORMAT))},a.prototype.isTimeBefore=function(a,b){return this.moment(a,this.DEFAULT_TIME_FORMAT,this.EN_LOCALE).isBefore(this.moment(b,this.DEFAULT_TIME_FORMAT,this.EN_LOCALE))},a.prototype.guessTimeZoneId=function(){return this.moment.tz.guess()},a.prototype.convertToLocaleTime=function(a){var b=this.$translate("dashboard_timePreviewFormat");return this.moment(a,this.DEFAULT_TIME_FORMAT,this.EN_LOCALE).format(b)},a.prototype.formatDatesForPreview=function(a,b){var c=this.$translate("dashboard_datePreviewFullFormat"),d=this.$translate("dashboard_datePreviewMonthDayFormat"),e=this.$translate("dashboard_datePreviewDayYearFormat"),f=this.moment(a),g=b?this.moment(b):null;if(g){var h=f.isSame(g,"year"),i=f.isSame(g,"month"),j=f.isSame(g,"day");if(!h)return f.format(c)+" - "+g.format(c);if(!i)return f.format(d)+" - "+g.format(c);if(!j)return f.format(d)+" - "+g.format(e)}return f.format(c)},a.prototype.formatTimesForPreview=function(a,b,c,d){var e=this.$translate("dashboard_timePreviewFormat"),f=this.moment(a,this.DEFAULT_TIME_FORMAT).format(e),g=b?this.moment(b,this.DEFAULT_TIME_FORMAT).format(e):null,h=this.moment(d+" "+a).tz(c).format("z");return" "+this.dateTimeSeparator+" "+f+(g?" - "+g:"")+" "+h},a.prototype.formatSingleDate=function(a,b){var c=this.$translate("dashboard_automaticEmailsDatePreviewFormat"),d=this.$translate("dashboard_automaticEmailsTimePreviewFormat"),e=this.moment.tz(a,b),f=e.format(c),g=e.format(d);return f+" "+this.dateTimeSeparator+" "+g},a.prototype.formatTimeForEmail=function(a,b,c,d,e){if(d)return e;var f=""+this.formatSingleDate(a,c);return b?f+(" â€“ "+this.formatSingleDate(b,c)):f},a.prototype.formatDate=function(a,b){return this.moment(a).format(b)},a.prototype.comparator=function(a,b){if(a.dateTbd)return b.dateTbd?this.getDifference(b.modified,a.modified):1;if(b.dateTbd)return-1;var c=this.createDateISOString(a.startDate,a.startTime,a.timeZoneId),d=this.createDateISOString(b.startDate,b.startTime,b.timeZoneId),e=this.getDifference(c,d);return 0===e?this.getDifference(b.modified,a.modified):e},a}();angular.module("eventsAppInternal").service("dateService",DateService);var WidgetResolve=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.evUtils=a,this.eventStore=b,this.settingsStore=c,this.formBuilder=d,this.componentStore=e,this.repository=f,this.$location=g,this.$window=h,this.wixSDK=i,this.dispatcher=j,this.demoData=k,this.siteStore=l,this.preloadedDataUsed=!1}return a.$inject=["evUtils","eventStore","settingsStore","formBuilder","componentStore","repository","$location","$window","wixSDK","dispatcher","demoData","siteStore"],a.prototype.chooseLayout=function(){var a=this;this.evUtils.isProduction()?this.$location.path(this.getPath(this.$window.preloadedData)):this.repository.getComponentDraftSettings(this.wixSDK.Utils.getCompId()).then(function(b){return a.$location.path(a.getPath({draft:b.data,event:b.data}))})["catch"](function(){return a.$location.path("LIST"===a.siteStore.getData().defaultWidgetType?"/events/list":"/event")})},a.prototype.loadEvents=function(){var a=this;this.evUtils.isSite()||this.repository.getUserEvents().then(function(b){var c={type:EventListActions.RECEIVE_EVENT_LIST,events:b.data.events};a.dispatcher.dispatch(c)})},a.prototype.loadSingleEventAndWidgetData=function(){return this.evUtils.isProduction()&&!this.preloadedDataUsed?(this.preloadedDataUsed=!0,this.assignPreloadedData(this.$window.preloadedData)):this.loadDataFromServer()},a.prototype.loadDataFromServer=function(){var a=this;return this.repository.getComponentDraftSettings(this.wixSDK.Utils.getCompId()).then(function(b){return a.normalizeData(b.data)})["catch"](function(){return a.assignDemoData("LIST")})},a.prototype.assignPreloadedData=function(a){return this.evUtils.isSite()||this.evUtils.isDemoMode()?this.normalizeData(a.event):(a.draft.fakeComp&&this.createCompSettings(a.draft.compSettings,a.draft.compEvents),this.normalizeData(a.draft))},a.prototype.normalizeData=function(a){var b=a.compEvents.length,c=Object.keys(a.events).length;return b&&c?(this.evUtils.isSiteCreatedFromTemplate()&&(a.compEvents=Object.keys(a.events)),void this.assignData(a)):c?(a.compEvents=Object.keys(a.events),void this.assignData(a)):(this.assignDemoData(a.compSettings&&a.compSettings.widgetType||this.siteStore.getData().defaultWidgetType),void this.settingsStore.setComponentSettings(a.compSettings))},a.prototype.assignData=function(a,b){void 0===b&&(b=!1);var c=a.events[a.compEvents[0]]||a.events[Object.keys(a.events)[0]];this.eventStore.normalizeData(c),this.settingsStore.setSettings(c.settings||{}),this.formBuilder.setConfig(c.data.internalSettings.rsvpForm.config,!0),this.componentStore.setComponentData(a.compEvents,a.events,b),this.settingsStore.setComponentSettings(a.compSettings)},a.prototype.assignDemoData=function(a){if("LIST"===a){var b=["DEMO1","DEMO2","DEMO3"],c=this.demoData.getDemoEvents(b);this.assignData({compEvents:b,events:c},!0)}else{var b=["DEMO"],c={DEMO:{data:this.demoData.getDefaultEventData(),eventId:"DEMO",slug:"demo0",status:"Published"}};this.assignData({compEvents:b,events:c},!0)}},a.prototype.getPath=function(a){var b=(this.evUtils.isSite()||this.evUtils.isDemoMode()?a.event:a.draft)||{},c=_.isEmpty(b.compSettings)?b.settings||{}:b.compSettings;return c.widgetType?"LIST"===c.widgetType?this.resolveListLayoutPath(c.listLayout):"/event":"LIST"===this.siteStore.getData().defaultWidgetType?this.resolveListLayoutPath(this.settingsStore.getDefaultComponentSettings().listLayout):"/event"},a.prototype.resolveListLayoutPath=function(a){if(this.evUtils.isMobile())return"/events/list";switch(a){case this.settingsStore.LIST_LAYOUT.LIST:return"/events/list";case this.settingsStore.LIST_LAYOUT.GRID:return"/events/cards";case this.settingsStore.LIST_LAYOUT.NEW_GRID:return"/events/new-cards";case this.settingsStore.LIST_LAYOUT.SIDE_BY_SIDE:return"/events/side-by-side";default:return"/events/new-cards"}},a.prototype.createCompSettings=function(a,b){this.repository.updateComponentDraftSettings(a,b)},a}();angular.module("eventsAppInternal").service("widgetResolve",WidgetResolve);var FormService=function(){function a(a,b,c,d,e){this.$rootScope=a,this.$window=b,this.wixSDK=c,this.BASE_URL=d,this.experimentManager=e,this.EVENTS={OPEN_FORM:"form.openForm",OPEN_FORM_FROM_LIST:"form.openFormFromList",CLOSE_FORM:"form.closeForm"},this.formId=(new Date).valueOf().toString(16),this.origCompId=this.wixSDK.Utils.getOrigCompId()}return a.$inject=["$rootScope","$window","wixSDK","BASE_URL","experimentManager"],a.prototype.loadForm=function(){"editor"!==this.wixSDK.Utils.getViewMode()&&this.wixSDK.openPopup(this.BASE_URL+"form.html","0%","100%",{origin:this.wixSDK.WindowOrigin.FIXED,placement:this.wixSDK.WindowPlacement.CENTER},null,this.wixSDK.Theme.BARE)},a.prototype.openForm=function(a){return this.experimentManager.isExperimentEnabled("specs.events.ui.NewRegistrationStatus")&&a.externalLink?void this.$window.open(a.externalLink,"_blank"):void("mobile"===this.wixSDK.Utils.getDeviceType()?this.openMobileForm(a):this.broadcast(a.fromList?this.EVENTS.OPEN_FORM_FROM_LIST:this.EVENTS.OPEN_FORM,a))},a.prototype.openMobileForm=function(a){var b=this.BASE_URL+"form.html?response="+a.response+"&eventId="+a.eventId+"&dividerIsVisible="+a.dividerIsVisible+"&timestamp="+a.timestamp+"&fromList="+a.fromList;this.wixSDK.openModal(b,320,this.$window.screen.height,angular.noop,this.wixSDK.Theme.BARE)},a.prototype.closeOtherForms=function(){this.broadcast(this.EVENTS.CLOSE_FORM,{formId:this.formId,compId:this.origCompId})},a.prototype.subscribeToOpen=function(a){var b=this;this.wixSDK.PubSub.subscribe(this.EVENTS.OPEN_FORM,function(c){b.wixSDK.Utils.getOrigCompId()===c.origin&&b.$rootScope.$apply(function(){return a(c.data)})})},a.prototype.subscribeToOpenFromList=function(a){var b=this;this.wixSDK.PubSub.subscribe(this.EVENTS.OPEN_FORM_FROM_LIST,function(c){b.wixSDK.Utils.getOrigCompId()===c.origin&&b.$rootScope.$apply(function(){return a(c.data)})})},a.prototype.subscribeToClose=function(){var a=this;this.wixSDK.PubSub.subscribe(this.EVENTS.CLOSE_FORM,function(b){a.formId!==b.data.formId&&a.origCompId===b.data.compId&&a.wixSDK.closeWindow(null)})},a.prototype.broadcast=function(a,b){this.wixSDK.PubSub.publish(a,b,!1)},a}();angular.module("eventsAppInternal").service("formService",FormService);var ShareService=function(){function a(a,b,c,d,e,f,g){this.$window=a,this.$httpParamSerializer=b,this.$translate=c,this.wixSDK=d,this.siteStore=e,this.evUtils=f,this.repository=g}return a.$inject=["$window","$httpParamSerializer","$translate","wixSDK","siteStore","evUtils","repository"],a.prototype.getSiteUrl=function(a){var b=this;return new Promise(function(c,d){return b.siteStore.PAGE_ENABLED&&a&&a.includes("DEMO")?void b.wixSDK.getStateUrl("events",a.toLowerCase(),function(a){return c(a.url)},d):!a||b.isDemoMode()?void d():("dashboard"===b.wixSDK.Utils.getViewMode()&&b.repository.getSiteInfo().then(function(e){e.data.isSitePublished&&b.getDeepLink(a,"",c,d)},function(){return d()}),void b.wixSDK.getCurrentPageId(function(e){b.evUtils.isSite()?b.getDeepLink(a,e,c,d):b.repository.getSiteInfo().then(function(f){f.data.isSitePublished&&b.getDeepLink(a,e,c,d)},function(){return d()})}))})},a.prototype.shareOn=function(a,b){this.openSharePopup(this["get"+a+"Url"](b))},a.prototype.isDemoMode=function(){return this.wixSDK.Utils.getInstanceValue("demoMode")},a.prototype.getDeepLink=function(a,b,c,d){this.repository.getDeepLink(a,b).then(function(a){c(a.data.deepLink)},d)},a.prototype.openSharePopup=function(a){this.$window.open(a,"_blank","top=200, left=200, width=700, height=500")},a.prototype.facebookShare=function(a){this.openSharePopup(this.getFacebookUrl(a))},a.prototype.twitterShare=function(a){this.openSharePopup(this.getTwitterUrl(a))},a.prototype.linkedInShare=function(a){this.openSharePopup(this.getLinkedInUrl(a))},a.prototype.getFacebookUrl=function(a){var b={title:this.$translate("facebookShareTitle")};return"https://www.facebook.com/sharer/sharer.php?u="+a+"&"+this.$httpParamSerializer(b)},a.prototype.getTwitterUrl=function(a){var b={text:this.$translate("twitterShareTitle")};return"https://twitter.com/intent/tweet?url="+a+"&"+this.$httpParamSerializer(b)},a.prototype.getLinkedInUrl=function(a){var b={title:this.$translate("linkedInShareTitle")};return"https://www.linkedin.com/shareArticle?mini=true&url="+a+"&"+this.$httpParamSerializer(b)},a}();angular.module("eventsAppInternal").service("shareService",ShareService);var EventsBiLogger=function(){function a(a,b,c,d,e,f,g,h,i,j){this.wixBiLogger=a,this.eventStore=b,this.settingsStore=c,this.eventListStore=d,this.eventAdapter=e,this.demoData=f,this.dateService=g,this.siteStore=h,this.wixSDK=i,this.PROD=j,this.setWidgetEvents(),this.setSettingsEvents(),this.setDashboardEvents()}return a.$inject=["wixBiLogger","eventStore","settingsStore","eventListStore","eventAdapter","demoData","dateService","siteStore","wixSDK","PROD"],a.prototype.setWidgetEvents=function(){var a=this;this.WIDGET={sendOpenRegistrationFormClicked:function(b,c,d){return a.sendUoUBIEvent("uou_open_reg_form_click",{questions_count:b,destination_type:c,event_id:d})}}},a.prototype.setSettingsEvents=function(){var a=this;this.SETTINGS={sendSettingsOpened:function(b){return a.sendBIEvent("settings_opened",{loading_time:b})},sendSettingsTabClicked:function(b){return a.sendBIEvent("settings_tab_clicked",b)},sendCreateEventClicked:function(){return a.sendBIEvent("create_manage_event_click",{button_name:"create_event"})},sendManageEventClicked:function(){return a.sendBIEvent("create_manage_event_click",{button_name:"manage_event"})}}},a.prototype.setDashboardEvents=function(){var a=this;this.DASHBOARD={sendEventCreated:function(){return a.sendBIEvent("save_event_click",a.getSavedEventParams(!0))},sendEventSaved:function(){return a.sendBIEvent("save_event_click",a.getSavedEventParams(!1))},sendBrowseYourEventClicked:function(){return a.sendBIEvent("event_saved_popup_click",{button_name:"browse_your_event",is_first_event_save:!0})},sendClosePopupClicked:function(){return a.sendBIEvent("event_saved_popup_click",{button_name:"close",is_first_event_save:!0})},sendRegFormAddFieldClicked:function(){return a.sendBIEvent("reg_form_add_field_click",{})},sendRegFormFieldAdded:function(b){return a.sendBIEvent("reg_form_field_added",b)},sendGeneralOptionsSaved:function(){return a.sendBIEvent("reg_form_save_click",a.getSavedEventDetails("general_options"))},sendThankYouMessagesSaved:function(){return a.sendBIEvent("reg_form_save_click",a.getSavedEventDetails("thank_you_message"))},sendShoutoutTemplateClicked:function(b){return a.sendBIEvent("invitations_tab_click",{button_name:null,so_template_id:b,invitations_button:"template_click"})},sendMyShoutoutsClicked:function(){return a.sendBIEvent("invitations_tab_click",{button_name:null,so_template_id:null,invitations_button:"my_shoutouts"})},sendShareButtonClicked:function(b){return a.sendBIEvent("invitations_tab_click",{button_name:b,so_template_id:null,invitations_button:"share_click"})},sendAddGuestClicked:function(){return a.sendBIEvent("guest_list_click",{button_name:"add_guest"})},sendExportClicked:function(){return a.sendBIEvent("guest_list_click",{button_name:"export"})},sendInviteMoreClicked:function(){return a.sendBIEvent("guest_list_click",{button_name:"invite_more"})},sendEventTabClicked:function(b){return a.sendBIEvent("event_tab_clicked",b)},sendRegFormFieldRemoved:function(b){return a.sendBIEvent("reg_form_field_removed",b)},sendRegFormCustomFieldChanged:function(b){return a.sendBIEvent("reg_form_custom_field_changed",b)},sendRegFormFieldDuplicated:function(b){return a.sendBIEvent("reg_form_field_duplicated",b)},sendEventOptionsClicked:function(b){return a.sendBIEvent("event_options_click",{button_name:b})},sendEventCancelClicked:function(b){return a.sendBIEvent("event_cancel_popup",Object.assign({button_name:b},a.getSavedEventParams(!1)))},sendCreateEventClicked:function(){return a.sendBIEvent("create_manage_event_click",{button_name:"create_event"})},sendManageEventClicked:function(){return a.sendBIEvent("create_manage_event_click",{button_name:"manage_event"})}}},a.prototype.sendUoUBIEvent=function(a,b){this.PROD&&this.wixBiLogger.log(this.wixBiLogger.events[a],Object.assign(b,this.getUoUGeneralData()))},a.prototype.sendBIEvent=function(a,b){this.PROD&&this.wixBiLogger.log(this.wixBiLogger.events[a],Object.assign(b,this.getGeneralData()))},a.prototype.getGeneralData=function(){var a=_.isEmpty(this.eventStore.getData())?this.eventAdapter.normalize({data:this.demoData.getDefaultEventData()}):this.eventStore.getData(),b={adapter:"events-users",is_demo_data:!this.siteStore.getData().firstTimeCompleted,total_guests_count:null,confirmed_guests_count:null,declined_guests_count:null,waiting_list_guest_count:null,event_id:a.eventId,event_name:a.title,event_start_date:a.dateTbd?null:this.dateService.getTimeStamp(a.startDate,a.startTime,a.timeZoneId),event_finish_date:a.dateTbd||!a.endDate?null:this.dateService.getTimeStamp(a.endDate,a.endTime,a.timeZoneId),event_timezone:a.dateTbd?null:a.timeZoneId,event_location:a.locationTbd?null:(a.location.name?a.location.name+", ":"")+a.location.address,event_capacity:a.guestLimit,questions_count:a.rsvpForm.config.fields.length+1,show_image:!!a.mainImage};if(this.eventListStore.getData){var c=this.eventListStore.getData().events.length,d=this.eventListStore.getData().events.sort(function(a,b){return+new Date(a.created)-+new Date(b.created)}).findIndex(function(b){return b.eventId===a.eventId})+1;b.is_first_event=1>=c,b.total_events_count=c,d>0&&(b.event_rank=d)}return b},a.prototype.getSavedEventParams=function(a){var b=this.eventStore.getData();return{allow_waiting_list:b.waitingListEnabled,allow_no_response:"YesAndNo"===b.registrationType,is_first_event_save:a,create_event_button:"all"}},a.prototype.getSavedEventDetails=function(a){var b=this.eventStore.getData(),c=this.settingsStore.getSettings();return{allow_waiting_list:b.waitingListEnabled,allow_no_response:"YesAndNo"===b.registrationType,allow_guest_sharing_yes:c.messages.yesMessage.shareButtons,allow_guest_sharing_no:c.messages.noMessage.shareButtons,allow_guest_sharing_waiting:c.messages.waitingMessage.shareButtons,allow_guest_calendar_yes:c.messages.yesMessage.calendarLink,allow_guest_calendar_waiting:c.messages.waitingMessage.calendarLink,button_name:a}},a.prototype.getUoUGeneralData=function(){return{adapter:"events-uou",biToken:this.wixSDK.Utils.getInstanceValue("biToken"),visitor_id:this.wixSDK.Utils.getInstanceValue("aid")||this.wixSDK.Utils.getInstanceValue("uid"),show_image:!!this.eventStore.getData().mainImage}},a}();angular.module("eventsAppInternal").service("eventsBiLogger",EventsBiLogger);var LogentriesLogger=function(){function a(a){}return a.$inject=["PROD"],a}();angular.module("eventsAppInternal").service("leLogger",LogentriesLogger);var SettingsHelper=function(){function a(a,b,c,d,e,f){var g=this;this.$timeout=a,this.settingsStore=b,this.siteStore=c,this.eventStore=d,this.wixSDK=e,this.cookies=f,this.margins=[{key:"countdownMarginBottom",getValue:function(){return g.isTitleVisible()?30:60}},{key:"titleMarginBottom",getValue:function(){return g.isDescriptionVisible()||g.isDateVisible()||g.isLocationVisible()?36:68}},{key:"descriptionMarginBottom",getValue:function(){return g.isCompactDateAndLocationVisible()?54:42}},{key:"dateMarginBottom",getValue:function(){return g.isLocationVisible()?g.isDateAndLocationLabelsVisible()?42:12:g.isDateAndLocationLabelsVisible()?54:62}},{key:"locationMarginBottom",getValue:function(){return g.isDateAndLocationLabelsVisible()?54:62}},{key:"dateAndLocationMarginBottom",getValue:function(){return g.isCompactDateAndLocationVisible()?g.isDescriptionVisible()&&g.isHorizontalDividerVisible()?40:80:54}},{key:"rsvpMarginBottom",getValue:function(){return g.isShareOptionsVisible()?30:0}}],this.eventData=this.eventStore.getData(),this.settings=this.settingsStore.getSettings(),this.params=this.settingsStore.getParams()}return a.$inject=["$timeout","settingsStore","siteStore","eventStore","wixSDK","cookies"],a.prototype.isHorizontalLayout=function(){return this.settings.widgetLayout===this.settingsStore.LAYOUT.FULL},a.prototype.isVerticalLayout=function(){return this.settings.widgetLayout===this.settingsStore.LAYOUT.VERTICAL},a.prototype.isBackgroundLayout=function(){return this.settings.widgetLayout===this.settingsStore.LAYOUT.BACKGROUND&&this.isImageVisible()},a.prototype.isButtonLayout=function(){return this.settings.widgetLayout===this.settingsStore.LAYOUT.BUTTON_ONLY},a.prototype.isLeftAlignment=function(){return this.settings.alignment===this.settingsStore.ALIGNMENT.LEFT},a.prototype.isRightAlignment=function(){return this.settings.alignment===this.settingsStore.ALIGNMENT.RIGHT},a.prototype.isCenterContentAlignment=function(){return this.settings.contentAlignment===this.settingsStore.CONTENT_ALIGNMENT.CENTER},a.prototype.isBottomContentAlignment=function(){return this.settings.contentAlignment===this.settingsStore.CONTENT_ALIGNMENT.BOTTOM},a.prototype.isRightImage=function(){return this.isHorizontalLayout()&&this.settings.imagePosition===this.settingsStore.HORIZONTAL_IMAGE_POSITION.RIGHT},a.prototype.isBottomImage=function(){return this.isVerticalLayout()&&this.settings.verticalImagePosition===this.settingsStore.VERTICAL_IMAGE_POSITION.BOTTOM},a.prototype.isFitImage=function(){return this.settings.imageScaling===this.settingsStore.IMAGE_SCALING.FIT},a.prototype.isAllComponentsHidden=function(){return!(this.isCountdownVisible()||this.isTitleVisible()||this.isDescriptionVisible()||this.isDateVisible()||this.isLocationVisible()||this.isShareOptionsVisible())},a.prototype.isOnlyButtonVisible=function(){return this.isButtonLayout()||this.isAllComponentsHidden()},a.prototype.isImagePresent=function(){return this.eventData.mainImage},a.prototype.isImageVisible=function(){return this.settings.showImage&&!this.isOnlyButtonVisible()&&this.isImagePresent()},a.prototype.isCountdownVisible=function(){return this.params.booleans.showCountdown&&!this.eventData.dateTbd&&!this.isButtonLayout();
},a.prototype.isTitleVisible=function(){return this.params.booleans.showTitle&&!this.isButtonLayout()},a.prototype.isDescriptionVisible=function(){return this.params.booleans.showDescription&&!this.isButtonLayout()},a.prototype.isDateVisible=function(){return this.params.booleans.showDate&&!this.isButtonLayout()},a.prototype.isHoursVisible=function(){return this.params.booleans.showHours&&!this.isButtonLayout()},a.prototype.isLocationVisible=function(){return this.params.booleans.showLocation&&!this.isButtonLayout()},a.prototype.isVerticalDateAndLocationVisible=function(){return this.params.numbers.locationAndDateFormat===this.settingsStore.LOCATION_AND_DATE_FORMAT.VERTICAL&&!this.isButtonLayout()},a.prototype.isHorizontalDateAndLocationVisible=function(){return this.params.numbers.locationAndDateFormat===this.settingsStore.LOCATION_AND_DATE_FORMAT.HORIZONTAL&&!this.isButtonLayout()},a.prototype.isCompactDateAndLocationVisible=function(){return this.params.numbers.locationAndDateFormat===this.settingsStore.LOCATION_AND_DATE_FORMAT.COMPACT&&!this.isButtonLayout()},a.prototype.isShareOptionsVisible=function(){return this.params.booleans.showShareOptions&&!this.isButtonLayout()},a.prototype.isDateLabelVisible=function(){return this.params.booleans.showLabels&&this.isDateVisible()&&!this.isCompactDateAndLocationVisible()},a.prototype.isLocationLabelVisible=function(){return this.params.booleans.showLabels&&this.isLocationVisible()&&!this.isCompactDateAndLocationVisible()},a.prototype.isRsvpLabelVisible=function(){return this.params.booleans.showRSVPTitle},a.prototype.isDateAndLocationLabelsVisible=function(){return this.isDateLabelVisible()||this.isLocationLabelVisible()},a.prototype.isLabelsVisible=function(){return this.isDateLabelVisible()||this.isLocationLabelVisible()||this.isRsvpLabelVisible()},a.prototype.isTextsVisible=function(){return this.isDateVisible()||this.isLocationVisible()||this.isShareOptionsVisible()},a.prototype.isDividersVisible=function(){var a=this.isHorizontalDateAndLocationVisible()&&this.params.booleans.showFullDividers&&this.isDateVisible()&&this.isLocationVisible(),b=this.isVerticalDateAndLocationVisible()&&this.params.booleans.showHorizontalDividers&&(this.isDateVisible()||this.isLocationVisible()),c=this.isCompactDateAndLocationVisible()&&this.params.booleans.showCompactDividers&&this.isDescriptionVisible()&&(this.isDateVisible()||this.isLocationVisible());return(a||b||c)&&!this.isButtonLayout()},a.prototype.isHorizontalDividerVisible=function(){return this.isDescriptionVisible()&&this.isCompactDateAndLocationVisible()&&(this.isDateVisible()||this.isLocationVisible())&&this.params.booleans.showCompactDividers},a.prototype.isTextsSectionVisible=function(){return this.isCountdownVisible()||this.isTitleVisible()||this.isDescriptionVisible()||this.isLabelsVisible()||this.isTextsVisible()},a.prototype.isDividersSectionVisible=function(){return this.isVerticalDateAndLocationVisible()&&this.isDateAndLocationLabelsVisible()&&(this.isDateVisible()||this.isLocationVisible())||this.isHorizontalDateAndLocationVisible()&&this.isDateVisible()&&this.isLocationVisible()||this.isCompactDateAndLocationVisible()&&this.isDescriptionVisible()&&(this.isDateVisible()||this.isLocationVisible())&&!this.isButtonLayout()},a.prototype.isFullButtonsVisible=function(){return this.params.numbers.buttonsStyle===this.settingsStore.BUTTONS_STYLE.FULL},a.prototype.isFullRoundedButtonsVisible=function(){return this.params.numbers.buttonsStyle===this.settingsStore.BUTTONS_STYLE.FULL_ROUNDED},a.prototype.isHollowButtonsVisible=function(){return this.params.numbers.buttonsStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW},a.prototype.isHollowRoundedButtonsVisible=function(){return this.params.numbers.buttonsStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW_ROUNDED},a.prototype.isTimeAndLocationSectionVisible=function(){return(this.isDateVisible()||this.isLocationVisible())&&!this.isCompactDateAndLocationVisible()},a.prototype.isListLayout=function(){return"LIST"===this.settings.widgetType},a.prototype.updateSingleLayoutComponentVisibility=function(a,b){var c=this.isAllComponentsHidden();this.params.booleans[a]=b,this.setComponentsMargin(),this.resizeSingleLayoutWidget(b,c,this.settings.widgetLayout)},a.prototype.setComponentsMargin=function(){var a=this;this.margins.forEach(function(b){var c=b.getValue();a.wixSDK.Styles.setNumberParam(b.key,{value:c}),a.params.numbers[b.key]=c})},a.prototype.resizeSingleLayoutWidget=function(a,b,c){var d=this.isAllComponentsHidden()?this.settingsStore.LAYOUT.BUTTON_ONLY:c;a&&!b?this.triggerResize():(a&&b||this.isAllComponentsHidden())&&this.triggerResize(d)},a.prototype.triggerResize=function(a){var b=this;this.$timeout(function(){return b.settingsStore.triggerUpdate({type:"RESIZE",layout:a},b.wixSDK.Utils.getOrigCompId())},200)},a.prototype.navigateToPage=function(a,b){var c=this;void 0===a&&(a="demo1"),this.wixSDK.getCurrentPageId(function(d){switch(c.cookies.setCookie("backPageId",d),c.wixSDK.Utils.getViewMode()){case"editor":c.navigateInEditor(a,b);break;case"preview":c.navigateInPreview(a,b);break;case"site":c.navigateInSite(a,b)}})},a.prototype.navigateInEditor=function(a,b){b="form"===b?"/form":"ticket-form"===b?"/ticket-form":"",this.wixSDK.Settings.triggerSettingsUpdatedEvent({type:"PAGE_NAVIGATION",page:""+a+b},this.wixSDK.Utils.getOrigCompId()),this.wixSDK.Utils.navigateToSection({sectionId:"events"},a)},a.prototype.navigateInPreview=function(a,b){b=1===this.siteStore.getData().pagesType?"":"/form",this.wixSDK.PubSub.publish("PAGE_NAVIGATION",""+a+b,!0),this.wixSDK.Utils.navigateToSection({sectionId:"events"},a)},a.prototype.navigateInSite=function(a,b){b=1===this.siteStore.getData().pagesType||this.siteStore.isTicketedSite()?"":"/form",this.wixSDK.Utils.navigateToSection({sectionId:"events"},""+a+b)},a}();angular.module("eventsAppInternal").service("settingsHelper",SettingsHelper);var ListSettingsHelper=function(){function a(a,b){this.settingsStore=a,this.eventStore=b,this.eventData=this.eventStore.getData(),this.settings=this.settingsStore.getSettings(),this.params=this.settingsStore.getParams()}return a.$inject=["settingsStore","eventStore"],a.prototype.isListLayout=function(){return this.settings.listLayout===this.settingsStore.LIST_LAYOUT.LIST},a.prototype.isCardsLayout=function(){return this.isOldCardsLayout()||this.isNewCardsLayout()},a.prototype.isOldCardsLayout=function(){return this.settings.listLayout===this.settingsStore.LIST_LAYOUT.GRID},a.prototype.isNewCardsLayout=function(){return this.settings.listLayout===this.settingsStore.LIST_LAYOUT.NEW_GRID},a.prototype.isSideBySideLayout=function(){return this.settings.listLayout===this.settingsStore.LIST_LAYOUT.SIDE_BY_SIDE},a.prototype.isLeftAlignment=function(){return this.settings.listAlignment===this.settingsStore.ALIGNMENT.LEFT},a.prototype.isRightAlignment=function(){return this.settings.listAlignment===this.settingsStore.ALIGNMENT.RIGHT},a.prototype.isImage1to1=function(){return"1:1"===this.settings.imageRatio},a.prototype.isMainTitleVisible=function(){return this.params.booleans.listShowMainTitle},a.prototype.isDateVisible=function(){return this.params.booleans.listShowDate},a.prototype.isDayOfWeekVisible=function(){return this.params.booleans.listShowDayOfWeek},a.prototype.isVenueVisible=function(){return this.params.booleans.listShowVenueName},a.prototype.isFullDateVisible=function(){return this.params.booleans.listShowFullDate},a.prototype.isHoursVisible=function(){return this.params.booleans.listShowHours},a.prototype.isLocationVisible=function(){return this.params.booleans.listShowLocation},a.prototype.isCompactDateAndLocationVisible=function(){return this.params.numbers.listLocationAndDateFormat===this.settingsStore.LIST_LOCATION_AND_DATE_FORMAT.COMPACT},a.prototype.isDescriptionVisible=function(){return this.params.booleans.listShowDescription},a.prototype.isSocialShareVisible=function(){return this.params.booleans.listShowSocialShare},a.prototype.isImageVisible=function(){return this.params.booleans.listShowImage},a.prototype.isAdditionalComponentsHidden=function(){return!this.params.booleans.listShowAdditionalInfo||!this.isFullDateVisible()&&!this.isLocationVisible()&&!this.isDescriptionVisible()&&!this.isSocialShareVisible()},a.prototype.isRoundedButton=function(){return this.params.numbers.listButtonStyle===this.settingsStore.BUTTONS_STYLE.FULL_ROUNDED||this.params.numbers.listButtonStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW_ROUNDED},a.prototype.isHollowButton=function(){return this.params.numbers.listButtonStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW||this.params.numbers.listButtonStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW_ROUNDED},a}();angular.module("eventsAppInternal").service("listSettingsHelper",ListSettingsHelper);var EvUtils=function(){function a(a,b,c,d){var e=this;this.wixSDK=a,this.$window=b,this.ENV=c,this.$location=d,this.wixSDK.Dashboard.getEditorUrl(function(a){return e.editorUrl=a})}return a.$inject=["wixSDK","$window","ENV","$location"],a.prototype.isMobile=function(){return"mobile"===this.wixSDK.Utils.getDeviceType()},a.prototype.isSite=function(){return"site"===this.wixSDK.Utils.getViewMode()||"standalone"===this.wixSDK.Utils.getViewMode()},a.prototype.isEditor=function(){return"editor"===this.wixSDK.Utils.getViewMode()},a.prototype.isDemoMode=function(){return this.wixSDK.Utils.getDemoMode()},a.prototype.isProduction=function(){return"events.wix.com"===this.$location.host()},a.prototype.getOrigCompId=function(){return this.isBM()?"":this.wixSDK.Utils.getOrigCompId()},a.prototype.getCompId=function(){return this.isBM()?"":this.wixSDK.Utils.getCompId()},a.prototype.getLocale=function(){return this.isBM()?"":this.wixSDK.Utils.getLocale()},a.prototype.isBM=function(){return"BM"===this.ENV},a.prototype.getEditorUrl=function(){return this.editorUrl},a.prototype.closeWindow=function(){this.wixSDK.closeWindow()},a.prototype.isSiteCreatedFromTemplate=function(){return!!this.wixSDK.Utils.getInstanceValue("originInstanceId")},a.prototype.saveSite=function(a){this.wixSDK.Settings.getDashboardAppUrl(a)},a.prototype.getPageLoadTime=function(){return this.$window.performance&&this.$window.performance.timing&&this.$window.performance.timing.fetchStart>0?(new Date).getTime()-this.$window.performance.timing.fetchStart:null},a.prototype.setHeight=function(a){a&&this.wixSDK.setHeight(a)},a.prototype.getSingleEventTemplateEventId=function(a){return 1===a.length&&a[0].eventId!==a[0].originEventId?a[0].eventId:""},a}();angular.module("eventsAppInternal").service("evUtils",EvUtils);var DemoData=function(){function a(a,b){this.$translate=a,this.dateService=b,this.demoEventsData=[{start:this.dateService.createDateISOString("2023-01-09","11:30","America/Los_Angeles"),mainImage:"936ad1_09b07522e95149699c1ea3a8fa1b987c~mv2.jpg"},{start:this.dateService.createDateISOString("2023-02-06","10:00","America/Los_Angeles"),mainImage:"936ad1_ce6891c357ec4c04a4198d7082980804~mv2.jpg"},{start:this.dateService.createDateISOString("2023-03-17","17:00","America/Los_Angeles"),mainImage:"936ad1_0f65f670aec2427294ce82674d43c693~mv2.jpg"},{start:this.dateService.createDateISOString("2023-08-04","19:00","America/Los_Angeles"),mainImage:"936ad1_3f39f86591df43b986176abe42c5a2c6~mv2.jpg"},{start:this.dateService.createDateISOString("2023-05-24","16:30","America/Los_Angeles"),mainImage:"936ad1_7c1325e367464d8aab0da20bae701a7e~mv2.jpg"},{start:this.dateService.createDateISOString("2023-10-03","18:30","America/Los_Angeles"),mainImage:"936ad1_ff8a8ee63d3f4a3a81df0e926cae9b71~mv2.jpg"}]}return a.$inject=["$translate","dateService"],a.prototype.getDefaultEventData=function(){return{title:this.$translate("eventTitle"),description:this.$translate("eventDescription"),pageId:null,location:{value:{name:this.$translate("venueName"),address:this.$translate("venueAddress"),vicinity:this.$translate("venueVicinity"),lat:30,lng:40},tbdMessage:null},internalSettings:{registrationType:"YesOnly",guestLimit:null,waitingListEnabled:!1,rsvpForm:this.getDefaultFormConfiguration()},term:{value:{start:this.dateService.createDateISOString(this.dateService.addDaysToCurrentDate(14),"19:00",this.dateService.guessTimeZoneId()),end:this.dateService.createDateISOString(this.dateService.addDaysToCurrentDate(14),"23:00",this.dateService.guessTimeZoneId()),timeZoneId:this.dateService.guessTimeZoneId()},tbdMessage:null},media:{mainImage:"936ad1_52479a510cbc4d0abc363882c2406a07~mv2_d_1920_1440_s_2.jpg",mainImageHeight:1500,mainImageWidth:1125}}},a.prototype.getDefaultFormConfiguration=function(){return{config:{fields:[{type:"name",name:"name",caption:this.$translate("formBuilder_firstNameCaption")+", "+this.$translate("formBuilder_lastNameCaption"),captions:{firstName:this.$translate("formBuilder_firstNameCaption"),lastName:this.$translate("formBuilder_lastNameCaption")},mandatory:!0,locked:!0,max:50},{type:"input",name:"email",caption:this.$translate("formBuilder_emailCaption"),label:"formBuilder_emailLabel",mandatory:!0,locked:!0,max:50,regex:{msg:this.$translate("formBuilder_emailError")}}],titles:{yes:this.$translate("formBuilder_yesTitle"),no:this.$translate("formBuilder_noTitle"),waiting:this.$translate("formBuilder_waitingTitle")},button:{text:this.$translate("formBuilder_buttonText"),ticketedText:this.$translate("formBuilder_ticketedEventButtonText")},responses:{yes:this.$translate("formBuilder_yesResponse"),no:this.$translate("formBuilder_noResponse")}},validation:{}}},a.prototype.getDefaultEmails=function(){return[{type:"rsvpConfirmation",enabled:!0,timing:0,subject:this.$translate("rsvpConfirmationEmailSubject"),message:this.$translate("rsvpConfirmationEmailMessage"),descriptionLink:this.$translate("rsvpConfirmationEmailDescriptionLink"),calendarLink:this.$translate("rsvpConfirmationEmailCalendarLink")},{type:"reminder",enabled:!0,timing:-72,subject:this.$translate("reminderEmailSubject"),message:this.$translate("reminderEmailMessage"),descriptionLink:this.$translate("reminderEmailDescriptionLink"),calendarLink:this.$translate("reminderEmailCalendarLink")},{type:"waitingNotification",enabled:!0,timing:0,subject:this.$translate("waitingNotificationEmailSubject"),message:this.$translate("waitingNotificationEmailMessage"),descriptionLink:this.$translate("waitingNotificationEmailDescriptionLink"),calendarLink:null},{type:"cancellation",enabled:!0,timing:0,subject:this.$translate("cancellationEmailSubject"),message:this.$translate("cancellationEmailMessage"),descriptionLink:this.$translate("cancellationEmailDescriptionLink"),calendarLink:null},{type:"orderConfirmation",enabled:!0,timing:0,subject:this.$translate("orderConfirmationEmailSubject"),message:this.$translate("orderConfirmationEmailMessage"),descriptionLink:this.$translate("orderConfirmationEmailDescriptionLink"),calendarLink:this.$translate("orderConfirmationEmailCalendarLink")}]},a.prototype.getDefaultPrivateData=function(){return{summarySubscription:{enabled:!0,subscriptionType:"Daily"}}},a.prototype.getDefaultMessages=function(){return{noMessage:{text:this.$translate("noMessageText"),shareButtonText:this.$translate("shareEventText"),calendarLink:!1,shareButtons:!0},yesMessage:{text:this.$translate("yesMessageText"),notificationMessage:this.$translate("yesMessageNotification"),calendarLinkText:this.$translate("addToCalendarText"),shareButtonText:this.$translate("shareEventText"),calendarLink:!0,shareButtons:!0},waitingMessage:{text:this.$translate("waitingMessageText"),notificationMessage:this.$translate("waitingMessageNotification"),calendarLinkText:this.$translate("addToCalendarText"),shareButtonText:this.$translate("shareEventText"),calendarLink:!0,shareButtons:!0}}},a.prototype.getDemoEvents=function(a){var b=this,c={},d=this.getDefaultEventData();return a.forEach(function(a,e){c[a]={data:angular.copy(d)},c[a].eventId=a,c[a].slug="demo"+(e+1),c[a].status="Published",c[a].data.title=b.$translate(e+1+"demoEvent_title"),c[a].data.location.value.name=b.$translate(e+1+"demoEvent_venueName"),c[a].data.location.value.address=b.$translate(e+1+"demoEvent_address"),c[a].data.term.value.start=b.demoEventsData[e].start,c[a].data.term.value.end="",c[a].data.term.value.timeZoneId="America/Los_Angeles",c[a].data.media.mainImage=b.demoEventsData[e].mainImage}),c},a.prototype.getDefaultClosedRegistrationMessages=function(){return{message:this.$translate("closedRegistration_message"),confirmButton:this.$translate("closedRegistration_confirmButton")}},a}();angular.module("eventsAppInternal").service("demoData",DemoData);var CardsService=function(){function a(a){this.settingsStore=a,this.setBreakpoints()}return a.$inject=["settingsStore"],a.prototype.hasCardPropertiesChanged=function(a){var b=this.settingsStore.getWixNumberParams();return!Object.keys(a).length||b.cardMinWidth!==a.cardMinWidth||b.cardMargins!==a.cardMargins},a.prototype.setBreakpoints=function(a,b){a=void 0===a?this.settingsStore.getDefaultWixNumberParams().cardMinWidth:a,b=void 0===b?this.settingsStore.getDefaultWixNumberParams().cardMargins:b;var c=4096,d="",e=0,f=1;do e=a*f+b*(f+1),d+="\n          @media (min-width: "+e+"px) {\n            ev-cards-item {\n              max-width: calc("+100/f+"% - "+b+"px);\n              flex-basis: calc("+100/f+"% - "+b+"px);\n            }\n          }",f+=1;while(c>=e);angular.element("#ev-card-breakpoints").text(d)},a}();angular.module("eventsAppInternal").service("cards",CardsService);var Cookies=function(){function a(){}return a.prototype.getCookie=function(a){var b="; "+document.cookie,c=b.match(new RegExp("; "+a+"=([^;]+)"));return c?c[1]:null},a.prototype.setCookie=function(a,b){var c=a+"="+b;document.cookie=c},a.prototype.resetCookie=function(a){var b=a+"=";document.cookie=b},a}();angular.module("eventsAppInternal").service("cookies",Cookies);var EventsBiProvider=function(){function a(a,b){this.wixBiLoggerProvider=a,this.ENV=b,this.MODULES={WIDGET:"WIDGET",SETTINGS:"SETTINGS",DASHBOARD:"DASHBOARD"},this.EVENTS_MAP={WIDGET:{uou_open_reg_form_click:{evid:503},uou_reg_form_loaded:{evid:504},uou_submit_click:{evid:505},uou_submit_success:{evid:506}},SETTINGS:{settings_opened:{evid:12,tab_name:"main"},settings_tab_clicked:{evid:13},create_manage_event_click:{evid:15,tab_name:"main"}},DASHBOARD:{create_manage_event_click:{evid:15,tab_name:"main"},save_event_click:{evid:17,tab_name:"event_details"},event_saved_popup_click:{evid:18},reg_form_add_field_click:{evid:19,tab_name:"event_reg"},reg_form_field_added:{evid:20,tab_name:"event_reg"},reg_form_save_click:{evid:21,tab_name:"event_reg"},invitations_tab_click:{evid:22,tab_name:"invitations"},guest_list_click:{evid:23,tab_name:"guest_list"},event_tab_clicked:{evid:24},reg_form_field_removed:{evid:25,tab_name:"event_reg"},reg_form_custom_field_changed:{evid:26,tab_name:"event_reg"},reg_form_field_duplicated:{evid:27,tab_name:"event_reg"},event_options_click:{evid:29},event_cancel_popup:{evid:30},bo_loading_finish:{evid:32}}},this.hostname="events.wix.com"===location.hostname?"frog.wix.com":"localhost"}return a.$inject=["wixBiLoggerProvider","ENV"],a.prototype.setConfig=function(a){var b="BM"===this.ENV?"":Wix.Utils.getOrigCompId()||Wix.Utils.getCompId();this.wixBiLoggerProvider.setConfig({hostName:this.hostname,eventMap:this.EVENTS_MAP[a],defaultEventArgs:{src:68,adapter:"events-users",msid:Wix.Utils.getInstanceValue("biToken")||Wix.Utils.getInstanceValue("originInstanceId")||"00000000-0000-0000-0000-000000000000",instance_id:Wix.Utils.getInstanceValue("instanceId"),comp_id:b}})},a.prototype.$get=function(){return this},a}();angular.module("eventsAppInternal").provider("eventsBi",EventsBiProvider);var FormBuilderInputTypesService=function(){function a(){this.FORM_BUILDER_DESKTOP_INPUT_TYPES={name:{render:"fb-name",config:"fb-name-config"},input:{render:"fb-input",config:"fb-input-config"},textarea:{render:"fb-textarea",config:"fb-input-config"},dropdown:{render:"fb-select",config:"fb-options-config"},radio:{render:"fb-radio",config:"fb-options-config"},checkbox:{render:"fb-checkbox",config:"fb-options-config"},guestsControl:{render:"fb-guests-control",config:"fb-guests-control-config"},address:{render:"fb-address",config:"fb-address-config"},date:{render:"fb-date",config:"fb-input-config"},custom:{config:"fb-custom-config"}},this.FORM_BUILDER_MOBILE_INPUT_TYPES={name:{render:"fb-mobile-name",config:"fb-name-config"},input:{render:"fb-mobile-textarea",config:"fb-input-config"},textarea:{render:"fb-mobile-textarea",config:"fb-input-config"},dropdown:{render:"fb-select",config:"fb-options-config"},radio:{render:"fb-radio",config:"fb-options-config"},checkbox:{render:"fb-checkbox",config:"fb-options-config"},guestsControl:{render:"fb-mobile-guests-control",config:"fb-guests-control-config"},address:{render:"fb-mobile-address",config:"fb-address-config"},date:{render:"fb-date",config:"fb-input-config"},custom:{config:"fb-custom-config"}},this.FORM_BUILDER_WIX_INPUT_TYPES={name:{render:"fb-wix-name",config:"fb-name-config"},input:{render:"fb-wix-input",config:"fb-input-config"},textarea:{render:"fb-wix-textarea",config:"fb-input-config"},dropdown:{render:"fb-wix-select",config:"fb-options-config"},radio:{render:"fb-wix-radio",config:"fb-options-config"},checkbox:{render:"fb-wix-checkbox",config:"fb-options-config"},guestsControl:{render:"fb-wix-guests-control",config:"fb-guests-control-config"},address:{render:"fb-wix-address",config:"fb-address-config"},date:{render:"fb-wix-date",config:"fb-input-config"},custom:{config:"fb-custom-config"}}}return a.prototype.getTypes=function(a){switch(void 0===a&&(a="desktop"),a){case"desktop":return this.FORM_BUILDER_DESKTOP_INPUT_TYPES;case"mobile":return this.FORM_BUILDER_MOBILE_INPUT_TYPES;case"wix":return this.FORM_BUILDER_WIX_INPUT_TYPES;default:return this.FORM_BUILDER_DESKTOP_INPUT_TYPES}},a}(),FormPresets=function(){function a(a){this.$filter=a,this.formPresets=[{title:"formBuilder_phoneField",config:{type:"input",name:"phone",caption:this.$filter("translate")("formBuilder_phoneCaption"),label:"formBuilder_phoneLabel",mandatory:!1,max:25,regex:{rule:"[0-9()+-\\s]+",msg:"This has to be a valid phone number!"}},validation:function(a){return{multival:!1,patterns:["^[0-9()+\\-\\s]{0,25}$"],mandatory:a.mandatory,caption:a.caption}}},{title:"formBuilder_addressField",config:{type:"address",name:"address",caption:this.$filter("translate")("formBuilder_addressCaption"),captions:{street:this.$filter("translate")("formBuilder_streetCaption"),city:this.$filter("translate")("formBuilder_cityCaption"),state:this.$filter("translate")("formBuilder_stateCaption"),country:this.$filter("translate")("formBuilder_countryCaption"),postal:this.$filter("translate")("formBuilder_postalCodeCaption")},mandatory:!1,full:!1,max:100},validation:function(a){return{multival:!0,patterns:[],mandatory:a.mandatory,caption:a.caption}}},{title:"formBuilder_dateField",config:{type:"date",name:"date",label:"formBuilder_dateLabel",caption:this.$filter("translate")("formBuilder_dateCaption"),mandatory:!1},validation:function(a){return{multival:!1,patterns:["^[0-9]{4}-[0-9]{2}-[0-9]{2}$"],mandatory:a.mandatory,caption:a.caption}}},{title:"formBuilder_additionalGuestField",config:{type:"guestsControl",name:"additionalGuests",caption:this.$filter("translate")("formBuilder_additionalGuestCaption"),captions:{one:this.$filter("translate")("formBuilder_additionalGuestCaption"),multiple:this.$filter("translate")("formBuilder_additionalGuestsCaption")},mandatory:!1,requireGuestNames:!0,guestsLimit:1,max:50},validation:function(a){var b=function(a){return _.range(a+1).join("|")};return{multival:!1,patterns:["^("+b(a.guestsLimit)+")$"],mandatory:a.mandatory,caption:a.caption}}},{title:"formBuilder_commentField",config:{type:"textarea",name:"comment",label:"formBuilder_commentLabel",caption:this.$filter("translate")("formBuilder_commentCaption"),mandatory:!1,max:400},validation:function(a){return{multival:!1,patterns:[],mandatory:a.mandatory,caption:a.caption}}},{title:"formBuilder_customField",config:{type:"custom",name:"custom",answerType:"input",caption:this.$filter("translate")("formBuilder_customQuestionCaption"),mandatory:!1,options:[],max:400},validation:function(a){function b(a){var b=a.map(function(a){return c(a.value)}).join("|");return["^("+b+")$"]}function c(a){return a.replace(/[-[\]{}()*+!<=:?.\/\\^$|#\s,]/g,"\\$&")}var d={mandatory:a.mandatory,caption:a.caption};switch(a.answerType){case"input":return Object.assign({multival:!1,patterns:[]},d);case"textarea":return Object.assign({multival:!1,patterns:[]},d);case"dropdown":return Object.assign({multival:!1,patterns:b(a.options)},d);case"radio":return Object.assign({multival:!1,patterns:b(a.options)},d);case"checkbox":return Object.assign({multival:!0,patterns:b(a.options)},d)}}}]}return a.$inject=["$filter"],a.prototype.addPreset=function(a){this.formPresets.push(a)},a.prototype.getPresets=function(){return this.formPresets},a}(),FormBuilder=function(){function a(a,b){this.formPresets=a,this.formBuilderInputTypes=b,this.changeHandlers=[],this.fields=[],this.setTypes()}return a.$inject=["formPresets","formBuilderInputTypes"],a.prototype.addPreset=function(a){this.formPresets.addPreset(a),this.setTypes()},a.prototype.setTypes=function(){this.types=this.formPresets.getPresets().map(function(a){return a.config.name})},a.prototype.getFields=function(){return this.fields},a.prototype.getTitles=function(){return this.titles},a.prototype.getButton=function(){return this.button},a.prototype.getResponses=function(){return this.responses},a.prototype.setConfig=function(a,b){this.fields=this.filterOutDuplicateNames(a.fields),this.titles=a.titles,this.button=a.button,this.responses=a.responses,b||this.broadcast()},a.prototype.addField=function(a){var b=this.createFieldName(a.name),c=Object.assign({},a,{name:b});return this.fields.push(c),this.broadcast(),c},a.prototype.editField=function(a,b){var c=this.getFieldByName(a);Object.assign(c,b),this.broadcast()},a.prototype.deleteField=function(a){this.fields=this.fields.filter(function(b){return b.name!==a}),this.broadcast()},a.prototype.duplicateField=function(a){var b=this.getFieldByName(a),c=this.getFieldIndexByName(a),d=this.createFieldName(b.name);this.fields.splice(c+1,0,Object.assign({},b,{name:d})),this.broadcast()},a.prototype.editTitles=function(a){Object.assign(this.titles,a),this.broadcast()},a.prototype.editButton=function(a){Object.assign(this.button,a),this.broadcast()},a.prototype.editResponses=function(a){Object.assign(this.responses,a),this.broadcast()},a.prototype.getFieldConfigurationByType=function(a,b){return this.formBuilderInputTypes.getTypes(a)[b]},a.prototype.subscribe=function(a){var b=this;return this.changeHandlers.push(a),function(){return b.changeHandlers=b.changeHandlers.filter(function(b){return b!==a})}},a.prototype.reorder=function(a,b){var c=this.getFieldIndexByName(a),d=this.fields[c];this.fields.splice(c,1),this.fields.splice(b,0,d),this.broadcast()},a.prototype.getDataTransforms=function(){return{name:["firstName","lastName"],additionalGuests:["additionalGuests","guestNames"]}},a.prototype.getRequiredDataKeys=function(){var a=[];return this.getFields().forEach(function(b){"name"===b.type?b.mandatory&&a.push("firstName","lastName"):"additionalGuests"===b.type?(b.mandatory&&a.push("additionalGuests"),b.requireGuestNames&&a.push("guestNames")):b.mandatory&&a.push(b.name)}),a},a.prototype.serialize=function(){var a=this,b={};return this.types.forEach(function(c){var d=a.fields.filter(function(a){return a.name.includes(c)});d.forEach(function(d){var e=a.formPresets.getPresets().find(function(a){return a.config.name===c});b[d.name]=e.validation(d),"additionalGuests"===c&&(b.guestNames={caption:"Guest Names",mandatory:d.requireGuestNames,multival:!0,patterns:[]})})}),{config:{fields:this.fields,titles:this.titles,button:this.button,responses:this.responses},validation:b}},a.prototype.broadcast=function(){this.changeHandlers.forEach(function(a){return a()})},a.prototype.getFieldTypeByName=function(a){return this.types.find(function(b){return a.indexOf(b)>-1})},a.prototype.getFieldByName=function(a){return this.fields.find(function(b){return b.name===a})},a.prototype.getFieldIndexByName=function(a){return this.fields.findIndex(function(b){return b.name===a})},a.prototype.createFieldName=function(a){if(!this.fieldNamePresent(a))return a;var b=a.split("-").shift(),c=(new Date).valueOf().toString(16);return b+"-"+c},a.prototype.fieldNamePresent=function(a){return!!this.fields.find(function(b){return b.name===a})},a.prototype.filterOutDuplicateNames=function(a){var b=[];return a.filter(function(a){var c=a.name,d=b.indexOf(c)>-1;return d||b.push(c),!d})},a}();angular.module("eventsAppInternal").service("formPresets",FormPresets).service("formBuilder",FormBuilder).service("formBuilderInputTypes",FormBuilderInputTypesService);var EventResizeService=function(){function a(a,b,c,d,e){this.wixSDK=a,this.eventStore=b,this.settingsStore=c,this.settingsHelper=d,this.$timeout=e,this.EVENT_SELECTOR=".ev-event",this.CONTENT_SELECTOR=".ev-event-content",this.IMAGE_SELECTOR=".ev-image",this.EV_FRAME_SELECTOR=".ev-frame",this.BTN_SELECTOR=".ev-rsvp-buttons__button",this.eventData=b.getData()}return a.$inject=["wixSDK","eventStore","settingsStore","settingsHelper","$timeout"],a.prototype.resize=function(a){switch(a){case this.settingsStore.LAYOUT.FULL:return void this.resizeToFullLayout();case this.settingsStore.LAYOUT.VERTICAL:return void this.resizeToVerticalLayout();case this.settingsStore.LAYOUT.BACKGROUND:return void this.resizeToBackgroundLayout();case this.settingsStore.LAYOUT.BUTTON_ONLY:return void this.resizeToButtonOnlyLayout();default:this.resizeWidget()}},a.prototype.resizeToFullLayout=function(){var a=this;this.wixSDK.resizeComponent({width:this.settingsHelper.isImageVisible()?860:550},function(){a.wixSDK.setHeight(a.getMinWidgetHeight())})},a.prototype.resizeToVerticalLayout=function(){var a=this;this.wixSDK.resizeComponent({width:600},function(){var b=a.getMinWidgetHeight();a.settingsHelper.isImageVisible()&&(b=100*b/(100-a.settingsStore.getWixNumberParams().imageWidth)),a.wixSDK.setHeight(b)})},a.prototype.resizeToBackgroundLayout=function(){this.wixSDK.resizeComponent({width:550,height:550})},a.prototype.resizeToButtonOnlyLayout=function(){this.wixSDK.resizeComponent({width:this.getMinWidgetWidth()+2,height:this.getMinWidgetHeight()+2})},a.prototype.resizeWidget=function(a){var b=this;void 0===a&&(a=1),this.getCurrentWidgetHeight()<this.getMinWidgetHeight(this.settingsHelper.isVerticalLayout())&&(this.wixSDK.resizeComponent({height:this.getMinWidgetHeight(this.settingsHelper.isVerticalLayout())}),5>=a&&this.$timeout(function(){return b.resizeWidget(a+1)},200))},a.prototype.getMinWidgetWidth=function(){return this.getWidgetButtonsWidth()+this.getWidgetBorderWidth()+this.getWidgetHorizontalPadding()},a.prototype.getMinWidgetHeight=function(a){return void 0===a&&(a=!1),this.getWidgetBorderWidth()+this.getWidgetVerticalPadding()+this.getContentHeight()+(a?this.getImageHeight():0)},a.prototype.getMinMobileWidgetHeight=function(){return this.getWidgetBorderWidth()+this.getWidgetVerticalPadding()+this.getContentHeight()+(this.settingsHelper.isBackgroundLayout()?0:this.getImageHeight())},a.prototype.getCurrentWidgetHeight=function(){return $(this.EV_FRAME_SELECTOR).outerHeight()},a.prototype.getWidgetButtonsWidth=function(){var a=$(this.BTN_SELECTOR).outerWidth();return"YesOnly"===this.eventData.registrationType?a:2*a+12},a.prototype.getWidgetBorderWidth=function(){return 2*(parseInt($(this.EV_FRAME_SELECTOR).css("border-width"),10)||0)},a.prototype.getWidgetHorizontalPadding=function(){return 2*(parseInt($(this.EVENT_SELECTOR).css("padding-right"),10)||0)},a.prototype.getWidgetVerticalPadding=function(){return 2*(parseInt($(this.EVENT_SELECTOR).css("padding-top"),10)||0)},a.prototype.getImageHeight=function(){return $(this.IMAGE_SELECTOR).outerHeight()},a.prototype.getContentHeight=function(){return $(this.CONTENT_SELECTOR).outerHeight();
},a}();angular.module("eventsAppInternal").service("evResize",EventResizeService);var EventMobileResizeController=function(){function a(a,b,c,d){var e=this;this.wixSDK=a,this.$scope=b,this.$element=c,this.evResize=d,this.resize=_.debounce(function(){var a=e.evResize.getMinMobileWidgetHeight(),b=e.evResize.getCurrentWidgetHeight();a>b&&e.wixSDK.setHeight(a)},300),this.isMobileSite()&&this.watchHeight()}return a.$inject=["wixSDK","$scope","$element","evResize"],a.prototype.watchHeight=function(){var a=this;this.$scope.$watchCollection(function(){return[a.$element.find(a.evResize.BTN_SELECTOR).outerWidth(),a.$element.find(a.evResize.CONTENT_SELECTOR).outerHeight()]},function(){return a.resize()}),window.addEventListener("resize",this.resize)},a.prototype.isMobileSite=function(){return"mobile"===this.wixSDK.Utils.getDeviceType()},a}();angular.module("eventsAppInternal").directive("evMobileResize",function(){return{restrict:"A",controller:EventMobileResizeController}});var EventStore=function(){function a(a,b,c,d){var e=this;this.repository=a,this.settingsStore=b,this.eventAdapter=c,this.ENV=d,this.data={},this.publishEvent=_.debounce(function(a,b,c,d){var f=e.settingsStore.serialize(b),g=e.eventAdapter.serialize(Object.assign({},e.data,a));e.repository.publishEvent(g,f,e.data.eventId).then(function(a){e.normalizeData(a.data),"DASHBOARD"===e.ENV&&e.settingsStore.setSettings(a.data.settings),c&&c()})["catch"](function(a){return d&&d(a)})},1e3,{leading:!0,trailing:!0})}return a.$inject=["repository","settingsStore","eventAdapter","ENV"],a.prototype.getData=function(){return this.data},a.prototype.normalizeData=function(a){Object.assign(this.data,this.eventAdapter.normalize(a))},a.prototype.cancelEvent=function(){var a=this;return this.repository.changeEventStatus("Canceled",this.data.eventId).then(function(b){return a.data.status=b.data.status,b})},a.prototype.openRegistration=function(){var a=this;return this.repository.changeEventStatus("Active",this.data.eventId).then(function(b){return a.data.status=b.data.status})},a.prototype.closeRegistration=function(){var a=this;return this.repository.changeEventStatus("Inactive",this.data.eventId).then(function(b){return a.data.status=b.data.status})},a}();angular.module("eventsAppInternal").service("eventStore",EventStore);var SettingsStore=function(){function a(a,b,c,d,e){var f=this;this.wixSDK=a,this.siteStore=b,this.demoData=c,this.evUtils=d,this.$translate=e,this.WIDGET_TYPE={SINGLE:"1",LIST:"2"},this.LAYOUT={FULL:"FULL",BUTTON_ONLY:"BUTTON_ONLY",VERTICAL:"VERTICAL",BACKGROUND:"BACKGROUND",HORIZONTAL:"HORIZONTAL",RIGHT:"RIGHT"},this.LIST_LAYOUT={LIST:"LIST",GRID:"GRID",NEW_GRID:"NEW_GRID",SIDE_BY_SIDE:"SIDE_BY_SIDE"},this.LOCATION_AND_DATE_FORMAT={VERTICAL:1,HORIZONTAL:3,COMPACT:2},this.LIST_LOCATION_AND_DATE_FORMAT={COMPACT:1,FULL:2},this.ALIGNMENT={LEFT:"LEFT",CENTER:"CENTER",RIGHT:"RIGHT"},this.CONTENT_ALIGNMENT={TOP:"TOP",CENTER:"CENTER",BOTTOM:"BOTTOM"},this.BUTTONS_STYLE={FULL:1,HOLLOW:2,FULL_ROUNDED:3,HOLLOW_ROUNDED:4},this.HORIZONTAL_IMAGE_POSITION={LEFT:"LEFT",RIGHT:"RIGHT"},this.VERTICAL_IMAGE_POSITION={TOP:"TOP",BOTTOM:"BOTTOM"},this.IMAGE_SCALING={FIT:"FIT",CROP:"CROP"},this.IMAGE_GRID_POSITION={TOP_LEFT:"TOP_LEFT",TOP_CENTER:"TOP_CENTER",TOP_RIGHT:"TOP_RIGHT",CENTER_LEFT:"CENTER_LEFT",CENTER:"CENTER",CENTER_RIGHT:"CENTER_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_RIGHT:"BOTTOM_RIGHT"},this.IMAGE_LAYOUT={LEFT:"LEFT",MIXED:"MIXED",RIGHT:"RIGHT"},this.settings={},this.params={booleans:{},numbers:{}},this.evUtils.isBM()||this.wixSDK.Styles.getStyleParams(function(a){return f.setParams(a)})}return a.$inject=["wixSDK","siteStore","demoData","evUtils","$translate"],a.prototype.serialize=function(a){return Object.assign({},this.settings,a,this.getDefaultComponentSettings())},a.prototype.setSettings=function(a){a.widgetLayout=a.widgetLayout||this.LAYOUT.FULL,a.alignment=a.alignment||this.resolveAlignment(a),_.defaults(_.merge(this.settings,a),this.getDefaultSettings())},a.prototype.getSettings=function(){return this.settings},a.prototype.setComponentSettings=function(a){_.defaults(_.merge(this.settings,a),this.getDefaultSettings())},a.prototype.getComponentSettings=function(){return{widgetType:this.settings.widgetType,widgetLayout:this.settings.widgetLayout,listLayout:this.settings.listLayout,alignment:this.settings.alignment,contentAlignment:this.settings.contentAlignment,listAlignment:this.settings.listAlignment,imagePosition:this.settings.imagePosition,verticalImagePosition:this.settings.verticalImagePosition,imageGridPosition:this.settings.imageGridPosition,imageScaling:this.settings.imageScaling,imageRatio:this.settings.imageRatio,listImageLayout:this.settings.listImageLayout,showImage:this.settings.showImage,texts:this.settings.texts,cardsPerRow:this.settings.cardsPerRow,fullWidth:this.settings.fullWidth}},a.prototype.setParams=function(a){this.params.booleans=_.defaults(a.booleans,this.getDefaultWixBooleanParams()),this.params.numbers=_.defaults(a.numbers,this.getDefaultWixNumberParams())},a.prototype.getParams=function(){return this.params},a.prototype.getWixBooleanParams=function(){return this.params.booleans},a.prototype.getWixNumberParams=function(){return this.params.numbers},a.prototype.getTexts=function(){return this.settings.texts},a.prototype.setSettingsAndTrigger=function(a){_.merge(this.settings,a),this.triggerUpdate({type:"SETTINGS",settings:this.settings},this.wixSDK.Utils.getOrigCompId())},a.prototype.triggerUpdate=function(a,b){this.wixSDK.Settings.triggerSettingsUpdatedEvent(a,b)},a.prototype.getDefaultSettings=function(){return{widgetType:this.siteStore.getData().defaultWidgetType,widgetLayout:this.LAYOUT.FULL,listLayout:this.LIST_LAYOUT.NEW_GRID,alignment:this.ALIGNMENT.CENTER,contentAlignment:this.CONTENT_ALIGNMENT.CENTER,listAlignment:this.ALIGNMENT.CENTER,imagePosition:this.HORIZONTAL_IMAGE_POSITION.RIGHT,verticalImagePosition:this.VERTICAL_IMAGE_POSITION.TOP,imageGridPosition:this.IMAGE_GRID_POSITION.CENTER,imageScaling:this.IMAGE_SCALING.CROP,imageRatio:"1:1",listImageLayout:this.IMAGE_LAYOUT.LEFT,showImage:!0,texts:this.getDefaultTexts(),cardsPerRow:3,fullWidth:!1,messages:this.demoData.getDefaultMessages(),closedRegistrationMessages:this.demoData.getDefaultClosedRegistrationMessages(),shoutoutTemplateClicked:!1}},a.prototype.getDefaultComponentSettings=function(){return{widgetType:this.siteStore.getData().defaultWidgetType,widgetLayout:this.LAYOUT.FULL,listLayout:this.LIST_LAYOUT.NEW_GRID,alignment:this.ALIGNMENT.CENTER,contentAlignment:this.CONTENT_ALIGNMENT.CENTER,listAlignment:this.ALIGNMENT.CENTER,imagePosition:this.HORIZONTAL_IMAGE_POSITION.RIGHT,verticalImagePosition:this.VERTICAL_IMAGE_POSITION.TOP,imageGridPosition:this.IMAGE_GRID_POSITION.CENTER,imageScaling:this.IMAGE_SCALING.CROP,imageRatio:"1:1",listImageLayout:this.IMAGE_LAYOUT.LEFT,showImage:!0,texts:this.getDefaultTexts(),cardsPerRow:3,fullWidth:!1}},a.prototype.getDefaultWixBooleanParams=function(){return{showCountdown:!1,showTitle:!0,showDescription:!1,showDate:!0,showHours:!0,showLocation:!0,showShareOptions:!0,showFullDividers:!0,showHorizontalDividers:!0,showCompactDividers:!0,showLabels:!0,showRSVPTitle:!1,listShowMainTitle:!0,listShowDate:!0,listShowDayOfWeek:!0,listShowVenueName:!0,listShowFullDate:!0,listShowHours:!0,listShowLocation:!0,listShowDescription:!0,listShowSocialShare:!0,listShowImage:!0,listShowAdditionalInfo:!0}},a.prototype.getDefaultWixNumberParams=function(){return{locationAndDateFormat:this.LOCATION_AND_DATE_FORMAT.VERTICAL,buttonsStyle:this.BUTTONS_STYLE.FULL,borderWidth:0,buttonsBorderWidth:1,buttonsBorderRadius:0,roundedButtonsBorderRadius:100,buttonHeight:44,oneButtonWidth:140,verticalDividerWidth:1,verticalDividerHeight:94,horizontalDividerWidth:20,horizontalDividerHeight:1,compactHorizontalDividerWidth:36,compactHorizontalDividerHeight:1,countdownMarginBottom:30,titleMarginBottom:36,descriptionMarginBottom:42,dateMarginBottom:42,locationMarginBottom:54,dateAndLocationMarginBottom:54,rsvpMarginBottom:30,imageWidth:50,imageOpacity:70,listButtonStyle:1,cardMinWidth:294,cardMargins:20,cardBorderWidth:1,sideBySideLayoutMargins:30,listImagePosition:5,listImageOpacity:100,listImageWidth:50,listLocationAndDateFormat:this.LIST_LOCATION_AND_DATE_FORMAT.COMPACT}},a.prototype.getDefaultTexts=function(){return{time:this.$translate("whenLabel"),location:this.$translate("whereLabel"),RSVPTitle:this.$translate("RSVPTitle"),oneButton:this.$translate("oneButtonText"),listButtonText:this.$translate("listRSVPButtonText"),listGeneralTitle:this.$translate("listGeneralTitle")}},a.prototype.resolveAlignment=function(a){switch(a.layout){case this.LAYOUT.VERTICAL:return this.ALIGNMENT.LEFT;case this.LAYOUT.RIGHT:return this.ALIGNMENT.RIGHT;default:return this.ALIGNMENT.CENTER}},a}();angular.module("eventsAppInternal").service("settingsStore",SettingsStore);var EventListStore=function(){function a(a,b){this.dispatcher=a,this.eventAdapter=b,this.data={filter:void 0,filters:[],orderBy:EventListOrderBy.START_DATE,reverse:!1,events:[],drafts:[]},this.dispatcher.on(this.update.bind(this))}return a.$inject=["dispatcher","eventAdapter"],a.prototype.update=function(a){var b;switch(a.type){case EventListActions.RECEIVE_EVENT_LIST:this.data.drafts=a.events.filter(function(a){return"Unpublished"===a.status});var c=this.eventAdapter.normalize.bind(this.eventAdapter);this.data.events=a.events.map(function(a){return c(a)}).filter(function(a){return a.timeline!==EventListFilters.HIDDEN}),this._updateFilters(),this._updateOrderBy();break;case EventListActions.CHANGE_EVENT_LIST_FILTER:this.data.filter=a.filter,this._updateOrderBy();break;case EventListActions.CHANGE_EVENT_LIST_ORDER:this._updateOrderBy(a.orderBy);break;case EventListActions.UPDATE_EVENT:b=a.eventData,Object.assign(this.data.events.find(function(a){return a.eventId===b.eventId}),b);break;case EventListActions.ADD_EVENT:this.data.events.push(a.eventData);break;case EventListActions.DELETE_EVENT:this.data.events=this.data.events.filter(function(b){return b.eventId!==a.eventId});var d=this.data.events.find(function(a){return"Canceled"===a.status});this._updateFilters(!!d);break;case EventListActions.CANCEL_EVENT:var e=this.data.events.find(function(b){return b.eventId===a.eventId});e.status="Canceled",e.timeline=EventListFilters.CANCELED,this._updateFilters();break;case"DISCARD_DRAFT":this.data.events=this.data.events.filter(function(b){return b.eventId!==a.eventId})}},a.prototype.getData=function(){return this.data},a.prototype.getEventById=function(a){return this.data.events.find(function(b){return b.eventId===a})},a.prototype._updateOrderBy=function(a){this.data.orderBy=a||this.data.orderBy,this.data.reverse=this.data.orderBy===EventListOrderBy.MODIFIED||this.data.filter===EventListFilters.PAST},a.prototype._updateFilters=function(a){this.data.filters=this._countStatuses(this.data.events),a||(this.data.filter=this.data.filters.length?this.data.filters[0].key:void 0)},a.prototype._countStatuses=function(a){var b=[EventListFilters.UPCOMING,EventListFilters.PAST,EventListFilters.CANCELED];return a.reduce(function(a,b){var c=a.find(function(a){return a.key===b.timeline});return c?c.count++:a.push({key:b.timeline,count:1}),a},[]).sort(function(a,c){return b.indexOf(a.key)-b.indexOf(c.key)})},a}();angular.module("eventsAppInternal").service("eventListStore",EventListStore);var ComponentStore=function(){function a(a,b,c,d,e,f,g){var h=this;this.eventAdapter=b,this.settingsStore=c,this.repository=d,this.eventListStore=e,this.wixSDK=f,this.dateService=g,this.componentEvents=[],this.componentEventsData=[],this.demo=!1,a.on(this.update.bind(this)),this.wixSDK.getCurrentPageId(function(a){return h.currentPageId=a})}return a.$inject=["dispatcher","eventAdapter","settingsStore","repository","eventListStore","wixSDK","dateService"],a.prototype.update=function(a){switch(a.type){case"DISPLAY_EVENT":return void this.displayEvent(a.eventId);case"HIDE_EVENT":return void this.hideEvent(a.eventId);case"SELECT_EVENT":return void this.selectEvent(a.eventId)}},a.prototype.setComponentData=function(a,b,c){var d=this;void 0===a&&(a=[]),void 0===b&&(b={}),void 0===c&&(c=!1),this.demo=c,this.componentEvents=a.length?a:[],this.componentEventsData=Object.keys(b).map(function(a){return d.eventAdapter.normalize(b[a])}),this._orderEvents()},a.prototype.getComponentEventsIds=function(){return this.demo?[]:this.componentEvents},a.prototype.getComponentEvents=function(){return this.componentEventsData},a.prototype.getSelectedEventId=function(){return this.componentEvents[0]},a.prototype.getComponentEventByID=function(a){return this.componentEventsData.find(function(b){return a===b.eventId})},a.prototype.displayEvent=function(a){this.componentEvents=this.componentEvents.concat([a]),this.componentEventsData=this.componentEventsData.concat([this.eventListStore.getEventById(a)]),this._orderEvents()},a.prototype.hideEvent=function(a){this.componentEvents=this.componentEvents.filter(function(b){return b!==a}),this.componentEventsData=this.componentEventsData.filter(function(b){return b.eventId!==a}),this._orderEvents()},a.prototype.selectEvent=function(a){this.componentEvents=[a],this.componentEventsData=[this.eventListStore.getEventById(a)]},a.prototype.getComponentSettings=function(){return this.settingsStore.getComponentSettings()},a.prototype.isDemo=function(){return!this.componentEventsData.length||this.componentEventsData[0].eventId.indexOf("DEMO")>-1},a.prototype._orderEvents=function(){var a=this.getEventsByStatus(["Published","Happening","Paused"]),b=this.getEventsByStatus(["Over","Archived"]),c=this.getEventsByStatus(["Canceled"]);this.componentEventsData=[].concat(a,b,c)},a.prototype.getEventsByStatus=function(a){return this.componentEventsData.filter(function(b){return a.indexOf(b.status)>-1}).sort(this.dateService.comparator.bind(this.dateService))},a.prototype.updateComponentDraftSettings=function(){return this.repository.updateComponentDraftSettings(this.getComponentSettings(),this.getComponentEventsIds())},a.prototype.updateComponentSettings=function(){return this.repository.updateComponentSettings(this.getComponentSettings(),this.getComponentEventsIds(),this.currentPageId)},a}();angular.module("eventsAppInternal").service("componentStore",ComponentStore);var SiteStore=function(){function a(a,b,c,d){this.repository=a,this.experimentManager=b,this.evUtils=c,this.wixSDK=d,this.ticketedSite=!1,this.UPGRADE_FLOW_ENABLED=this.experimentManager.isExperimentEnabled("specs.events.ui.UpgradeFlow"),this.PAGE_ENABLED=this.experimentManager.getExperimentValue("specs.events.ui.EventsUiSellTicketsEnabled"),this.data={version:1,defaultWidgetType:"SINGLE",layoutSelected:!1,pageUpgradeShown:!1,firstTimeCompleted:!0,pagesType:1}}return a.$inject=["repository","experimentManager","evUtils","wixSDK"],a.prototype.markPageUpgradeSeen=function(){this.getData().pageUpgradeShown===!1&&this.updateSiteSettings({pageUpgradeShown:!0})},a.prototype.canUpgrade=function(){return this.UPGRADE_FLOW_ENABLED&&this.PAGE_ENABLED&&!this.data.pageEnabled},a.prototype.addPage=function(){var a=this;this.wixSDK.Settings.isComponentInstalled("events",function(b){b?(a.wixSDK.Utils.navigateToSection({sectionId:"events"}),a.wixSDK.Settings.closeWindow({target:"SETTINGS"})):a.wixSDK.Settings.addComponent({componentType:"PAGE",page:{title:"Events",pageId:"events"}},angular.noop,function(){return a.wixSDK.Settings.closeWindow({target:"SETTINGS"})})})},a.prototype.doUpgrade=function(){this.addPage()},a.prototype.setData=function(b){if(this.isFromTemplate(b))return void this.setSiteSettingsFromTemplate(b);if(b.settings)Object.assign(this.data,b.settings);else{var c={};c.version=b.totalEvents?1:a.STABLE_VERSION,c.defaultWidgetType=c.version>1?"LIST":"SINGLE",c.pageEnabled=this.PAGE_ENABLED&&c.version>1,c.firstTimeCompleted=!!b.totalEvents,this.updateSiteSettings(c)}this.ticketedSite=b.ticketed,this.data.firstTimeCompleted=b.settings&&b.settings.firstTimeCompleted||!!b.totalEvents},a.prototype.updateSiteSettings=function(a){return Object.assign(this.data,a),this.evUtils.isSite()||this.evUtils.isDemoMode()?void 0:this.repository.updateSiteSettings(this.getData())},a.prototype.setSiteSettingsFromTemplate=function(a){var b=Object.assign({},this.getData(),a.settings);b.layoutSelected=!0,b.firstTimeCompleted=a.fake||!a.settings?!1:b.firstTimeCompleted,this.updateSiteSettings(b)},a.prototype.isTicketedSite=function(){return this.ticketedSite},a.prototype.getData=function(){return this.data},a.prototype.getVersion=function(){return this.data.version},a.prototype.isFromTemplate=function(a){return a.fake||this.evUtils.isSiteCreatedFromTemplate()},a.prototype.canOpenPage=function(){var a=this.evUtils.isSite(),b=this.getData(),c=b.pageEnabled,d=b.upgradePending;return!a&&c||a&&!d&&c},a}();SiteStore.LEGACY_VERSION=1,SiteStore.STABLE_VERSION=5,angular.module("eventsAppInternal").service("siteStore",SiteStore);var EventAdapter=function(){function a(a,b){this.dateService=a,this.demoData=b}return a.$inject=["dateService","demoData"],a.prototype.normalize=function(a){var b={};return b.eventId=a.eventId,b.slug=a.slug,b.status=a.status,b.bookings=a.bookings,b.modified=a.modified,b.timeline=this.calculateTimeline(a.status),a.data?Object.assign(b,this.normalizeVerboseEvent(a)):Object.assign(b,this.normalizeCompactEvent(a)),b},a.prototype.serialize=function(a){return{title:a.title,description:a.description||null,pageId:a.pageId,location:this.serializeLocationData(a),internalSettings:{registrationType:a.registrationType,guestLimit:a.guestLimit,waitingListEnabled:a.waitingListEnabled,rsvpForm:a.rsvpForm},externalSettings:{rsvp:a.externalLink},term:this.serializeTermData(a),media:{mainImage:a.mainImage,mainImageHeight:a.mainImageHeight,mainImageWidth:a.mainImageWidth}}},a.prototype.serializeFromOB=function(a){return Object.assign(this.demoData.getDefaultEventData(),{title:a.name,description:a.description,media:{mainImage:a.media,mainImageWidth:1920,mainImageHeight:1080},location:{value:a.location.message?null:{name:a.location.name,address:a.location.address,lat:a.location.lat,lng:a.location.lng},tbdMessage:a.location.message?a.location.message:null},term:{value:a.date.message?null:{start:a.date.start,end:a.date.end,timeZoneId:a.date.timezone,formatted:this.dateService.formatTimeForEmail(a.date.start,a.date.end||"",a.date.timezone,!!a.date.message,a.date.message)},tbdMessage:a.date.message?a.date.message:null}})},a.prototype.normalizeVerboseEvent=function(a){var b={};return b.title=a.data.title,b.description=a.data.description,b.pageId=a.data.pageId,b.locationTbd=!!a.data.location.tbdMessage,Object.assign(b,this.normalizeLocationData(b.locationTbd,a.data.location)),b.dateTbd=!!a.data.term.tbdMessage,Object.assign(b,this.normalizeTermData(a.data.term)),b.guestLimit=a.data.internalSettings.guestLimit,b.registrationType=a.data.internalSettings.registrationType,b.waitingListEnabled=a.data.internalSettings.waitingListEnabled,b.rsvpForm=this.normalizeRsvpForm(a.data.internalSettings.rsvpForm),b.calendarLinks=a.shareLinks,b.mainImage=a.data.media&&a.data.media.mainImage||"",b.mainImageHeight=parseInt(a.data.media&&a.data.media.mainImageHeight,10)||1080,b.mainImageWidth=parseInt(a.data.media&&a.data.media.mainImageWidth,10)||1920,b.summary=a.summary,b.ticketed=a.ticketed,b.externalLink=a.data.externalSettings?a.data.externalSettings.rsvp:null,b},a.prototype.normalizeCompactEvent=function(a){var b={};b.title=a.title,b.description=a.description,b.created=a.created,b.mainImage=a.media&&a.media.mainImage||"",b.mainImageWidth=parseInt(a.media&&a.media.mainImageWidth,10)||1920,b.mainImageHeight=parseInt(a.media&&a.media.mainImageHeight,10)||1080,b.summary=a.summary,b.ticketingSummary=a.ticketingSummary||{};var c=a.location;c&&(b.locationTbd=!!c.tbdMessage,Object.assign(b,this.normalizeLocationData(b.locationTbd,c)));var d=a.term;return d&&(b.dateTbd=!!d.tbdMessage,Object.assign(b,this.normalizeTermData(d))),b},a.prototype.normalizeLocationData=function(a,b){var c,d;return a?(c={name:"",address:"",vicinity:"",coordinates:{lat:0,lng:0}},d=b.tbdMessage):(c={name:b.value.name,address:b.value.address,vicinity:b.value.vicinity,coordinates:{lat:b.value.lat,lng:b.value.lng}},d=""),{location:c,locationTbdMessage:d}},a.prototype.normalizeTermData=function(a){var b={};return a&&a.value?(b.startDate=this.dateService.getDate(a.value.start,a.value.timeZoneId),b.endDate=a.value.end?this.dateService.getDate(a.value.end,a.value.timeZoneId):"",b.startTime=this.dateService.getTime(a.value.start,a.value.timeZoneId),b.endTime=a.value.end?this.dateService.getTime(a.value.end,a.value.timeZoneId):"",b.timeZoneId=a.value.timeZoneId,b.dateTbdMessage=""):(b.startDate="",b.endDate="",b.startTime="",b.endTime="",b.timeZoneId="",b.dateTbdMessage=a.tbdMessage),b},a.prototype.normalizeRsvpForm=function(a){return a.config.responses||(a.config.responses=Object.assign({},this.demoData.getDefaultFormConfiguration().config.responses)),a.config.button.ticketedText||(a.config.button.ticketedText=this.demoData.getDefaultFormConfiguration().config.button.ticketedText),a},a.prototype.serializeLocationData=function(a){return a.locationTbd?{tbdMessage:a.locationTbdMessage,value:null}:{value:{name:a.location.name,address:a.location.address,vicinity:a.location.vicinity,lat:a.location.coordinates.lat,lng:a.location.coordinates.lng},tbdMessage:null}},a.prototype.serializeTermData=function(a){return a.dateTbd?{tbdMessage:a.dateTbdMessage,value:null}:{value:{start:this.dateService.createDateISOString(a.startDate,a.startTime,a.timeZoneId),end:a.endDate?this.dateService.createDateISOString(a.endDate,a.endTime,a.timeZoneId):null,timeZoneId:a.timeZoneId,formatted:this.dateService.formatTimeForEmail(a.startDate+" "+a.startTime,""+(a.endDate?a.endDate+" "+a.endTime:""),a.timeZoneId,a.dateTbd,a.dateTbdMessage)},tbdMessage:null}},a.prototype.calculateTimeline=function(a){var b={Canceled:"Canceled",Published:"Upcoming",Happening:"Upcoming",Paused:"Upcoming",Over:"Past",Unpublished:"Hidden"};return b[a]||"Hidden"},a}();angular.module("eventsAppInternal").service("eventAdapter",EventAdapter);var EventActions=function(){function a(a,b){this.dispatcher=a,this.repository=b}return a.$inject=["dispatcher","repository"],a.prototype.discardDraft=function(a){var b=this;this.repository.discardDraft(a).then(function(){b.dispatcher.dispatch({type:"DISCARD_DRAFT",eventId:a})})},a}();angular.module("eventsAppInternal").service("eventActions",EventActions);var EventListFilters=function(){function a(){}return a}();EventListFilters.UPCOMING="Upcoming",EventListFilters.PAST="Past",EventListFilters.CANCELED="Canceled",EventListFilters.HIDDEN="Hidden";var EventListOrderBy=function(){function a(){}return a}();EventListOrderBy.START_DATE="startDate",EventListOrderBy.MODIFIED="modified";var EventListActions=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$location=a,this.$translate=b,this.repository=c,this.modalService=d,this.dispatcher=e,this.eventListStore=f,this.eventAdapter=g,this.eventActions=h,this.eventsBiLogger=i,this.eventsBI=j,this.evUtils=k,this.experimentManager=l}return a.$inject=["$location","$translate","repository","modalService","dispatcher","eventListStore","eventAdapter","eventActions","eventsBiLogger","eventsBI","evUtils","experimentManager"],a.prototype.loadEvents=function(){var b=this;return this.repository.getUserEvents().then(function(c){var d={type:a.RECEIVE_EVENT_LIST,events:c.data.events};return b.dispatcher.dispatch(d),d})},a.prototype.changeFilter=function(b){this.dispatcher.dispatch({type:a.CHANGE_EVENT_LIST_FILTER,filter:b})},a.prototype.changeOrder=function(b){this.dispatcher.dispatch({type:a.CHANGE_EVENT_LIST_ORDER,orderBy:b})},a.prototype.editEvent=function(a){this.$location.path("/events/"+a+"/event-settings"),this.eventsBiLogger.DASHBOARD.sendManageEventClicked()},a.prototype.duplicateEvent=function(a){var b=this;this.eventsBiLogger.DASHBOARD.sendEventOptionsClicked("duplicate"),this.eventListStore.getData().drafts.forEach(function(a){return b.eventActions.discardDraft(a.eventId)}),this.repository.cloneEvent(a).then(function(a){var c=b.eventAdapter.normalize(a.data);b.addEvent(c),b.addEventToComponent(c.eventId),b.$location.path("/events/"+c.eventId+"/event-settings")})},a.prototype.deleteEvent=function(b){var c=this;this.modalService.showAlertModal({title:this.$translate("dashboard_deleteModalTitle"),url:"modules/dashboard/tabs/event-settings/event-delete-modal/event-delete-modal.html",iconUrl:"images/dashboard-icons/event-delete-modal.svg",confirm:this.$translate("dashboard_deleteModalConfirm"),cancel:this.$translate("dashboard_deleteModalAbort"),style:"DANGER"}).then(function(){c.repository.changeEventStatus("Archived",b).then(function(d){"Archived"===d.data.status&&c.dispatcher.dispatch({type:a.DELETE_EVENT,eventId:b})})})},a.prototype.cancelEvent=function(b){var c=this;this.eventsBiLogger.DASHBOARD.sendEventOptionsClicked("cancel_event"),this.modalService.showAlertModal({title:this.$translate("eventDetails_cancelModalTitle"),url:"modules/dashboard/tabs/event-settings/event-canceled-modal/event-canceled-modal.html",iconUrl:"images/dashboard-icons/event-canceled-modal.svg",confirm:this.$translate("eventDetails_cancelModalConfirm"),cancel:this.$translate("eventDetails_cancelModalAbort"),style:"DANGER"}).then(function(){c.eventsBiLogger.DASHBOARD.sendEventCancelClicked("cancel"),c.repository.changeEventStatus("Canceled",b).then(function(d){return c.dispatcher.dispatch({type:a.CANCEL_EVENT,eventId:b}),d})},function(){return c.eventsBiLogger.DASHBOARD.sendEventCancelClicked("not_cancel")})},a.prototype.openGuestList=function(a,b){this.$location.path("/events/"+a+"/"+(b?"order-list":"guest-list")),this.eventsBiLogger.DASHBOARD.sendEventOptionsClicked("guest_list")},a.prototype.openInvitation=function(a){this.$location.path("/events/"+a+"/invitation"),this.eventsBiLogger.DASHBOARD.sendEventOptionsClicked("invite_guests")},a.prototype.openEventDetails=function(a){this.$location.path("/events/"+a+"/event-settings"),this.eventsBiLogger.DASHBOARD.sendEventOptionsClicked("event_settings")},a.prototype.openRegistration=function(a){var b=this.experimentManager.isExperimentEnabled("specs.events.ui.RegistrationAndEmailsTabs");this.$location.path("/events/"+a+"/"+(b?"registration":"registration-general")),this.eventsBiLogger.DASHBOARD.sendEventOptionsClicked("registration_settings")},a.prototype.openTickets=function(a){this.$location.path("/events/"+a+"/tickets")},a.prototype.createNewDraft=function(a){void 0===a&&(a="my_events"),this.$location.path("/events/new"),this.eventsBiLogger.DASHBOARD.sendCreateEventClicked(),this.eventsBI.addEventClick(a,"add_event")},a.prototype.addEvent=function(b){this.dispatcher.dispatch({type:a.ADD_EVENT,eventData:b})},a.prototype.updateEvent=function(b){this.dispatcher.dispatch({type:a.UPDATE_EVENT,eventData:b})},a.prototype.addEventToComponent=function(a){var b=this,c=this.evUtils.getOrigCompId();c&&this.repository.getComponentDraftSettings(c).then(function(c){var d=c.data.compEvents.concat(a);b.repository.updateComponentDraftSettings(null,d)})},a}();EventListActions.ADD_EVENT="ADD_EVENT",EventListActions.DELETE_EVENT="DELETE_EVENT",EventListActions.UPDATE_EVENT="UPDATE_EVENT",EventListActions.CANCEL_EVENT="CANCEL_EVENT",EventListActions.CHANGE_EVENT_LIST_FILTER="CHANGE_EVENT_LIST_FILTER",EventListActions.CHANGE_EVENT_LIST_ORDER="CHANGE_EVENT_LIST_ORDER",EventListActions.RECEIVE_EVENT_LIST="RECEIVE_EVENT_LIST",angular.module("eventsAppInternal").service("eventListActions",EventListActions);var Dispatcher=function(){function a(a){this.bus=a}return a.$inject=["$rootScope"],a.prototype.on=function(b){return this.bus.$on(a.DISPATCH,function(a,c){b(c)})},a.prototype.dispatch=function(b){return this.bus.$emit(a.DISPATCH,b)},a}();Dispatcher.DISPATCH="DISPATCH",angular.module("eventsAppInternal").service("dispatcher",Dispatcher);var EventController=function(){function a(a,b,c,d,e,f,g,h,i){this.settingsStore=a,this.eventStore=b,this.formService=c,this.settingsHelper=d,this.wixSDK=e,this.applicationLoad=f,this.siteStore=g,this.$window=h,this.eventsBiLogger=i,this.eventData=b.getData(),this.eventSettings=a.getSettings(),this.eventParams=a.getParams(),this.isMobile="mobile"===e.Utils.getDeviceType(),this.getComponentInfo(),this.addPageNavigationEventListener(),this.loadForm()}return a.$inject=["settingsStore","eventStore","formService","settingsHelper","wixSDK","applicationLoad","siteStore","$window","eventsBiLogger"],a.prototype.$onInit=function(){this.applicationLoad.reportAppLoaded()},a.prototype.getFrameClasses=function(){return{"ev-frame--horizontal-layout":this.settingsHelper.isHorizontalLayout(),"ev-frame--vertical-layout":this.settingsHelper.isVerticalLayout(),"ev-frame--background-layout":this.settingsHelper.isBackgroundLayout(),"ev-frame--only-button":this.settingsHelper.isOnlyButtonVisible(),"ev-frame--right-image":this.settingsHelper.isRightImage(),"ev-frame--bottom-image":this.settingsHelper.isBottomImage(),"ev-frame--no-image":!this.settingsHelper.isImageVisible(),"ev-frame--fit-image":this.settingsHelper.isFitImage(),"ev-frame--mobile":this.isMobile}},a.prototype.getEventClasses=function(){return{"ev-event--no-countdown":!this.settingsHelper.isCountdownVisible(),"ev-event--no-title":!this.settingsHelper.isTitleVisible(),"ev-event--no-description":!this.settingsHelper.isDescriptionVisible(),"ev-event--no-date":!this.settingsHelper.isDateVisible(),"ev-event--no-hours":!this.settingsHelper.isHoursVisible(),"ev-event--no-location":!this.settingsHelper.isLocationVisible(),"ev-event--short-date-and-location":this.settingsHelper.isCompactDateAndLocationVisible(),"ev-event--horizontal-date-and-location":this.settingsHelper.isHorizontalDateAndLocationVisible(),"ev-event--no-social-bar":!this.settingsHelper.isShareOptionsVisible(),"ev-event--no-dividers":!this.settingsHelper.isDividersVisible(),"ev-event--no-labels":!this.settingsHelper.isDateAndLocationLabelsVisible(),"ev-event--left-alignment":this.settingsHelper.isLeftAlignment(),"ev-event--right-alignment":this.settingsHelper.isRightAlignment(),"ev-event--center-content-alignment":this.settingsHelper.isCenterContentAlignment(),"ev-event--bottom-content-alignment":this.settingsHelper.isBottomContentAlignment(),"ev-event--only-button":this.settingsHelper.isOnlyButtonVisible(),"ev-event--mobile":this.isMobile}},a.prototype.getImageClasses=function(){return a={},a["ev-image--"+this.eventSettings.imageGridPosition.toLowerCase()]=!this.settingsHelper.isFitImage(),a;var a},a.prototype.getImageStyle=function(){var a=this.wixSDK.Utils.Media.getResizedImageUrl(this.eventData.mainImage,this.eventData.mainImageWidth,this.eventData.mainImageHeight);return{"background-image":"url("+a+")",opacity:this.settingsHelper.isBackgroundLayout()?this.eventParams.numbers.imageOpacity/100:1}},a.prototype.openForm=function(a){var b="pop_up form";return this.eventData.externalLink?void this.$window.open(this.eventData.externalLink,"_blank"):(this.siteStore.canOpenPage()?(b=1===this.siteStore.getData().pagesType?"page_details":"page_form",this.settingsHelper.navigateToPage(this.eventData.slug)):this.formService.openForm({response:"Waiting"===this.eventData.bookings&&"Yes"===a?"Waiting":a,bookings:this.eventData.bookings,eventId:this.eventData.eventId,status:this.eventData.status,dividerIsVisible:this.settingsHelper.isDividersVisible(),silent:"Unpublished"===this.eventData.status||this.eventData.eventId.indexOf("DEMO")>-1,timestamp:this.now(),widgetImageOn:!!this.eventData.mainImage,negativeResponseEnabled:"YesAndNo"===this.eventData.registrationType,calendarLinks:this.eventData.calendarLinks,messages:this.eventSettings.messages,closedRegistrationMessages:this.eventSettings.closedRegistrationMessages,config:this.eventData.rsvpForm.config,dateTbd:this.eventData.dateTbd,externalLink:this.eventData.externalLink}),void this.eventsBiLogger.WIDGET.sendOpenRegistrationFormClicked(this.eventData.rsvpForm.config.fields.length+1,b,this.eventData.eventId));
},a.prototype.getComponentInfo=function(){var a=this;this.wixSDK.getComponentInfo(function(b){return a.showOnAllPages=b.showOnAllPages})},a.prototype.addPageNavigationEventListener=function(){var a=this;this.wixSDK.addEventListener(this.wixSDK.Events.PAGE_NAVIGATION,function(b){return(b.isAppOnPage||a.showOnAllPages)&&a.loadForm()})},a.prototype.loadForm=function(){this.isMobile||this.formService.loadForm()},a.prototype.now=function(){return+new Date},a}();angular.module("eventsAppInternal").component("evEvent",{templateUrl:"modules/layout/event/event.html",controller:EventController,bindings:{}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/event/event.html","<div class='ev-frame' ev-accessibility-listener ev-mobile-resize ng-class='$ctrl.getFrameClasses()'>\n<div class='ev-image' ng-class='$ctrl.getImageClasses()' ng-if='$ctrl.settingsHelper.isImageVisible()' ng-style='$ctrl.getImageStyle()'></div>\n<div class='ev-image-overlay' ng-if='$ctrl.settingsHelper.isBackgroundLayout() &amp;&amp; !$ctrl.settingsHelper.isOnlyButtonVisible()'></div>\n<div class='ev-event' ng-class='$ctrl.getEventClasses()'>\n<div class='ev-event-content'>\n<ev-countdown date='$ctrl.eventData.startDate' ng-if='$ctrl.settingsHelper.isCountdownVisible()' ng-style='{ &#39;margin-bottom&#39;: $ctrl.isMobile ? 0 : $ctrl.eventParams.numbers.countdownMarginBottom }' time-zone-id='$ctrl.eventData.timeZoneId' time='$ctrl.eventData.startTime'></ev-countdown>\n<ev-title event-title='$ctrl.eventData.title' ng-if='$ctrl.settingsHelper.isTitleVisible()' ng-style='{ &#39;margin-bottom&#39;: $ctrl.isMobile ? 0 : $ctrl.eventParams.numbers.titleMarginBottom }'></ev-title>\n<ev-short-date-location date-tbd-message='$ctrl.eventData.dateTbdMessage' date-tbd='$ctrl.eventData.dateTbd' end-date='$ctrl.eventData.endDate' location-tbd-message='$ctrl.eventData.locationTbdMessage' location-tbd='$ctrl.eventData.locationTbd' location='$ctrl.eventData.location' ng-if='$ctrl.settingsHelper.isCompactDateAndLocationVisible() &amp;&amp; ($ctrl.settingsHelper.isDateVisible() || $ctrl.settingsHelper.isLocationVisible())' ng-style='{ &#39;margin-bottom&#39;: $ctrl.isMobile ? 0 : $ctrl.eventParams.numbers.dateAndLocationMarginBottom }' start-date='$ctrl.eventData.startDate'></ev-short-date-location>\n<ev-divider class='ev-event__horizontal-divider' height='$ctrl.eventParams.numbers.compactHorizontalDividerHeight' ng-if='$ctrl.settingsHelper.isHorizontalDividerVisible()' width='$ctrl.eventParams.numbers.compactHorizontalDividerWidth'></ev-divider>\n<ev-description description='$ctrl.eventData.description' ng-if='$ctrl.settingsHelper.isDescriptionVisible()' ng-style='{ &#39;margin-bottom&#39;: $ctrl.isMobile ? 0 : $ctrl.eventParams.numbers.descriptionMarginBottom }'></ev-description>\n<div class='ev-event-date-and-location' ng-if='!$ctrl.settingsHelper.isCompactDateAndLocationVisible() &amp;&amp; ($ctrl.settingsHelper.isDateVisible() || $ctrl.settingsHelper.isLocationVisible())' ng-style='{ &#39;margin-bottom&#39;: $ctrl.eventParams.numbers.dateAndLocationMarginBottom }'>\n<ev-date date-tbd='$ctrl.eventData.dateTbd' date-title='$ctrl.eventSettings.texts.time' divider-height='$ctrl.eventParams.numbers.horizontalDividerHeight' divider-width='$ctrl.eventParams.numbers.horizontalDividerWidth' end-date='$ctrl.eventData.endDate' end-time='$ctrl.eventData.endTime' ng-if='$ctrl.settingsHelper.isDateVisible()' ng-style='{ &#39;margin-bottom&#39;: $ctrl.isMobile || $ctrl.settingsHelper.isHorizontalDateAndLocationVisible() ? 0 : $ctrl.eventParams.numbers.dateMarginBottom }' show-divider='$ctrl.settingsHelper.isDividersVisible() &amp;&amp; $ctrl.settingsHelper.isVerticalDateAndLocationVisible()' show-title='$ctrl.settingsHelper.isDateLabelVisible()' start-date='$ctrl.eventData.startDate' start-time='$ctrl.eventData.startTime' tbd-message='$ctrl.eventData.dateTbdMessage' time-zone-id='$ctrl.eventData.timeZoneId'></ev-date>\n<ev-divider class='ev-event-date-and-location__vertical-divider' height='$ctrl.eventParams.numbers.verticalDividerHeight' ng-if='$ctrl.settingsHelper.isDividersVisible() &amp;&amp; $ctrl.settingsHelper.isHorizontalDateAndLocationVisible()' width='$ctrl.eventParams.numbers.verticalDividerWidth'></ev-divider>\n<ev-divider class='ev-event-date-and-location__horizontal-divider' height='$ctrl.eventParams.numbers.horizontalDividerHeight' ng-if='$ctrl.settingsHelper.isDividersVisible() &amp;&amp; $ctrl.settingsHelper.isHorizontalDateAndLocationVisible()' width='$ctrl.eventParams.numbers.horizontalDividerWidth'></ev-divider>\n<ev-location divider-height='$ctrl.eventParams.numbers.horizontalDividerHeight' divider-width='$ctrl.eventParams.numbers.horizontalDividerWidth' location-tbd='$ctrl.eventData.locationTbd' location-title='$ctrl.eventSettings.texts.location' location='$ctrl.eventData.location' ng-if='$ctrl.settingsHelper.isLocationVisible()' ng-style='{ &#39;margin-bottom&#39;: $ctrl.settingsHelper.isHorizontalDateAndLocationVisible() ? 0 : $ctrl.eventParams.numbers.locationMarginBottom }' show-divider='$ctrl.settingsHelper.isDividersVisible() &amp;&amp; $ctrl.settingsHelper.isVerticalDateAndLocationVisible()' show-title='$ctrl.settingsHelper.isLocationLabelVisible()' tbd-message='$ctrl.eventData.locationTbdMessage'></ev-location>\n</div>\n<ev-rsvp-buttons buttons-style='$ctrl.eventParams.numbers.buttonsStyle' ng-style='{ &#39;margin-bottom&#39;: $ctrl.settingsHelper.isOnlyButtonVisible() ? 0 : $ctrl.eventParams.numbers.rsvpMarginBottom }' on-click='$ctrl.openForm(response)' one-button-text='$ctrl.eventSettings.texts.oneButton' rsvp-title='$ctrl.eventSettings.texts.RSVPTitle' show-title='$ctrl.settingsHelper.isRsvpLabelVisible()'></ev-rsvp-buttons>\n<ev-social-bar event-id='$ctrl.eventData.eventId' event-status='$ctrl.eventData.status' ng-if='$ctrl.settingsHelper.isShareOptionsVisible()'></ev-social-bar>\n</div>\n</div>\n</div>\n")}]);var EventCountdownController=function(){function a(a,b){this.dateService=a,this.$filter=b,this.MS_PER_HOUR=36e5,this.HOUR_PER_DAY=24,this.countdownOneDay=this.$filter("translate")("countdownOneDay")}return a.$inject=["dateService","$filter"],a.prototype.$onChanges=function(){this.eventStart=new Date(this.dateService.createDateISOString(this.date,this.time,this.timeZoneId)),this.daysLeft=this.getDaysLeft(),this.countdownManyDays=this.$filter("translate")("countdownManyDays",{daysLeft:this.daysLeft})},a.prototype.getDaysLeft=function(){this.now=this.dateService.now();var a=Math.floor((this.eventStart.getTime()-this.now.valueOf())/this.MS_PER_HOUR),b=Math.ceil((a-this.getHours())/this.HOUR_PER_DAY);return 0>b?0:b},a.prototype.getHours=function(){var a=this.time?this.time.split(":")[0]:"00";return parseInt(a,10)},a}();angular.module("eventsAppInternal").component("evCountdown",{templateUrl:"modules/layout/countdown/countdown.html",controller:EventCountdownController,bindings:{date:"<",time:"<",timeZoneId:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/countdown/countdown.html","<div class='ev-countdown'>\n<div class='ev-countdown__time-left' count='$ctrl.daysLeft' ng-pluralize when='{ one: &#39;{{ $ctrl.countdownOneDay }}&#39;, other: &#39;{{ $ctrl.countdownManyDays }}&#39;, many: &#39;{{ $ctrl.countdownManyDays }}&#39; }'></div>\n</div>\n")}]),angular.module("eventsAppInternal").component("evTitle",{templateUrl:"modules/layout/title/title.html",bindings:{eventTitle:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/title/title.html","<div class='ev-title'>\n<div class='ev-title__text' ng-bind='$ctrl.eventTitle' role='header'></div>\n</div>\n")}]),angular.module("eventsAppInternal").component("evDescription",{templateUrl:"modules/layout/description/description.html",bindings:{description:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/description/description.html","<div class='ev-description'>\n<div class='ev-description__text' ng-bind='$ctrl.description' ng-if='$ctrl.description'></div>\n</div>\n")}]);var EventDateController=function(){function a(a){this.dateService=a}return a.$inject=["dateService"],a.prototype.$onChanges=function(){this.tbd||(this.datesForPreview=this.dateService.formatDatesForPreview(this.startDate,this.endDate),this.timesForPreview=this.dateService.formatTimesForPreview(this.startTime,this.endTime,this.timeZoneId,this.startDate))},a.prototype.getAriaLabel=function(){return this.tbd?this.tbdMessage:this.datesForPreview+" "+this.timesForPreview},a}();angular.module("eventsAppInternal").component("evDate",{templateUrl:"modules/layout/date/date.html",controller:EventDateController,bindings:{startDate:"<",startTime:"<",endDate:"<",endTime:"<",timeZoneId:"<",tbd:"<dateTbd",tbdMessage:"<",dateTitle:"<",dividerWidth:"<",dividerHeight:"<",showTitle:"<",showDivider:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/date/date.html","<div class='ev-date'>\n<div class='ev-date__title' ng-bind='$ctrl.dateTitle' ng-if='$ctrl.showTitle'></div>\n<ev-divider height='$ctrl.dividerHeight' ng-if='$ctrl.showDivider &amp;&amp; $ctrl.showTitle' width='$ctrl.dividerWidth'></ev-divider>\n<div aria-label='{{ $ctrl.getAriaLabel() }}' class='ev-date__date-time' role='text'>\n<div class='ev-date__date' ng-if='!$ctrl.tbd'>{{ $ctrl.datesForPreview }}</div>\n<div class='ev-date__time' ng-if='!$ctrl.tbd'>{{ $ctrl.timesForPreview }}</div>\n<div class='ev-date__tbd' ng-bind='$ctrl.tbdMessage' ng-if='$ctrl.tbd'></div>\n</div>\n</div>\n")}]);var EventLocationController=function(){function a(){}return a.prototype.getAriaLabel=function(){return this.tbd?this.tbdMessage:this.getLocation()},a.prototype.getLocation=function(){return this.location.name?this.location.name+", "+this.location.address:this.location.address},a}();angular.module("eventsAppInternal").component("evLocation",{templateUrl:"modules/layout/location/location.html",controller:EventLocationController,bindings:{location:"<",tbd:"<locationTbd",tbdMessage:"<",locationTitle:"<",dividerWidth:"<",dividerHeight:"<",showTitle:"<",showDivider:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/location/location.html","<div class='ev-location'>\n<div class='ev-location__title' ng-bind='$ctrl.locationTitle' ng-if='$ctrl.showTitle'></div>\n<ev-divider height='$ctrl.dividerHeight' ng-if='$ctrl.showDivider &amp;&amp; $ctrl.showTitle' width='$ctrl.dividerWidth'></ev-divider>\n<div aria-label='{{ $ctrl.getAriaLabel() }}' class='ev-location__location' role='text'>\n<div class='ev-location__location-venue' ng-bind='$ctrl.location.name' ng-if='!$ctrl.tbd &amp;&amp; $ctrl.location.name'></div>\n<div class='ev-location__location-address' ng-bind='$ctrl.location.address' ng-if='!$ctrl.tbd'></div>\n<div class='ev-location__location-tbd' ng-bind='$ctrl.tbdMessage' ng-if='$ctrl.tbd'></div>\n</div>\n</div>\n")}]);var EventShortDateLocationController=function(){function a(a){this.dateService=a}return a.$inject=["dateService"],a.prototype.$onChanges=function(){this.dateTbd||(this.datesForPreview=this.dateService.formatDatesForPreview(this.startDate,this.endDate))},a.prototype.getDateText=function(){return this.dateTbd?this.dateTbdMessage:this.datesForPreview},a.prototype.getLocationText=function(){return this.locationTbd?this.locationTbdMessage:this.location.name||this.location.address},a}();angular.module("eventsAppInternal").component("evShortDateLocation",{templateUrl:"modules/layout/short-date-location/short-date-location.html",controller:EventShortDateLocationController,bindings:{startDate:"<",endDate:"<",location:"<",dateTbd:"<",locationTbd:"<",dateTbdMessage:"<",locationTbdMessage:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/short-date-location/short-date-location.html","<div class='ev-short-date-location'>\n<div class='ev-short-date-location__date-wrapper'>\n<div class='ev-short-date-location__date' ng-bind='$ctrl.getDateText()'></div>\n<div class='ev-short-date-location__vertical-divider'></div>\n</div>\n<div class='ev-short-date-location__location' ng-bind='$ctrl.getLocationText()'></div>\n</div>\n")}]);var EventRsvpButtonsController=function(){function a(a){this.settingsStore=a}return a.$inject=["settingsStore"],a.prototype.chooseResponse=function(a){this.onClick({response:a})},a.prototype.isRoundedButtons=function(){return this.buttonsStyle===this.settingsStore.BUTTONS_STYLE.FULL_ROUNDED||this.buttonsStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW_ROUNDED},a.prototype.isHollowButtons=function(){return this.buttonsStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW||this.buttonsStyle===this.settingsStore.BUTTONS_STYLE.HOLLOW_ROUNDED},a}();angular.module("eventsAppInternal").component("evRsvpButtons",{templateUrl:"modules/layout/rsvp-buttons/rsvp-buttons.html",controller:EventRsvpButtonsController,bindings:{buttonsStyle:"<",rsvpTitle:"<",oneButtonText:"<",showTitle:"<",onClick:"&"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/rsvp-buttons/rsvp-buttons.html","<div class='ev-rsvp-buttons' ng-class='{ &#39;ev-rsvp-buttons--hollow-buttons&#39;: $ctrl.isHollowButtons(), &#39;ev-rsvp-buttons--rounded-buttons&#39;: $ctrl.isRoundedButtons() }'>\n<div class='ev-rsvp-buttons__title' ng-bind='$ctrl.rsvpTitle' ng-if='$ctrl.showTitle &amp;&amp; $ctrl.rsvpTitle'></div>\n<div class='ev-rsvp-buttons__wrapper'>\n<div class='ev-rsvp-buttons__button' data-selenium='register-button' ng-click='$ctrl.chooseResponse(&#39;Yes&#39;)'>\n<button ng-bind='$ctrl.oneButtonText'></button>\n<div class='ev-rsvp-buttons__button-overlay'></div>\n</div>\n</div>\n</div>\n")}]);var EventSocialBarController=function(){function a(a,b){this.$translate=a,this.shareService=b}return a.$inject=["$translate","shareService"],a.prototype.$postLink=function(){var a=this;this.shareService.getSiteUrl(this.eventId).then(function(b){return a.siteUrl=b})},a.prototype.getSocialButtonAriaLabel=function(a){return this.$translate("a11y.shareButtonLabel",{button:a})},a}();angular.module("eventsAppInternal").component("evSocialBar",{templateUrl:"modules/layout/social-bar/social-bar.html",controller:EventSocialBarController,bindings:{eventId:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/social-bar/social-bar.html","<div class='ev-social-bar'>\n<div class='ev-social-bar__buttons'>\n<button aria-label='{{ $ctrl.getSocialButtonAriaLabel(&#39;Facebook&#39;) }}' class='ev-social-bar__button ev-social-bar__button--facebook' ng-click='$ctrl.shareService.facebookShare($ctrl.siteUrl)' role='link'>\n<div ng-include='&#39;/images/onstage-icons/facebook.svg&#39;'></div>\n</button>\n<button aria-label='{{ $ctrl.getSocialButtonAriaLabel(&#39;Twitter&#39;) }}' class='ev-social-bar__button ev-social-bar__button--twitter' ng-click='$ctrl.shareService.twitterShare($ctrl.siteUrl)' role='link'>\n<div ng-include='&#39;/images/onstage-icons/twitter.svg&#39;'></div>\n</button>\n<button aria-label='{{ $ctrl.getSocialButtonAriaLabel(&#39;LinkedIn&#39;) }}' class='ev-social-bar__button ev-social-bar__button--linkedin' ng-click='$ctrl.shareService.linkedInShare($ctrl.siteUrl)' role='link'>\n<div ng-include='&#39;/images/onstage-icons/linkedin.svg&#39;'></div>\n</button>\n</div>\n</div>\n")}]),angular.module("eventsAppInternal").component("evDivider",{templateUrl:"modules/layout/divider/divider.html",bindings:{width:"<",height:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/divider/divider.html","<div class='ev-divider' ng-style='{ width: $ctrl.width, height: $ctrl.height }'></div>\n")}]);var AccessibilityListener=function(){function a(a,b){var c=this;this.$scope=a,this.evUtils=b,this.noOutline="ev-no-a11y-outline",this.handleTabKeyUp=this.handleTabKeyUp.bind(this),this.handleClick=this.handleClick.bind(this),this.$scope.$on("$destroy",function(){return c.removeListeners()})}return a.$inject=["$scope","evUtils"],a.prototype.$onInit=function(){this.body=angular.element(document.body)},a.prototype.$postLink=function(){this.body.addClass(this.noOutline),this.evUtils.isMobile()||(document.addEventListener("keyup",this.handleTabKeyUp),document.addEventListener("mouseup",this.handleClick))},a.prototype.handleTabKeyUp=function(a){9===a.keyCode&&this.body.hasClass(this.noOutline)&&this.body.removeClass(this.noOutline)},a.prototype.handleClick=function(){this.body.hasClass(this.noOutline)||this.body.addClass(this.noOutline)},a.prototype.removeListeners=function(){this.evUtils.isMobile()||(document.removeEventListener("keyup",this.handleTabKeyUp),document.removeEventListener("mouseup",this.handleClick))},a}();angular.module("eventsAppInternal").directive("evAccessibilityListener",function(){return{restrict:"A",controller:AccessibilityListener}});var WidgetList=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.$scope=a,this.$translate=b,this.wixSDK=c,this.evUtils=d,this.formService=e,this.dateService=f,this.settingsHelper=g,this.listSettingsHelper=h,this.settingsStore=i,this.eventsBiLogger=j,this.siteStore=k,this.applicationLoad=l,this.evListResize=m,this.componentStore=n,this.$window=o}return a.$inject=["$scope","$translate","wixSDK","evUtils","formService","dateService","settingsHelper","listSettingsHelper","settingsStore","eventsBiLogger","siteStore","applicationLoad","evListResize","componentStore","$window"],a.prototype.$onInit=function(){var a=this;this.mobile=this.evUtils.isMobile(),this.getComponentInfo(),this.addPageNavigationEventListener(),this.loadForm(),this.$scope.$on("EXPAND_EVENT",function(){return a.expandEvent(a.componentStore.getComponentEvents()[0].eventId)}),this.$scope.$on("COLLAPSE_EVENT",function(){return a.closeEvent()}),this.applicationLoad.reportAppLoaded()},a.prototype.openForm=function(a,b){var c=this.componentStore.getComponentEventByID(a),d="pop_up form";return c.externalLink?void this.$window.open(c.externalLink,"_blank"):(this.siteStore.canOpenPage()?(d=1===this.siteStore.getData().pagesType?"page_details":"page_form",this.settingsHelper.navigateToPage(b)):this.formService.openForm({eventId:a,response:"Yes",dividerIsVisible:this.settingsHelper.isDividersVisible(),timestamp:this.now(),fromList:!0,externalLink:c&&c.externalLink}),void this.eventsBiLogger.WIDGET.sendOpenRegistrationFormClicked(null,d,a))},a.prototype.toggleEvent=function(a,b){b&&b.target.classList.contains("ev-list-rsvp__button")||this.listSettingsHelper.isAdditionalComponentsHidden()||(a===this.expandedEventId?this.closeEvent():this.expandEvent(a))},a.prototype.expandEvent=function(a){var b=this;this.widgetHeight=this.widgetHeight||this.evListResize.getCurrentListHeight(),this.expandedEventId=a,this.expandInProgress||(this.expandInProgress=!0,this.evListResize.resize(500,"LIST",function(){return b.expandInProgress=!1}))},a.prototype.closeEvent=function(){this.expandedEventId="",this.widgetHeight&&(this.wixSDK.setHeight(this.widgetHeight),this.widgetHeight=null)},a.prototype.getItemAriaLabel=function(a){var b=a.dateTbd?a.dateTbdMessage:this.dateService.formatDate(a.startDate,this.$translate("cardsItemShortDateFormat")),c=a.locationTbd?a.locationTbdMessage:a.location.name||a.location.address;return this.$translate("a11y.multiModesLabel")+", "+a.title+", "+b+", "+c},a.prototype.getFrameClasses=function(){return{"ev-widget-list-frame--mobile":this.mobile,"ev-widget-list-frame--cards-mobile":this.mobile&&!this.listSettingsHelper.isListLayout()}},a.prototype.getListClasses=function(){return{"ev-widget-list--no-date":!this.listSettingsHelper.isDateVisible(),"ev-widget-list--no-day-of-week":!this.listSettingsHelper.isDayOfWeekVisible(),"ev-widget-list--no-venue":!this.listSettingsHelper.isVenueVisible(),"ev-widget-list--no-full-date":!this.listSettingsHelper.isFullDateVisible(),"ev-widget-list--no-location":!this.listSettingsHelper.isLocationVisible(),"ev-widget-list--no-description":!this.listSettingsHelper.isDescriptionVisible(),"ev-widget-list--no-social-share":!this.listSettingsHelper.isSocialShareVisible(),"ev-widget-list--no-image":!this.listSettingsHelper.isImageVisible(),"ev-widget-list--additional-components-hidden":this.listSettingsHelper.isAdditionalComponentsHidden()}},a.prototype.getComponentInfo=function(){var a=this;this.wixSDK.getComponentInfo(function(b){return a.showOnAllPages=b.showOnAllPages})},a.prototype.addPageNavigationEventListener=function(){var a=this;this.wixSDK.addEventListener(this.wixSDK.Events.PAGE_NAVIGATION,function(b){return(b.isAppOnPage||a.showOnAllPages)&&a.loadForm()})},a.prototype.now=function(){return+new Date},a.prototype.loadForm=function(){this.mobile||this.formService.loadForm()},a}();angular.module("eventsAppInternal").component("evWidgetList",{controller:WidgetList,templateUrl:"modules/layout/event-list/event-list.html"});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/event-list/event-list.html","<div class='ev-widget-list-frame' ev-accessibility-listener ev-list-resize ng-class='$ctrl.getFrameClasses()'>\n<div class='ev-widget-list-frame-content'>\n<div class='ev-widget-list__title' ng-bind='$ctrl.settingsStore.getTexts().listGeneralTitle' ng-show='$ctrl.listSettingsHelper.isMainTitleVisible()'></div>\n<div class='ev-widget-list' ng-class='$ctrl.getListClasses()'>\n<ev-widget-list-item aria-label='{{ $ctrl.getItemAriaLabel(event) }}' button-text='$ctrl.settingsStore.getTexts().listButtonText' class='ev-widget-list-item' date-tbd-message='event.dateTbdMessage' date-tbd='event.dateTbd' description='event.description' end-date='event.endDate' end-time='event.endTime' ev-title='event.title' event-id='event.eventId' expanded='event.eventId === $ctrl.expandedEventId' hours-visible='$ctrl.listSettingsHelper.isHoursVisible()' image='event.mainImage' location-address='event.location.address' location-name='event.location.name' location-tbd-message='event.locationTbdMessage' location-tbd='event.locationTbd' ng-class='{ &#39;ev-widget-list-item--expanded&#39;: $ctrl.expandedEventId === event.eventId }' ng-click='$ctrl.toggleEvent(event.eventId, $event)' ng-repeat='event in $ctrl.componentStore.getComponentEvents() track by event.eventId' on-close='$ctrl.closeEvent()' on-expand='$ctrl.expandEvent(event.eventId)' on-rsvp='$ctrl.openForm(event.eventId, event.slug)' start-date='event.startDate' start-time='event.startTime' tabindex='0' time-zone-id='event.timeZoneId'></ev-widget-list-item>\n</div>\n</div>\n</div>\n")}]);var WidgetListItem=function(){function a(a,b,c,d,e,f,g){this.$scope=a,this.$timeout=b,this.$element=c,this.$translate=d,this.dateService=e,this.wixSDK=f,this.listSettingsHelper=g,this.CONTENT_WRAPPER_SELECTOR=".ev-widget-list-item-content-wrapper",this.INFO_SELECTOR=".ev-widget-list-item-info",this.BUTTON_SELECTOR=".ev-list-rsvp__button",this.setItemHeight=this.setItemHeight.bind(this)}return a.$inject=["$scope","$timeout","$element","$translate","dateService","wixSDK","listSettingsHelper"],a.prototype.$onInit=function(){var a=this;if(this.addAccessibilityListeners(),this.image){var b=this.getImageSize(),c=b.width,d=b.height;this.imageStyle={"background-image":"url("+this.wixSDK.Utils.Media.getResizedImageUrl(this.image,c,d)+")"}}this.dateTbd||(this.datesForPreview=this.dateService.formatDatesForPreview(this.startDate,this.endDate),this.timesForPreview=this.dateService.formatTimesForPreview(this.startTime,this.endTime,this.timeZoneId,this.startDate)),window.addEventListener("resize",this.setItemHeight),this.listener=this.$scope.$on("WIX_PARAMS_CHANGED",function(){a.$timeout(a.setItemHeight,100)})},a.prototype.$onChanges=function(a){a.expanded&&this.setElementHeight()},a.prototype.$onDestroy=function(){window.removeEventListener("resize",this.setItemHeight),this.listener()},a.prototype.getVenue=function(){return this.locationTbd?this.locationTbdMessage:this.locationName||this.locationAddress},a.prototype.getShortDate=function(){return this.dateTbd?this.dateTbdMessage:this.dateService.formatDate(this.startDate,this.$translate("cardsItemShortDateFormat"))},a.prototype.getLocation=function(){var a=(this.locationName?this.locationName+", ":"")+this.locationAddress;return this.locationTbd?this.locationTbdMessage:a},a.prototype.getDate=function(){return this.dateTbd?this.dateTbdMessage:this.datesForPreview+" "+(this.hoursVisible?this.timesForPreview:"")},a.prototype.getExpandedAriaLabel=function(){return this.$translate("a11y.secondModeLabel")+", "+this.title+", "+this.getDate()+", "+this.getLocation()+", "+this.description},a.prototype.addAccessibilityListeners=function(){var a=this;this.$element.on("keydown",function(b){a.shouldExpandOnKeyDown(b)&&(b.preventDefault(),a.onExpand(),a.$timeout(function(){a.$element.find(a.isNarrowList()?a.INFO_SELECTOR:a.BUTTON_SELECTOR).focus()},700))}),this.$element.on("blur",this.CONTENT_WRAPPER_SELECTOR,function(b){b.currentTarget.contains(b.relatedTarget||b.target)||a.$timeout(function(){return a.onClose()})})},a.prototype.shouldExpandOnKeyDown=function(a){return 9===a.keyCode&&!a.shiftKey&&this.$element.is(":focus")&&!this.expanded&&!this.listSettingsHelper.isAdditionalComponentsHidden()},a.prototype.isNarrowList=function(){return angular.element("body").width()<=400},a.prototype.getImageSize=function(){var a="mobile"===this.wixSDK.Utils.getDeviceType();return{width:a?280:300,height:a?120:300}},a.prototype.setElementHeight=function(){var a=this;this.$timeout(function(){a.$element.css("height",a.$element.find(".ev-widget-list-item-content-wrapper").outerHeight(!0))})},a.prototype.setItemHeight=function(){this.$element.css("height",this.$element.find(".ev-widget-list-item-content-wrapper").outerHeight())},a}();angular.module("eventsAppInternal").component("evWidgetListItem",{controller:WidgetListItem,templateUrl:"modules/layout/event-list/widget-list-item/widget-list-item.html",bindings:{expanded:"<",eventId:"<",title:"<evTitle",description:"<",locationTbd:"<",locationName:"<",locationAddress:"<",buttonText:"<",image:"<",startDate:"<",startTime:"<",endDate:"<",endTime:"<",dateTbd:"<",dateTbdMessage:"<",timeZoneId:"<",hoursVisible:"<",locationTbdMessage:"<",onExpand:"&",onClose:"&",onRsvp:"&"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/event-list/widget-list-item/widget-list-item.html","<div class='ev-widget-list-item-content-wrapper'>\n<div class='ev-widget-list-item-container'>\n<div class='ev-widget-list-item-left'>\n<div class='ev-widget-list-item__image' ng-style='$ctrl.imageStyle'></div>\n<ev-list-date aria-label='{{ $ctrl.getShortDate() }}' class='ev-widget-list-item__date' date-tbd='$ctrl.dateTbd' date='$ctrl.startDate'></ev-list-date>\n<div class='ev-widget-list-item-flexible'>\n<div class='ev-widget-list-item-title'>\n<span class='ev-widget-list-item-title__text' ng-bind='$ctrl.title'></span>\n<span class='ev-widget-list-item-title__arrow' ng-include='&#39;images/onstage-icons/event-list-expand-arrow.svg&#39;'></span>\n</div>\n<div aria-hidden='true' class='ev-widget-list-item__divider' ng-bind='&#39; / &#39;'></div>\n<div class='ev-widget-list-item__location' ng-bind='$ctrl.getVenue()'></div>\n</div>\n</div>\n<div class='ev-widget-list-item-right'>\n<ev-list-rsvp-button button-text='$ctrl.buttonText' on-button-click='$ctrl.onRsvp()'></ev-list-rsvp-button>\n</div>\n</div>\n<div aria-label='{{ $ctrl.getExpandedAriaLabel() }}' class='ev-widget-list-item-info' tabindex='0'>\n<div class='ev-widget-list-item-info-date'>\n<div class='ev-widget-list-item-info-date__text' ng-bind='$ctrl.getDate()'></div>\n</div>\n<div class='ev-widget-list-item-info-location'>\n<div class='ev-widget-list-item-info-location__text' ng-bind='$ctrl.getLocation()'></div>\n</div>\n<div class='ev-widget-list-item-info-description'>\n<div class='ev-widget-list-item-info-description__text' ng-bind='$ctrl.description'></div>\n</div>\n<div class='ev-widget-list-item-info-share'>\n<div class='ev-widget-list-item-info-share__text' translate='shareEventText'></div>\n<ev-social-bar event-id='$ctrl.eventId'></ev-social-bar>\n</div>\n<div class='ev-widget-list-item-info-button'>\n<ev-list-rsvp-button button-text='$ctrl.buttonText' on-button-click='$ctrl.onRsvp()'></ev-list-rsvp-button>\n</div>\n</div>\n</div>\n")}]);var ListDate=function(){function a(a){this.dateService=a}return a.$inject=["dateService"],a.prototype.$onInit=function(){this.monthDay=this.dateService.formatDate(this.date,"DD"),this.weekDay=this.dateService.formatDate(this.date,"ddd"),this.month=this.dateService.formatDate(this.date,"MMM")},a}();angular.module("eventsAppInternal").component("evListDate",{controller:ListDate,templateUrl:"modules/layout/event-list/list-date/list-date.html",bindings:{date:"<",dateTbd:"<"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/event-list/list-date/list-date.html","<div class='ev-list-date'>\n<div class='ev-list-date-container' ng-if='!$ctrl.dateTbd'>\n<div class='ev-list-date__month-day' ng-bind='$ctrl.monthDay'></div>\n<div class='ev-list-date-weekday-month'>\n<div class='ev-list-date__week-day' ng-bind='$ctrl.weekDay'></div>\n<div ng-bind='$ctrl.month'></div>\n</div>\n</div>\n<div class='ev-list-date-container' ng-if='$ctrl.dateTbd'>\n<div class='ev-list-date__tbd' translate='listDateTbd'></div>\n</div>\n</div>\n")}]);var ListRsvpButton=function(){function a(a){this.listSettingsHelper=a}return a.$inject=["listSettingsHelper"],a}();angular.module("eventsAppInternal").component("evListRsvpButton",{controller:ListRsvpButton,templateUrl:"modules/layout/event-list/list-rsvp-button/list-rsvp-button.html",bindings:{buttonText:"<",onButtonClick:"&"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/event-list/list-rsvp-button/list-rsvp-button.html","<div class='ev-list-rsvp'>\n<button class='ev-list-rsvp__button' ng-bind='$ctrl.buttonText' ng-class='{ &#39;ev-list-rsvp__button--hollow&#39;: $ctrl.listSettingsHelper.isHollowButton(), &#39;ev-list-rsvp__button--rounded&#39;: $ctrl.listSettingsHelper.isRoundedButton() }' ng-click='$ctrl.onButtonClick()'></button>\n</div>\n")}]);var ListResizeService=function(){function a(a,b,c){this.wixSDK=a,this.evUtils=b,this.$timeout=c,this.LIST_SELECTOR=".ev-widget-list",this.LIST_TITLE_SELECTOR=".ev-widget-list__title",this.LIST_FRAME_SELECTOR=".ev-widget-list-frame",this.LIST_CONTENT_SELECTOR=".ev-widget-list-frame-content",this.CARDS_CONTAINER_SELECTOR=".ev-cards-container"}return a.$inject=["wixSDK","evUtils","$timeout"],a.prototype.resize=function(a,b,c){var d=this;void 0===a&&(a=0),this.$timeout(function(){d.wixSDK.setHeight(d.evUtils.isMobile()?d.getMinMobileListHeight():d.getMinHeight(b)),c&&c()},a)},a.prototype.resizeToDefault=function(a,b){var c=this;void 0===b&&(b=0),this.$timeout(function(){
c.wixSDK.resizeComponent({width:980},function(){c.wixSDK.setHeight(c.getMinHeight(a))})},b)},a.prototype.getCurrentListHeight=function(){return $(this.LIST_FRAME_SELECTOR).outerHeight()},a.prototype.getMinMobileListHeight=function(){return $(this.LIST_SELECTOR).outerHeight()+$(this.LIST_TITLE_SELECTOR).outerHeight()},a.prototype.getMinHeight=function(a){return"LIST"===a?this.getMinListHeight():this.getMinCardsHeight()},a.prototype.getMinListHeight=function(){return $(this.LIST_CONTENT_SELECTOR).width()>401?$(this.LIST_CONTENT_SELECTOR).outerHeight():$(this.LIST_FRAME_SELECTOR).outerHeight()},a.prototype.getMinCardsHeight=function(){return $(this.CARDS_CONTAINER_SELECTOR).outerHeight()},a}();angular.module("eventsAppInternal").service("evListResize",ListResizeService);var ListResize=function(){function a(a,b,c){var d=this;this.$scope=a,this.evUtils=b,this.evListResize=c,this.resize=_.debounce(function(){return d.evUtils.setHeight(d.evUtils.isMobile()?d.evListResize.getMinMobileListHeight():d.evListResize.getMinListHeight())},500),this.watchHeight()}return a.$inject=["$scope","evUtils","evListResize"],a.prototype.watchHeight=function(){var a=this;this.$scope.$watch(function(){return a.evListResize.getMinListHeight()},this.resize.bind(this)),$(window).resize(this.resize.bind(this))},a}();angular.module("eventsAppInternal").directive("evListResize",function(){return{restrict:"A",controller:ListResize}});var Cards=function(){function a(a,b,c,d,e,f,g,h,i,j){this.componentStore=a,this.siteStore=b,this.settingsHelper=c,this.listSettingsHelper=d,this.formService=e,this.eventsBiLogger=f,this.evUtils=g,this.applicationLoad=h,this.$window=i,this.wixSDK=j}return a.$inject=["componentStore","siteStore","settingsHelper","listSettingsHelper","formService","eventsBiLogger","evUtils","applicationLoad","$window","wixSDK"],a.prototype.$onInit=function(){this.getComponentInfo(),this.addPageNavigationEventListener(),this.loadForm(),this.applicationLoad.reportAppLoaded()},a.prototype.openForm=function(a,b){var c=this.componentStore.getComponentEventByID(a),d="pop_up form";return c.externalLink?void this.$window.open(c.externalLink,"_blank"):(this.siteStore.canOpenPage()?(d=1===this.siteStore.getData().pagesType?"page_details":"page_form",this.settingsHelper.navigateToPage(b)):this.formService.openForm({eventId:a,response:"Yes",dividerIsVisible:this.settingsHelper.isDividersVisible(),timestamp:this.now(),fromList:!0,externalLink:c&&c.externalLink}),void this.eventsBiLogger.WIDGET.sendOpenRegistrationFormClicked(null,d,a))},a.prototype.getCardsClasses=function(){return{"ev-cards--no-image":!this.listSettingsHelper.isImageVisible(),"ev-cards--no-date":!this.listSettingsHelper.isDateVisible(),"ev-cards--no-venue":!this.listSettingsHelper.isVenueVisible(),"ev-cards--no-full-date":!this.listSettingsHelper.isFullDateVisible(),"ev-cards--no-location":!this.listSettingsHelper.isLocationVisible(),"ev-cards--no-description":!this.listSettingsHelper.isDescriptionVisible(),"ev-cards--no-social-share":!this.listSettingsHelper.isSocialShareVisible(),"ev-cards--left-alignment":this.listSettingsHelper.isLeftAlignment(),"ev-cards--right-alignment":this.listSettingsHelper.isRightAlignment(),"ev-cards--additional-components-hidden":this.listSettingsHelper.isAdditionalComponentsHidden()}},a.prototype.getComponentInfo=function(){var a=this;this.wixSDK.getComponentInfo(function(b){return a.showOnAllPages=b.showOnAllPages})},a.prototype.addPageNavigationEventListener=function(){var a=this;this.wixSDK.addEventListener(this.wixSDK.Events.PAGE_NAVIGATION,function(b){return(b.isAppOnPage||a.showOnAllPages)&&a.loadForm()})},a.prototype.now=function(){return+new Date},a.prototype.loadForm=function(){this.evUtils.isMobile()||this.formService.loadForm()},a}();angular.module("eventsAppInternal").component("evCards",{controller:Cards,templateUrl:"modules/layout/cards/cards.html"});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/cards/cards.html","<div class='ev-cards' ev-accessibility-listener ev-cards-resize ng-class='$ctrl.getCardsClasses()'>\n<div class='ev-cards-container'>\n<div class='ev-cards__title' ng-bind='$ctrl.componentStore.getComponentSettings().texts.listGeneralTitle' ng-if='$ctrl.listSettingsHelper.isMainTitleVisible()' role='header'></div>\n<div class='ev-cards-content' ev-cards-hover>\n<ev-cards-item date-tbd-message='event.dateTbdMessage' date-tbd='event.dateTbd' description='event.description' end-date='event.endDate' end-time='event.endTime' event-id='event.eventId' event-title='event.title' hours-visible='$ctrl.listSettingsHelper.isHoursVisible()' image-ratio='$ctrl.componentStore.getComponentSettings().imageRatio' image='event.mainImage' location-address='event.location.address' location-name='event.location.name' location-tbd-message='event.locationTbdMessage' location-tbd='event.locationTbd' ng-repeat='event in $ctrl.componentStore.getComponentEvents() track by event.eventId' on-rsvp='$ctrl.openForm(event.eventId, event.slug)' rsvp-button-text='$ctrl.componentStore.getComponentSettings().texts.listButtonText' start-date='event.startDate' start-time='event.startTime' time-zone-id='event.timeZoneId'></ev-cards-item>\n</div>\n</div>\n</div>\n")}]);var CardsItem=function(){function a(a,b,c,d){this.wixSDK=a,this.evUtils=b,this.$translate=c,this.dateService=d,this.imageStyle={},this.IMAGE_SIZE={"1:1":{width:384,height:384},"16:9":{width:384,height:216}},this.shortDateFormat=this.$translate("cardsItemShortDateFormat")}return a.$inject=["wixSDK","evUtils","$translate","dateService"],a.prototype.$onInit=function(){!this.evUtils.isSite()&&this.image&&this.preloadImages(),this.dateTbd||(this.shortDate=this.dateService.formatDate(this.startDate,this.shortDateFormat),this.fullDate=this.dateService.formatDatesForPreview(this.startDate,this.endDate),this.fullTime=this.dateService.formatTimesForPreview(this.startTime,this.endTime,this.timeZoneId,this.startDate))},a.prototype.$onChanges=function(a){if(a.imageRatio&&this.image){var b=this.IMAGE_SIZE[this.imageRatio],c=b.width,d=b.height;this.imageStyle["background-image"]="url("+this.wixSDK.Utils.Media.getResizedImageUrl(this.image,c,d)+")"}},a.prototype.getCardAriaLabel=function(){return this.$translate("a11y.multiModesLabel")+", "+this.title+", "+this.getShortDate()+", "+this.getShortLocation()},a.prototype.getHoveredCardAriaLabel=function(){return this.$translate("a11y.secondModeLabel")+", "+this.title+", "+this.getDate()+", "+this.getLocation()+", "+this.description},a.prototype.getShortDate=function(){return this.dateTbd?this.dateTbdMessage:this.shortDate},a.prototype.getShortLocation=function(){return this.locationTbd?this.locationTbdMessage:this.locationName||this.locationAddress},a.prototype.getDate=function(){return this.dateTbd?this.dateTbdMessage:""+this.fullDate+(this.hoursVisible?this.fullTime:"")},a.prototype.getLocation=function(){var a=(this.locationName?this.locationName+", ":"")+this.locationAddress;return this.locationTbd?this.locationTbdMessage:a},a.prototype.preloadImages=function(){var a=this;Object.keys(this.IMAGE_SIZE).forEach(function(b){var c=a.IMAGE_SIZE[b],d=c.width,e=c.height;(new Image).src=a.wixSDK.Utils.Media.getResizedImageUrl(a.image,d,e)})},a}();angular.module("eventsAppInternal").component("evCardsItem",{controller:CardsItem,templateUrl:"modules/layout/cards/cards-item/cards-item.html",bindings:{eventId:"<",image:"<",imageRatio:"<",title:"<eventTitle",description:"<",startDate:"<",startTime:"<",endDate:"<",endTime:"<",timeZoneId:"<",dateTbd:"<",dateTbdMessage:"<",hoursVisible:"<",locationAddress:"<",locationName:"<",locationTbd:"<",locationTbdMessage:"<",rsvpButtonText:"<",onRsvp:"&"}});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/cards/cards-item/cards-item.html","<div aria-label='{{ $ctrl.getCardAriaLabel() }}' class='ev-cards-item' tabindex='0'>\n<div class='ev-cards-item-container'>\n<div class='ev-cards-item__image' ng-style='$ctrl.imageStyle'></div>\n<div class='ev-cards-item-content'>\n<div class='ev-cards-item__title' ng-bind='$ctrl.title'></div>\n<div aria-hidden='false' class='ev-cards-item-short-date-location'>\n<div class='ev-cards-item__date' ng-bind='$ctrl.getShortDate()'></div>\n<div class='ev-cards-item__divider'></div>\n<div class='ev-cards-item__location' ng-bind='$ctrl.getShortLocation()'></div>\n</div>\n<div aria-hidden='true' aria-label='{{ $ctrl.getHoveredCardAriaLabel() }}' class='ev-cards-item-details'>\n<div class='ev-cards-item-details-date-location'>\n<div class='ev-cards-item-details__date' ng-bind='$ctrl.getDate()'></div>\n<div class='ev-cards-item-details__location' ng-bind='$ctrl.getLocation()'></div>\n</div>\n<div class='ev-cards-item-details__description' ng-bind='$ctrl.description'></div>\n<div class='ev-cards-item-details-share'>\n<div class='ev-cards-item-details-share__text' translate='shareEventText'></div>\n<ev-social-bar event-id='$ctrl.eventId'></ev-social-bar>\n</div>\n</div>\n</div>\n</div>\n<ev-list-rsvp-button button-text='$ctrl.rsvpButtonText' class='ev-cards-item__button' on-button-click='$ctrl.onRsvp()'></ev-list-rsvp-button>\n</div>\n")}]);var CardsHover=function(){function a(a,b,c,d,e){this.$scope=a,this.$timeout=b,this.$element=c,this.listSettingsHelper=d,this.evUtils=e,this.CONTENT_MIN_HEIGHT=82,this.CONTENT_HEIGHT="auto",this.CONTENT_PADDING_TOP=0,this.ANIMATION_DURATION=500,this.CARD_SELECTOR=".ev-cards-item",this.HOVERED_CARD="ev-cards-item--hovered",this.IMAGE_SELECTOR=".ev-cards-item__image",this.CONTENT_SELECTOR=".ev-cards-item-content",this.TITLE_SELECTOR=".ev-cards-item__title",this.SHORT_DATE_LOCATION_SELECTOR=".ev-cards-item-short-date-location",this.DETAILS_SELECTOR=".ev-cards-item-details",this.BUTTON_SELECTOR=".ev-list-rsvp__button",this.SHARE_BUTTON_SELECTOR=".ev-social-bar__button",this.cards=[],this.contentHeight=this.CONTENT_MIN_HEIGHT}return a.$inject=["$scope","$timeout","$element","listSettingsHelper","evUtils"],a.prototype.$onInit=function(){this.addCardsCountListener(),this.addAccessibilityListeners(),this.addMouseEventListeners(),this.addCardToggleListeners(),this.addParamsListeners()},a.prototype.$postLink=function(){this.$timeout(this.setInitialStyles.bind(this),this.ANIMATION_DURATION)},a.prototype.setInitialStyles=function(){this.cards.forEach(this.setCardInitialStyles.bind(this))},a.prototype.setCardInitialStyles=function(a){a.css({visibility:"visible"}),a.find(this.CONTENT_SELECTOR).css({transition:"height .5s, padding-top .5s"}),a.find(this.IMAGE_SELECTOR).css({transition:"padding-top .5s"})},a.prototype.setContentHeight=function(){var a=this;this.contentHeight=this.CONTENT_MIN_HEIGHT,this.cards.forEach(function(b){var c=b.find(a.CONTENT_SELECTOR);a.listSettingsHelper.isImageVisible()&&!a.isCardHovered(b)&&(c.css({"min-height":a.CONTENT_MIN_HEIGHT,height:a.CONTENT_HEIGHT}),a.contentHeight=c.height()>a.contentHeight?c.height():a.contentHeight)}),this.assignContentHeight()},a.prototype.assignContentHeight=function(){var a=this;this.cards.forEach(function(b){var c=b.find(a.CONTENT_SELECTOR);if(a.listSettingsHelper.isImageVisible()&&!a.isCardHovered(b))c.css({height:a.contentHeight});else{var d=a.getExpandedContentHeight(c);c.css({height:d,"padding-top":a.getExpandedContentPadding(b,d,a.isCardHovered(b))})}})},a.prototype.isCardHovered=function(a){return a.hasClass(this.HOVERED_CARD)},a.prototype.toggleImage=function(a,b){void 0===b&&(b=!1),this.listSettingsHelper.isImageVisible()?this.showImage(a):this.hideImage(a,!1),b&&this.$timeout(this.setContentHeight.bind(this),this.ANIMATION_DURATION)},a.prototype.showImage=function(a){a.find(this.IMAGE_SELECTOR).css({"padding-top":100*this.getImageRatio()+"%"}),a.find(this.CONTENT_SELECTOR).css({height:this.contentHeight,"padding-top":this.CONTENT_PADDING_TOP,"overflow-y":"hidden"})},a.prototype.hideImage=function(a,b){void 0===b&&(b=!0);var c=a.find(this.IMAGE_SELECTOR),d=a.find(this.CONTENT_SELECTOR),e=this.getExpandedContentHeight(d);c.css({"padding-top":0}),d.css({height:e,"padding-top":this.getExpandedContentPadding(a,e,b)})},a.prototype.hover=function(a){a.addClass(this.HOVERED_CARD),a.find(this.TITLE_SELECTOR).attr("aria-hidden","true"),a.find(this.SHORT_DATE_LOCATION_SELECTOR).attr("aria-hidden","true"),a.find(this.DETAILS_SELECTOR).attr("tabindex","0"),a.find(this.DETAILS_SELECTOR).removeAttr("aria-hidden"),a.find(this.BUTTON_SELECTOR).removeAttr("aria-hidden"),a.find(this.BUTTON_SELECTOR).removeAttr("tabindex"),a.find(this.SHARE_BUTTON_SELECTOR).removeAttr("tabindex"),this.hideImage(a),this.setComponentsWidth(a)},a.prototype.leave=function(a){a.find(this.CONTENT_SELECTOR).scrollTop(0),a.removeClass(this.HOVERED_CARD),a.find(this.TITLE_SELECTOR).removeAttr("aria-hidden"),a.find(this.SHORT_DATE_LOCATION_SELECTOR).removeAttr("aria-hidden"),a.find(this.DETAILS_SELECTOR).removeAttr("tabindex"),a.find(this.DETAILS_SELECTOR).attr("aria-hidden","true"),a.find(this.BUTTON_SELECTOR).attr("aria-hidden","true"),a.find(this.BUTTON_SELECTOR).attr("tabindex","-1"),a.find(this.SHARE_BUTTON_SELECTOR).attr("tabindex","-1"),this.toggleImage(a),this.setComponentsWidth(a,"auto")},a.prototype.hoverFirst=function(){this.hover(this.cards[0]),this.setContentHeight()},a.prototype.leaveFirst=function(){this.leave(this.cards[0]),this.listSettingsHelper.isImageVisible()?this.$timeout(this.setContentHeight.bind(this),this.ANIMATION_DURATION):this.setContentHeight()},a.prototype.removeEditorCardHover=function(){var a=this,b=this.cards.find(function(b){return a.isCardHovered(b)});b&&this.leave(b)},a.prototype.setComponentsWidth=function(a,b){b=b||a.find(this.CONTENT_SELECTOR).width(),a.find(this.TITLE_SELECTOR).css({width:b}),a.find(this.SHORT_DATE_LOCATION_SELECTOR).css({width:b}),a.find(this.DETAILS_SELECTOR).css({width:b})},a.prototype.getExpandedContentHeight=function(a){return this.contentHeight+a.outerWidth()*this.getImageRatio()},a.prototype.getExpandedContentPadding=function(a,b,c){var d=a.find(this.TITLE_SELECTOR).outerHeight(!0)+(c?a.find(this.DETAILS_SELECTOR).outerHeight():a.find(this.SHORT_DATE_LOCATION_SELECTOR).outerHeight()),e=(b-d)/2;return a.find(this.CONTENT_SELECTOR).css({"overflow-y":e<this.CONTENT_PADDING_TOP?"scroll":"hidden"}),e>this.CONTENT_PADDING_TOP?e:this.CONTENT_PADDING_TOP},a.prototype.getImageRatio=function(){return this.listSettingsHelper.isImage1to1()?1:9/16},a.prototype.addCardsCountListener=function(){var a=this;this.$scope.$watchCollection(function(){return a.$element.find(a.CARD_SELECTOR)},function(b,c){if(a.cards=b.toArray().map(function(a){return angular.element(a)}),c.length){var d=b.toArray().filter(function(a){return c.indexOf(a)<0})[0];if(d){var e=angular.element(d);a.setCardInitialStyles(e),a.toggleImage(e,!0)}}})},a.prototype.addAccessibilityListeners=function(){var a=this;this.$element.on("keydown",this.CARD_SELECTOR,function(b){var c=angular.element(b.currentTarget);a.shouldExpandOnKeyDown(b,c)&&(b.preventDefault(),a.hover(c),a.$timeout(function(){return c.find(a.DETAILS_SELECTOR).focus()},a.ANIMATION_DURATION))}),this.$element.on("blur",this.CARD_SELECTOR,function(b){b.currentTarget.contains(b.relatedTarget)||a.leave(angular.element(b.currentTarget))})},a.prototype.addMouseEventListeners=function(){var a=this;this.$element.on("mouseover",this.CARD_SELECTOR,function(b){a.isValidMouseEvent()&&a.hover(angular.element(b.currentTarget))}),this.$element.on("mouseleave",this.CARD_SELECTOR,function(b){a.isValidMouseEvent()&&a.leave(angular.element(b.currentTarget))})},a.prototype.addCardToggleListeners=function(){var a=this;this.$scope.$on("EXPAND_EVENT",function(){return a.$timeout(a.hoverFirst.bind(a))}),this.$scope.$on("COLLAPSE_EVENT",function(){return a.$timeout(a.leaveFirst.bind(a))}),$(window).resize(_.throttle(this.removeEditorCardHover.bind(this),1e3,{leading:!0,trailing:!1}))},a.prototype.addParamsListeners=function(){var a=this;this.$scope.$watchGroup([function(){return a.$element.find(a.TITLE_SELECTOR).css("font")},function(){return a.$element.find(a.SHORT_DATE_LOCATION_SELECTOR).css("font")}],function(){return a.$timeout(a.setContentHeight.bind(a))}),this.$scope.$watch(function(){return a.listSettingsHelper.isImage1to1()},function(){a.$timeout(function(){return a.cards.forEach(function(b){return a.toggleImage(b)})})}),this.$scope.$watch(function(){return a.listSettingsHelper.isImageVisible()},function(){a.$timeout(function(){return a.cards.forEach(function(b){return!a.isCardHovered(b)&&a.toggleImage(b,!0)})})})},a.prototype.shouldExpandOnKeyDown=function(a,b){return 9===a.keyCode&&!a.shiftKey&&b.is(":focus")&&!this.isCardHovered(b)&&!this.listSettingsHelper.isAdditionalComponentsHidden()},a.prototype.isValidMouseEvent=function(){return!this.listSettingsHelper.isAdditionalComponentsHidden()&&!this.evUtils.isEditor()},a}();angular.module("eventsAppInternal").directive("evCardsHover",function(){return{restrict:"A",controller:CardsHover}});var CardsResize=function(){function a(a,b,c){var d=this;this.$scope=a,this.evUtils=b,this.evListResize=c,this.resize=_.debounce(function(){return d.evUtils.setHeight(d.evListResize.getMinCardsHeight())},500),this.watchHeight()}return a.$inject=["$scope","evUtils","evListResize"],a.prototype.watchHeight=function(){var a=this;this.$scope.$watch(function(){return a.evListResize.getMinCardsHeight()},this.resize.bind(this)),$(window).resize(this.resize.bind(this))},a}();angular.module("eventsAppInternal").directive("evCardsResize",function(){return{restrict:"A",controller:CardsResize}});var NewCards=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.$scope=a,this.$window=b,this.settingsStore=c,this.componentStore=d,this.siteStore=e,this.settingsHelper=f,this.listSettingsHelper=g,this.formService=h,this.shareService=i,this.eventsBiLogger=j,this.evUtils=k,this.applicationLoad=l,this.wixSDK=m,this.PAGE_STATICS_URL=n,this.props={},this.config={locale:m.Utils.getLocale(),baseUrl:this.PAGE_STATICS_URL}}return a.$inject=["$scope","$window","settingsStore","componentStore","siteStore","settingsHelper","listSettingsHelper","formService","shareService","eventsBiLogger","evUtils","applicationLoad","wixSDK","PAGE_STATICS_URL"],a.prototype.$onInit=function(){this.getComponentInfo(),this.addPageNavigationEventListener(),this.loadForm(),this.applicationLoad.reportAppLoaded(),this.listenForChanges(),this.renderCards(this.getProps())},a.prototype.listenForChanges=function(){var a=this;this.$scope.$on("EXPAND_EVENT",function(){return a.renderCards(a.getProps({expand:!0}))}),this.$scope.$on("COLLAPSE_EVENT",function(){return a.renderCards(a.getProps({expand:!1}))}),this.$scope.$on("WIX_PARAMS_CHANGED",function(){return a.renderCards(a.getProps())}),this.$scope.$on("UPDATE_REACT_LAYOUT",function(){return a.renderCards(a.getProps())})},a.prototype.openForm=function(a,b){var c=this.componentStore.getComponentEventByID(a),d="pop_up form";return c.externalLink?void this.$window.open(c.externalLink,"_blank"):(this.siteStore.canOpenPage()?(d=1===this.siteStore.getData().pagesType?"page_details":"page_form",this.settingsHelper.navigateToPage(b)):this.formService.openForm({eventId:a,response:"Yes",dividerIsVisible:this.settingsHelper.isDividersVisible(),timestamp:this.now(),fromList:!0,externalLink:c&&c.externalLink}),void this.eventsBiLogger.WIDGET.sendOpenRegistrationFormClicked(null,d,a))},a.prototype.renderCards=function(a){this.$window.renderReactComponent(this.$window.getReactComponents().Cards,document.getElementById("ev-new-cards"),this.config,a)},a.prototype.getProps=function(a){var b=this;void 0===a&&(a={});var c=this.settingsStore.getSettings(),d=this.settingsStore.getParams();return Object.assign(this.props,{componentEvents:this.componentStore.getComponentEvents(),widgetSettings:{showListTitle:this.listSettingsHelper.isMainTitleVisible(),showImage:this.listSettingsHelper.isImageVisible(),showDate:this.listSettingsHelper.isDateVisible(),showVenue:this.listSettingsHelper.isVenueVisible(),showFullDate:this.listSettingsHelper.isFullDateVisible(),showHours:this.listSettingsHelper.isHoursVisible(),showLocation:this.listSettingsHelper.isLocationVisible(),showDescription:this.listSettingsHelper.isDescriptionVisible(),showSocialBar:this.listSettingsHelper.isSocialShareVisible(),hideAdditionalComponents:this.listSettingsHelper.isAdditionalComponentsHidden(),listTitle:c.texts.listGeneralTitle,cardsPerRow:c.cardsPerRow,cardMargins:d.numbers.cardMargins,cardBorderWidth:d.numbers.cardBorderWidth,imageRatio:c.imageRatio,listImageOpacity:d.numbers.listImageOpacity,listAlignment:c.listAlignment,listButtonText:c.texts.listButtonText,listButtonStyle:d.numbers.listButtonStyle},onRsvp:function(a,c){return b.openForm(a,c)},onShare:function(a,c){return b.shareService.shareOn(a,c)},updateCompSettings:function(a){b.settingsStore.setComponentSettings(a),b.componentStore.updateComponentDraftSettings().then(function(){return b.renderCards(b.getProps())})}},a)},a.prototype.getComponentInfo=function(){var a=this;this.wixSDK.getComponentInfo(function(b){return a.showOnAllPages=b.showOnAllPages})},a.prototype.addPageNavigationEventListener=function(){var a=this;this.wixSDK.addEventListener(this.wixSDK.Events.PAGE_NAVIGATION,function(b){return(b.isAppOnPage||a.showOnAllPages)&&a.loadForm()})},a.prototype.loadForm=function(){this.evUtils.isMobile()||this.formService.loadForm()},a.prototype.now=function(){return+new Date},a}();angular.module("eventsAppInternal").component("evNewCards",{controller:NewCards,templateUrl:"modules/layout/new-cards/new-cards.html"});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/new-cards/new-cards.html","<div id='ev-new-cards'></div>\n")}]);var SideBySide=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.$scope=a,this.$window=b,this.settingsStore=c,this.componentStore=d,this.siteStore=e,this.settingsHelper=f,this.listSettingsHelper=g,this.formService=h,this.shareService=i,this.eventsBiLogger=j,this.evUtils=k,this.applicationLoad=l,this.wixSDK=m,this.PAGE_STATICS_URL=n,this.props={},this.config={locale:m.Utils.getLocale(),baseUrl:this.PAGE_STATICS_URL}}return a.$inject=["$scope","$window","settingsStore","componentStore","siteStore","settingsHelper","listSettingsHelper","formService","shareService","eventsBiLogger","evUtils","applicationLoad","wixSDK","PAGE_STATICS_URL"],a.prototype.$onInit=function(){this.getComponentInfo(),this.addPageNavigationEventListener(),this.loadForm(),this.applicationLoad.reportAppLoaded(),this.listenForChanges(),this.renderLayout(this.getProps())},a.prototype.listenForChanges=function(){var a=this;this.$scope.$on("WIX_PARAMS_CHANGED",function(){return a.renderLayout(a.getProps())}),this.$scope.$on("UPDATE_REACT_LAYOUT",function(){return a.renderLayout(a.getProps())})},a.prototype.openForm=function(a,b){var c=this.componentStore.getComponentEventByID(a),d="pop_up form";this.siteStore.canOpenPage()?(d=1===this.siteStore.getData().pagesType?"page_details":"page_form",this.settingsHelper.navigateToPage(b)):this.formService.openForm({eventId:a,response:"Yes",dividerIsVisible:this.settingsHelper.isDividersVisible(),timestamp:this.now(),fromList:!0,externalLink:c&&c.externalLink}),this.eventsBiLogger.WIDGET.sendOpenRegistrationFormClicked(null,d,a)},a.prototype.renderLayout=function(a){this.$window.renderReactComponent(this.$window.getReactComponents().SideBySide,document.getElementById("ev-side-by-side"),this.config,a)},a.prototype.getProps=function(a){var b=this;void 0===a&&(a={});var c=this.settingsStore.getSettings(),d=this.settingsStore.getParams();return Object.assign(this.props,{componentEvents:this.componentStore.getComponentEvents(),widgetSettings:{showListTitle:this.listSettingsHelper.isMainTitleVisible(),showImage:this.listSettingsHelper.isImageVisible(),showDate:this.listSettingsHelper.isDateVisible(),showVenue:this.listSettingsHelper.isVenueVisible(),showFullDate:this.listSettingsHelper.isFullDateVisible(),showHours:this.listSettingsHelper.isHoursVisible(),showLocation:this.listSettingsHelper.isLocationVisible(),showDescription:this.listSettingsHelper.isDescriptionVisible(),showSocialBar:this.listSettingsHelper.isSocialShareVisible(),listTitle:c.texts.listGeneralTitle,sideBySideLayoutMargins:d.numbers.sideBySideLayoutMargins,listImageLayout:c.listImageLayout,listImagePosition:d.numbers.listImagePosition,listImageOpacity:d.numbers.listImageOpacity,listImageWidth:d.numbers.listImageWidth,listAlignment:c.listAlignment,listLocationAndDateFormat:d.numbers.listLocationAndDateFormat,listButtonText:c.texts.listButtonText,listButtonStyle:d.numbers.listButtonStyle},onRsvp:function(a,c){return b.openForm(a,c)},onShare:function(a,c){return b.shareService.shareOn(a,c)}},a)},a.prototype.getComponentInfo=function(){var a=this;this.wixSDK.getComponentInfo(function(b){return a.showOnAllPages=b.showOnAllPages})},a.prototype.addPageNavigationEventListener=function(){var a=this;this.wixSDK.addEventListener(this.wixSDK.Events.PAGE_NAVIGATION,function(b){return(b.isAppOnPage||a.showOnAllPages)&&a.loadForm()})},a.prototype.loadForm=function(){this.evUtils.isMobile()||this.formService.loadForm()},a.prototype.now=function(){return+new Date},a}();angular.module("eventsAppInternal").component("evSideBySide",{controller:SideBySide,templateUrl:"modules/layout/side-by-side/side-by-side.html"});try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/layout/side-by-side/side-by-side.html","<div id='ev-side-by-side'></div>\n")}]);var ErrorPageController=function(){function a(a){this.$location=a}return a.$inject=["$location"],a.prototype.navigate=function(){this.$location.path("/")},a}();angular.module("eventsAppInternal").controller("errorPageController",ErrorPageController);try{angular.module("eventsPreload")}catch(e){angular.module("eventsPreload",[])}angular.module("eventsPreload").run(["$templateCache",function(a){a.put("modules/error-page/error-page.html","<div ng-click='errorPage.navigate()'>ERROR PAGE</div>\n")}]);